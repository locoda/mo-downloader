{
  "match": 0,
  "info": "mo\u4e0b\u8f7d\u5668",
  "regex": "m.tribe-m.jp@@m.ex-m.jp@@m.ldh-m.jp@@m.ldhgirls-m.jp",
  "runat": 0,
  "version": "0.80",
  "author": "\u4e59\u919a",
  "name": "mo\u4e0b\u8f7d\u5668",
  "code": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICAgbW8gKExESCkg5LiL6L295ZmoCi8vIEBuYW1lc3BhY2UgICAgICAgICAgIGh0dHBzOi8vMW1ldGhlci5tZS8KLy8gQHZlcnNpb24gICAgICAgICAgICAgMC44MAovLyBAZGVzY3JpcHRpb24gICAgICAgICDlnKhtb+eahOWGheWuuemhteWinuWKoOWbvueJh+WSjOinhumikeS4i+i9veeahOaMiemSru+8jCDop6PplIHlj7PplK7lip/og70KLy8gQGF1dGhvciAgICAgICAgICAgICAg5LmZ6YaaKEBsb2NvZGEpCi8vIEBtYXRjaCAgICAgICAgICAgICAgIGh0dHAqOi8vbS50cmliZS1tLmpwLyoKLy8gQG1hdGNoICAgICAgICAgICAgICAgaHR0cCo6Ly9tLmV4LW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoLW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoZ2lybHMtbS5qcC8qCi8vIEBtYXRjaCAgICAgICAgICAgICAgIGh0dHAqOi8vKi5leGZhbWlseS5qcC8qCi8vIEBpY29uICAgICAgICAgICAgICAgIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vczIvZmF2aWNvbnM/c3o9NjQmZG9tYWluPWxkaC5jby5qcAovLyBAc291cmNlICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vbG9jb2RhL21vLWRvd25sb2FkZXIKLy8gQGxpY2Vuc2UgICAgICAgICAgICAgTUlUCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uICgpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIC8vID09PT09PT09PT09PT09PT0KICAgIC8vID0gICAgQ29uc3RzICAgID0KICAgIC8vID09PT09PT09PT09PT09PT0KCiAgICBjb25zdCBpc01vYmlsZSA9ICgpID0+CiAgICAgICAgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KAogICAgICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50CiAgICAgICAgKTsKCiAgICBjb25zdCBrZXl3b3JkcyA9IFsidXBsY21uIiwgInVwbG9hZCJdOwoKICAgIC8vID09PT09PT09PT09PT09CiAgICAvLyA9ICAgIE1haW4gICAgPQogICAgLy8gPT09PT09PT09PT09PT0KCiAgICAvLyBNbyDkuIvovb3lm77niYcKICAgIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdC5pbmNsdWRlcygiLW0uanAiKSkgewogICAgICAgIC8vIOWIoOmZpOWbvueJh+S/neaKpAogICAgICAgIHJlbW92ZVByb3RlY3RJbWcoKTsKICAgICAgICAvLyDlnKjor6bmg4XpobXms6jlhaXmjInpkq4KICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCJkZXRhaWwiKSkgewogICAgICAgICAgICBpbmplY3REb3dubG9hZEFsbEJ1dHRvbnMoKTsKICAgICAgICB9CiAgICAgICAgLy8g5Zyo6KeG6aKR6aG16Z2i5rOo5YWl5oyJ6ZKuCiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcygibW92aWUiKSkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2LmxpbWVsaWdodC1wbGF5ZXIiKSkgewogICAgICAgICAgICAgICAgaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbihkb2N1bWVudCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8g5Zyo5pe26Ze06L2055WM6Z2i5Yid5aeL5YyW5bm26K6+572uTGlzdGVuZXIKICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCJ0aW1lbGluZSIpKSB7CiAgICAgICAgICAgIC8vIOetieW+heWKoOi9vXNjcm9sbAogICAgICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgICAgICAgICAgIHZhciBjb3VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibGRoLWluZmluaXRlLXNjcm9sbCIpOwogICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIpIHsKICAgICAgICAgICAgICAgICAgICAvLyDorr7nva7mjInpkq7lkoznm5HlkKwKICAgICAgICAgICAgICAgICAgICByZW1vdmVQcm90ZWN0SW1nKCk7CiAgICAgICAgICAgICAgICAgICAgY3VzdG9taXplZFRpbWVsaW5lUGFnZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGluaXQsIDMwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgfQogICAgICAgIC8vIOWcqEHlhpnpobXpnaLms6jlhaXmjInpkq4KICAgICAgICBpZiAoCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcygiYXJ0aXN0cGhvdG8iKSB8fAogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoImFydGlzdF9waG90byIpCiAgICAgICAgKSB7CiAgICAgICAgICAgIGluamVjdEFydGlzdFBob3RvRG93bmxvYWRCdXR0b24oKTsKICAgICAgICB9CiAgICAgICAgLy8g5ZyoT2Zmc2hvdOmhtemdouazqOWFpeaMiemSrgogICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoImxkaF9vZmZfc2hvdCIpKSB7CiAgICAgICAgICAgIGluamVjdE9mZnNob3REb3dubG9hZEJ1dHRvbigpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBGQyDkuIvovb3lm77niYcKICAgIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdC5pbmNsdWRlcygiZXhmYW1pbHkuanAiKSkgewogICAgICAgIGluamVjdEZDTWFnYXppbmVCdXR0b24oKTsKICAgICAgICBpbmplY3RGQ0dhbGxlcnlCdXR0b24oKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT0KICAgIC8vID0gICAgVXRpbHMgICAgPQogICAgLy8gPT09PT09PT09PT09PT09CgogICAgZnVuY3Rpb24gcmVtb3ZlUHJvdGVjdEltZygpIHsKICAgICAgICAvLyDnp7vpmaTlj7PplK7pmZDliLYKICAgICAgICBkb2N1bWVudC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9OwogICAgICAgIC8vIOenu+mZpHByb3RlY3RpbWfpmZDliLYKICAgICAgICBkb2N1bWVudAogICAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgiLnByb3RlY3RpbWciKQogICAgICAgICAgICAuZm9yRWFjaCgobm9kZSkgPT4gbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCJwcm90ZWN0aW1nIikpOwogICAgICAgIG1vRG93bmxvYWRlckxvZygi56e76Zmk5Y+z6ZSu6ZmQ5Yi2Iik7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vID0gICAgQnV0dG9uIEluamVjdGlvbiBVdGlscyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICAgIGZ1bmN0aW9uIGluamVjdERvd25sb2FkQWxsQnV0dG9ucygpIHsKICAgICAgICB2YXIgYXJ0aWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImFydGljbGUiKTsKICAgICAgICBpZiAoYXJ0aWNsZS5jbGFzc0xpc3QuY29udGFpbnMoImFydGljbGUtLW5ld3MiKSkgewogICAgICAgICAgICAvLyDmlrDpl7vpobXpnaLnibnmrorlpITnkIYKICAgICAgICAgICAgYXJ0aWNsZSA9IGFydGljbGUucXVlcnlTZWxlY3RvcigiLmFydGljbGVfX2JvZHkiKTsKICAgICAgICB9CiAgICAgICAgYXR0YWNoQnV0dG9uVG9BcnRpY2xlKGFydGljbGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmRFbGlnaWJsZUltZ3NGcm9tQXJ0aWNsZShhcnRpY2xlKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oYXJ0aWNsZS5xdWVyeVNlbGVjdG9yQWxsKCJpbWciKSkKICAgICAgICAgICAgLm1hcCgoaW1nKSA9PiBpbWcuc3JjKQogICAgICAgICAgICAuZmlsdGVyKChpbWcpID0+IGtleXdvcmRzLnNvbWUoKGspID0+IGltZy5pbmNsdWRlcyhrKSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShhcnRpY2xlKSB7CiAgICAgICAgdmFyIGltZ3MgPSBmaW5kRWxpZ2libGVJbWdzRnJvbUFydGljbGUoYXJ0aWNsZSk7CiAgICAgICAgLy8g5rOo5YWl5oyJ6ZKuIGRpdgogICAgICAgIHZhciBidXR0b25zRGl2ID0gZ2V0QnV0dG9uRGl2KCk7CiAgICAgICAgYXJ0aWNsZS5pbnNlcnRCZWZvcmUoYnV0dG9uc0RpdiwgYXJ0aWNsZS5maXJzdENoaWxkKTsKICAgICAgICAvLyDlm77niYfpk77mjqXnlJ/miJDmjInpkq4KICAgICAgICBpbmplY3RJbWFnZURvd25sb2FkQnV0dG9uKGJ1dHRvbnNEaXYsIGltZ3MsIGdldFByZWZpeEZyb21BcnRpY2xlKGFydGljbGUpKTsKICAgICAgICAvLyDop4bpopHkuIvovb3mjInpkq4KICAgICAgICBpZiAoCiAgICAgICAgICAgIGFydGljbGUucXVlcnlTZWxlY3RvcigiZGl2LmxpbWVsaWdodC1wbGF5ZXIiKSB8fAogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoImEucG9wdXBfbGluayIpCiAgICAgICAgKSB7CiAgICAgICAgICAgIC8vIExpc3QgVmlldyDop4bpopEKICAgICAgICAgICAgaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbihhcnRpY2xlKTsKICAgICAgICAgICAgLy8gVGltZWxpbmUg6KeG6aKRCiAgICAgICAgICAgIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b25Gb3JUaW1lbGluZShhcnRpY2xlKTsKICAgICAgICB9CiAgICAgICAgbW9Eb3dubG9hZGVyTG9nKCLms6jlhaXmjInpkq4iKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbmplY3RQZXJWaWRlb0Rvd25sb2FkQnV0dG9uKGRpdikgewogICAgICAgIGRpdi5xdWVyeVNlbGVjdG9yQWxsKCJkaXYubGltZWxpZ2h0LXBsYXllciIpLmZvckVhY2goKHZpZGVvRGl2KSA9PiB7CiAgICAgICAgICAgIHZhciBtZWRpYUlkID0gdmlkZW9EaXYuaWQuc3Vic3RyaW5nKHZpZGVvRGl2LmlkLmxhc3RJbmRleE9mKCJfIikgKyAxKTsKICAgICAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcoIuato+WcqOS4i+i9veinhumike+8miAiICsgbWVkaWFJZCk7CiAgICAgICAgICAgIGluamVjdE9uZUJ1dHRvbih2aWRlb0Rpdi5wYXJlbnRFbGVtZW50LCAi5LiL6L296KeG6aKRIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBkb3dubG9hZFZpZGVvKGV2ZW50LnRhcmdldCwgbWVkaWFJZCwgZ2V0UHJlZml4RnJvbUFydGljbGUoZGl2KSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdEFydGlzdFBob3RvRG93bmxvYWRCdXR0b24oKSB7CiAgICAgICAgdmFyIGlubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2Ntcy1pbm5lciIpOwogICAgICAgIHZhciB0aXRsZSwgaW1nczsKICAgICAgICBpZiAoaW5uZXIpIHsKICAgICAgICAgICAgLy8gTmV3IFBhZ2UKICAgICAgICAgICAgdGl0bGUgPSBpbm5lci5xdWVyeVNlbGVjdG9yKCIuY21zLXNlY3Rpb25fX2lubmVyX19vbmUtY29sIik7CiAgICAgICAgICAgIGltZ3MgPSBBcnJheS5mcm9tKGlubmVyLnF1ZXJ5U2VsZWN0b3JBbGwoImxkaC1jbXMtaW1nIGltZyIpKS5tYXAoCiAgICAgICAgICAgICAgICAoaW1nKSA9PiBpbWcuc3JjCiAgICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gTGVnYWN5IFBhZ2UKICAgICAgICAgICAgaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuaW5uZXIiKTsKICAgICAgICAgICAgdGl0bGUgPSBpbm5lci5xdWVyeVNlbGVjdG9yKCJzZWN0aW9uIik7CiAgICAgICAgICAgIGltZ3MgPSBBcnJheS5mcm9tKGlubmVyLnF1ZXJ5U2VsZWN0b3JBbGwoImltZyIpKS5tYXAoKGltZykgPT4gaW1nLnNyYyk7CiAgICAgICAgfQogICAgICAgIHZhciBidXR0b25zRGl2ID0gZ2V0QnV0dG9uRGl2KCk7CiAgICAgICAgdGl0bGUuYXBwZW5kKGJ1dHRvbnNEaXYpOwogICAgICAgIGluamVjdEltYWdlRG93bmxvYWRCdXR0b24oYnV0dG9uc0RpdiwgaW1ncywgZ2V0UHJlZml4RnJvbURvY3VtZW50KCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdE9mZnNob3REb3dubG9hZEJ1dHRvbigpIHsKICAgICAgICB2YXIgaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuaW5uZXIiKTsKICAgICAgICB2YXIgZGl2cyA9IEFycmF5LmZyb20oaW5uZXIucXVlcnlTZWxlY3RvckFsbCgiZGl2W2lkXj0nanMtZ2FsbGVyeSddIikpOwogICAgICAgIGRpdnMuZm9yRWFjaCgoZGl2KSA9PiB7CiAgICAgICAgICAgIHZhciBidXR0b25zRGl2ID0gZ2V0QnV0dG9uRGl2KCk7CiAgICAgICAgICAgIGRpdi5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGJ1dHRvbnNEaXYpOwogICAgICAgICAgICB2YXIgaW1ncyA9IEFycmF5LmZyb20oZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoImEiKSkubWFwKAogICAgICAgICAgICAgICAgKGEpID0+IG5ldyBVUkwoYS5ocmVmLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKS5ocmVmCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGluamVjdEltYWdlRG93bmxvYWRCdXR0b24oYnV0dG9uc0RpdiwgaW1ncywgZ2V0UHJlZml4RnJvbURvY3VtZW50KCkpOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b25Gb3JUaW1lbGluZShkaXYpIHsKICAgICAgICBkaXYucXVlcnlTZWxlY3RvckFsbCgiYS5wb3B1cF9saW5rIikuZm9yRWFjaCgodmlkZW9EaXYpID0+IHsKICAgICAgICAgICAgdmFyIG1lZGlhSWQgPSB2aWRlb0RpdgogICAgICAgICAgICAgICAgLmdldEF0dHJpYnV0ZSgib25jbGljayIpCiAgICAgICAgICAgICAgICAuc3BsaXQoIm1vdmllLyIpWzFdCiAgICAgICAgICAgICAgICAuc3BsaXQoIi8iKVswXTsKICAgICAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcoIuato+WcqOS4i+i9veinhumike+8miAiICsgbWVkaWFJZCk7CiAgICAgICAgICAgIGluamVjdE9uZUJ1dHRvbih2aWRlb0Rpdi5wYXJlbnRFbGVtZW50LCAi5LiL6L296KeG6aKRIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBkb3dubG9hZFZpZGVvKGV2ZW50LnRhcmdldCwgbWVkaWFJZCwgZ2V0UHJlZml4RnJvbUFydGljbGUoZGl2KSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdEZDTWFnYXppbmVCdXR0b24oKSB7CiAgICAgICAgdmFyIGFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhcnRpY2xlIik7CiAgICAgICAgaWYgKCFhcnRpY2xlKSByZXR1cm47CiAgICAgICAgdmFyIGltZ3MgPSBBcnJheS5mcm9tKGFydGljbGUucXVlcnlTZWxlY3RvckFsbCgiaW1nIikpLm1hcCgKICAgICAgICAgICAgKGltZykgPT4KICAgICAgICAgICAgICAgIG5ldyBVUkwoaW1nLmdldEF0dHJpYnV0ZSgiZGF0YS1zcmMiKSB8fCBpbWcuc3JjLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKQogICAgICAgICAgICAgICAgICAgIC5ocmVmCiAgICAgICAgKTsKICAgICAgICBpbWdzID0gWy4uLm5ldyBTZXQoaW1ncyldOwogICAgICAgIHZhciBidXR0b25zRGl2ID0gZ2V0QnV0dG9uRGl2KCk7CiAgICAgICAgYXJ0aWNsZS5pbnNlcnRCZWZvcmUoYnV0dG9uc0RpdiwgYXJ0aWNsZS5maXJzdENoaWxkKTsKICAgICAgICBpbmplY3RJbWFnZURvd25sb2FkQnV0dG9uKGJ1dHRvbnNEaXYsIGltZ3MsIGdldFByZWZpeEZyb21BcnRpY2xlKGFydGljbGUpKTsKICAgICAgICBBcnJheS5mcm9tKGFydGljbGUucXVlcnlTZWxlY3RvckFsbCgiLmpzLWltZyIpKS5mb3JFYWNoKChqc0ltZykgPT4gewogICAgICAgICAgICB2YXIgYnV0dG9uc0RpdiA9IGdldEJ1dHRvbkRpdigpOwogICAgICAgICAgICBqc0ltZy5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShidXR0b25zRGl2LCBqc0ltZyk7CiAgICAgICAgICAgIHZhciBpbWdzID0gQXJyYXkuZnJvbShqc0ltZy5xdWVyeVNlbGVjdG9yQWxsKCJpbWciKSkubWFwKAogICAgICAgICAgICAgICAgKGltZykgPT4KICAgICAgICAgICAgICAgICAgICBuZXcgVVJMKAogICAgICAgICAgICAgICAgICAgICAgICBpbWcuZ2V0QXR0cmlidXRlKCJkYXRhLXNyYyIpIHx8IGltZy5zcmMsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4KICAgICAgICAgICAgICAgICAgICApLmhyZWYKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaW5qZWN0SW1hZ2VEb3dubG9hZEJ1dHRvbigKICAgICAgICAgICAgICAgIGJ1dHRvbnNEaXYsCiAgICAgICAgICAgICAgICBpbWdzLAogICAgICAgICAgICAgICAgZ2V0UHJlZml4RnJvbUFydGljbGUoYXJ0aWNsZSksCiAgICAgICAgICAgICAgICBmYWxzZQogICAgICAgICAgICApOwogICAgICAgIH0pOwogICAgICAgIEFycmF5LmZyb20oCiAgICAgICAgICAgIGFydGljbGUucXVlcnlTZWxlY3RvckFsbCgiLmpzLWdhbGxlcnkgLmMtZ2FsbGVyeV9fbWFpbiIpCiAgICAgICAgKS5mb3JFYWNoKChqc0dhbGxlcnkpID0+IHsKICAgICAgICAgICAgdmFyIGJ1dHRvbnNEaXYgPSBnZXRCdXR0b25EaXYoKTsKICAgICAgICAgICAganNHYWxsZXJ5LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGJ1dHRvbnNEaXYsIGpzR2FsbGVyeSk7CiAgICAgICAgICAgIHZhciBpbWdzID0gQXJyYXkuZnJvbShqc0dhbGxlcnkucXVlcnlTZWxlY3RvckFsbCgiaW1nIikpLm1hcCgKICAgICAgICAgICAgICAgIChpbWcpID0+CiAgICAgICAgICAgICAgICAgICAgbmV3IFVSTCgKICAgICAgICAgICAgICAgICAgICAgICAgaW1nLmdldEF0dHJpYnV0ZSgiZGF0YS1zcmMiKSB8fCBpbWcuc3JjLAogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luCiAgICAgICAgICAgICAgICAgICAgKS5ocmVmCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGltZ3MgPSBbLi4ubmV3IFNldChpbWdzKV07CiAgICAgICAgICAgIGluamVjdEltYWdlRG93bmxvYWRCdXR0b24oCiAgICAgICAgICAgICAgICBidXR0b25zRGl2LAogICAgICAgICAgICAgICAgaW1ncywKICAgICAgICAgICAgICAgIGdldFByZWZpeEZyb21BcnRpY2xlKGFydGljbGUpCiAgICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gaW5qZWN0RkNHYWxsZXJ5QnV0dG9uKCkgewogICAgICAgIHZhciBnYWxsZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnAtZ2FsbGVyeV9kZXRhaWwiKTsKICAgICAgICBpZiAoIWdhbGxlcnkpIHJldHVybjsKICAgICAgICB2YXIgaW1ncyA9IEFycmF5LmZyb20oZ2FsbGVyeS5xdWVyeVNlbGVjdG9yQWxsKCIudGh1bWJuYWlsIGltZyIpKQogICAgICAgICAgICAuZmlsdGVyKChpbWcpID0+ICFpbWcuc3JjLmluY2x1ZGVzKCJwaG90b0NvdmVyLnBuZyIpKQogICAgICAgICAgICAubWFwKChpbWcpID0+IG5ldyBVUkwoaW1nLnNyYywgd2luZG93LmxvY2F0aW9uLm9yaWdpbikuaHJlZik7CiAgICAgICAgaW1ncyA9IFsuLi5uZXcgU2V0KGltZ3MpXTsKICAgICAgICB2YXIgYnV0dG9uc0RpdiA9IGdldEJ1dHRvbkRpdigpOwogICAgICAgIGdhbGxlcnkuaW5zZXJ0QmVmb3JlKGJ1dHRvbnNEaXYsIGdhbGxlcnkuZmlyc3RDaGlsZCk7CiAgICAgICAgaW5qZWN0SW1hZ2VEb3dubG9hZEJ1dHRvbihidXR0b25zRGl2LCBpbWdzLCBnZXRQcmVmaXhGcm9tQXJ0aWNsZShnYWxsZXJ5KSk7CiAgICB9CgogICAgZnVuY3Rpb24gaW5qZWN0SW1hZ2VEb3dubG9hZEJ1dHRvbihlbGVtZW50LCBpbWdzLCBwcmVmaXgsIGluZml4ID0gdHJ1ZSkgewogICAgICAgIGlmIChpc01vYmlsZSgpKSB7CiAgICAgICAgICAgIC8vIOaJi+acuueUqOWbvueJh+mTvuaOpeeUn+aIkOaMiemSrgogICAgICAgICAgICBpbmplY3RPbmVCdXR0b24oCiAgICAgICAgICAgICAgICBlbGVtZW50LAogICAgICAgICAgICAgICAgIueUn+aIkOWbvueJh+mTvuaOpSgiICsgaW1ncy5sZW5ndGggKyAiKSIsCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVPbkNsaWNrSGFuZGxlcihlbGVtZW50LCBpbWdzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDlm77niYfkuIvovb3mjInpkq4KICAgICAgICAgICAgaW5qZWN0T25lQnV0dG9uKAogICAgICAgICAgICAgICAgZWxlbWVudCwKICAgICAgICAgICAgICAgIChpbmZpeCA/ICLkuIvovb3miYDmnInlm77niYcgKCIgOiAi5LiL6L295Zu+54mHICgiKSArIGltZ3MubGVuZ3RoICsgIikiLAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkSW1hZ2VzKGltZ3MsIHByZWZpeCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdE9uZUJ1dHRvbihlbGVtZW50LCB0ZXh0T25CdXR0b24sIGNsaWNrTGlzdGVuZXIpIHsKICAgICAgICB2YXIgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiQlVUVE9OIik7CiAgICAgICAgdmFyIGJ0blRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0T25CdXR0b24pOwogICAgICAgIGJ0bi5hcHBlbmRDaGlsZChidG5UZXh0KTsKICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBjbGlja0xpc3RlbmVyKTsKICAgICAgICBidG4uc3R5bGUgPQogICAgICAgICAgICAiYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlcjogc29saWQgIzgwODA4MCAycHg7IGJvcmRlci1yYWRpdXM6IDIwcHg7IGNvbG9yOiAjNTQ1NDU0OyBtYXJnaW46IDAuMmVtOyI7CiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChidG4pOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJ1dHRvbkRpdigpIHsKICAgICAgICB2YXIgYnV0dG9uc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIGJ1dHRvbnNEaXYuY2xhc3NOYW1lID0gImxkaC1tby1kbCI7CiAgICAgICAgYnV0dG9uc0Rpdi5zdHlsZSA9ICJtYXJnaW4tdG9wOiAwLjRlbTsgbWFyZ2luLWJvdHRvbTogMC40ZW0iOwogICAgICAgIHJldHVybiBidXR0b25zRGl2OwogICAgfQoKICAgIGZ1bmN0aW9uIGdlbmVyYXRlT25DbGlja0hhbmRsZXIoYnV0dG9uc0RpdiwgaW1ncykgewogICAgICAgIHZhciB0ZXh0YXJlYSA9IGJ1dHRvbnNEaXYucXVlcnlTZWxlY3RvcigidGV4dGFyZWEubGRoLW1vLWRsIik7CiAgICAgICAgaWYgKCF0ZXh0YXJlYSkgewogICAgICAgICAgICB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIik7CiAgICAgICAgICAgIHRleHRhcmVhLmNsYXNzTmFtZSA9ICJsZGgtbW8tZGwiOwogICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZSA9ICJoZWlnaHQ6IDEwMHB4OyB3aWR0aDogODAlOyI7CiAgICAgICAgICAgIHZhciBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7CiAgICAgICAgICAgIGJ1dHRvbnNEaXYuaW5zZXJ0QmVmb3JlKGJyLCBidXR0b25zRGl2LmZpcnN0Q2hpbGQpOwogICAgICAgICAgICBidXR0b25zRGl2Lmluc2VydEJlZm9yZSh0ZXh0YXJlYSwgYnV0dG9uc0Rpdi5maXJzdENoaWxkKTsKICAgICAgICB9CiAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBpbWdzLmpvaW4oIlxuIik7CiAgICAgICAgdGV4dGFyZWEuc2VsZWN0KCk7CiAgICB9CgogICAgZnVuY3Rpb24gY3VzdG9taXplZFRpbWVsaW5lUGFnZSgpIHsKICAgICAgICAvLyDliJ3lp4vljJYKICAgICAgICBkb2N1bWVudAogICAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgibGRoLWluZmluaXRlLXNjcm9sbCBhcnRpY2xlIikKICAgICAgICAgICAgLmZvckVhY2goKGFydGljbGUpID0+IGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShhcnRpY2xlKSk7CiAgICAgICAgZG9jdW1lbnQKICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoImxkaC1pbmZpbml0ZS1zY3JvbGwgbGRoLWltYWdlZGlhcnktdGltZWxpbmUtbGlzdC1pdGVtIikKICAgICAgICAgICAgLmZvckVhY2goKGFydGljbGUpID0+IGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShhcnRpY2xlKSk7CiAgICAgICAgY29uc3QgaW5maW5pdGVTY3JvbGxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAogICAgICAgICAgICAibGRoLWluZmluaXRlLXNjcm9sbCIKICAgICAgICApOwogICAgICAgIGNvbnN0IGNvbmZpZyA9IHsgY2hpbGRMaXN0OiB0cnVlIH07CiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zLCBvYnNlcnZlcikgewogICAgICAgICAgICB2YXIgbm9kZXMgPSBtdXRhdGlvbnMuZmluZCgocikgPT4KICAgICAgICAgICAgICAgIEFycmF5LmZyb20oci5hZGRlZE5vZGVzKS5maWx0ZXIoCiAgICAgICAgICAgICAgICAgICAgKG4pID0+CiAgICAgICAgICAgICAgICAgICAgICAgIG4uY2xhc3NOYW1lID09ICJhcnRpY2xlIiB8fAogICAgICAgICAgICAgICAgICAgICAgICBuLmNsYXNzTmFtZSA9PSAibGRoLWltYWdlZGlhcnktdGltZWxpbmUtbGlzdC1pdGVtIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApLmFkZGVkTm9kZXM7CiAgICAgICAgICAgIG5vZGVzLmZvckVhY2goKG5vZGUpID0+CiAgICAgICAgICAgICAgICBhdHRhY2hCdXR0b25Ub0FydGljbGUoCiAgICAgICAgICAgICAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yKCJhcnRpY2xlIikgfHwKICAgICAgICAgICAgICAgICAgICBub2RlLnF1ZXJ5U2VsZWN0b3IoImxkaC1pbWFnZWRpYXJ5LXRpbWVsaW5lLWxpc3QtaXRlbSIpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJlbW92ZVByb3RlY3RJbWcoKTsKICAgICAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcoIuino+mZpOWIt+aWsOWQjuaXtumXtOe6v+WPs+mUrumZkOWItiIpOwogICAgICAgIH0pOwogICAgICAgIG9ic2VydmVyLm9ic2VydmUoaW5maW5pdGVTY3JvbGxDb250YWluZXIsIGNvbmZpZyk7CiAgICAgICAgbW9Eb3dubG9hZGVyTG9nKCJUaW1lbGluZemhtemdouazqOWFpeaMiemSriIpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gPSAgICBEb3dubG9hZCBVdGlscyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiBkb3dubG9hZEltYWdlcyhpbWdzLCBwcmVmaXggPSAiIikgewogICAgICAgIG1vRG93bmxvYWRlckRlYnVnKCLmraPlnKjkuIvovb3lm77niYfvvJogIiArIGltZ3MpOwogICAgICAgIC8vIFRoYW5rcyB0byBodHRwczovL2dpdGh1Yi5jb20veTI1MjMyOC9JbnN0YWdyYW1fRG93bmxvYWRfQnV0dG9uCiAgICAgICAgaWYgKGltZ3MubGVuZ3RoIDw9IDEwKSB7CiAgICAgICAgICAgIC8vIOWQjOaXtuacgOWkmuS4i+i9veWNgeW8oOWbvgogICAgICAgICAgICBpbWdzLmZvckVhY2goKGltZywgaW5kZXgpID0+CiAgICAgICAgICAgICAgICBkb3dubG9hZE9uZUltYWdlKGltZywgYXBwZW5kSW5kZXhUb1ByZWZpeChwcmVmaXgsIGluZGV4KSkKICAgICAgICAgICAgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDorr7nva7lu7bml7bkuIvovb3mm7TlpJrlm77niYcgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTYyNDQ5MDIvNTYyNDU2MTAjNTYyNDU2MTAKICAgICAgICAgICAgaW1ncy5mb3JFYWNoKChpbWcsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZE9uZUltYWdlKGltZywgYXBwZW5kSW5kZXhUb1ByZWZpeChwcmVmaXgsIGluZGV4KSk7CiAgICAgICAgICAgICAgICB9LCBpbmRleCAqIDIwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhcHBlbmRJbmRleFRvUHJlZml4KHByZWZpeCwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBwcmVmaXggKwogICAgICAgICAgICAoaW5kZXggKyAxKS50b0xvY2FsZVN0cmluZygiZW4tVVMiLCB7CiAgICAgICAgICAgICAgICBtaW5pbXVtSW50ZWdlckRpZ2l0czogMywKICAgICAgICAgICAgICAgIHVzZUdyb3VwaW5nOiBmYWxzZSwKICAgICAgICAgICAgfSkgKwogICAgICAgICAgICAiXyIKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvd25sb2FkT25lSW1hZ2UoaW1nLCBwcmVmaXggPSAiIikgewogICAgICAgIGZldGNoKGltZywgewogICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7CiAgICAgICAgICAgICAgICBPcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBtb2RlOiAiY29ycyIsCiAgICAgICAgICAgIGNhY2hlOiAibm8tY2FjaGUiLAogICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYmxvYigpKQogICAgICAgICAgICAudGhlbigoYmxvYikgPT4KICAgICAgICAgICAgICAgIGRvd2xvYWRCbG9iKAogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpLAogICAgICAgICAgICAgICAgICAgIHByZWZpeCArIGltZy5zdWJzdHJpbmcoaW1nLmxhc3RJbmRleE9mKCIvIikgKyAxKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gbW9Eb3dubG9hZGVyRXJyb3IoZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvd25sb2FkVmlkZW8oYnV0dG9uLCB2aWRlbywgcHJlZml4ID0gIiIpIHsKICAgICAgICBjb25zdCB2aWRlb1JlcXVlc3RVUkwgPQogICAgICAgICAgICAiaHR0cHM6Ly9wcm9kdWN0aW9uLXBzLmx2cC5sbG53Lm5ldC9yL1BsYXlsaXN0U2VydmljZS9tZWRpYS88bWVkaWFJZD4vZ2V0TW9iaWxlUGxheWxpc3RCeU1lZGlhSWQiOwogICAgICAgIGZldGNoKHZpZGVvUmVxdWVzdFVSTC5yZXBsYWNlKCI8bWVkaWFJZD4iLCB2aWRlbyksIHsKICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoewogICAgICAgICAgICAgICAgT3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgICAgICAgICAgUmVmZXJlcjogd2luZG93LmxvY2F0aW9uLm9yaWdpbiwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIG1vZGU6ICJjb3JzIiwKICAgICAgICAgICAgY2FjaGU6ICJuby1jYWNoZSIsCiAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgLy8g5Li7bTN1OAogICAgICAgICAgICAgICAgbGV0IG0zdThVcmwgPSByZXNwb25zZS5tZWRpYUxpc3RbMF0ubW9iaWxlVXJscwogICAgICAgICAgICAgICAgICAgIC5maW5kKCh2KSA9PiB2LnRhcmdldE1lZGlhUGxhdGZvcm0gPT0gIkh0dHBMaXZlU3RyZWFtaW5nIikKICAgICAgICAgICAgICAgICAgICAubW9iaWxlVXJsLnJlcGxhY2UoImh0dHA6Ly8iLCAiaHR0cHM6Ly8iKTsKICAgICAgICAgICAgICAgIGZldGNoKG0zdThVcmwpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS50ZXh0KCkpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPlm0zdTjkuK3mnIDpq5jmuIXnmoQKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFuZHdpdGhSZSA9IC9CQU5EV0lEVEg9KFxkKykvaTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsaWdpYmxlU3RyZWFtc1JhdyA9IHJlc3BvbnNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoIiNFWFQtWC1TVFJFQU0tSU5GOiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWdpYmxlU3RyZWFtc1Jhdy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGIubWF0Y2goYmFuZHdpdGhSZSlbMV0pIC0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChhLm1hdGNoKGJhbmR3aXRoUmUpWzFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSBlbGlnaWJsZVN0cmVhbXNSYXdbMF0uc3BsaXQoIlxuIilbMV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVVJMKGNhbmRpZGF0ZSwgbmV3IFVSTChtM3U4VXJsKS5vcmlnaW4pLmhyZWY7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAudGhlbigobTN1OFVybCkgPT4KICAgICAgICAgICAgICAgICAgICAgICAgb3Blbk0zVThUb29sQm94KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbTN1OFVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCArIGdldEZpbGVuYW1lRnJvbVZpZGVvVXJsKG0zdThVcmwpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBkb3dsb2FkQmxvYihibG9iLCBmaWxlbmFtZSkgewogICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgICAgICBhLmhyZWYgPSBibG9iOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgYS5jbGljaygpOwogICAgICAgIGEucmVtb3ZlKCk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT0KICAgIC8vID0gICAgTTNVOCBVdGlscyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PQoKICAgIGZ1bmN0aW9uIG9wZW5NM1U4VG9vbEJveChidXR0b24sIG0zdThVcmwsIGZpbGVuYW1lKSB7CiAgICAgICAgLy8g5omT5byAIGh0dHBzOi8vdG9vbHMudGhhdHdpbmQuY29tL3Rvb2wvbTN1OGRvd25sb2FkZXIKICAgICAgICBpZiAoaXNNb2JpbGUoKSkgewogICAgICAgICAgICBsZXQgaWQgPSBidG9hKGVuY29kZVVSSUNvbXBvbmVudChmaWxlbmFtZSkpOwogICAgICAgICAgICB2YXIgYSA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoImEubW8tZG93bmxvYWRlciIpOwogICAgICAgICAgICBpZiAoIWEpIHsKICAgICAgICAgICAgICAgIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAgICAgICB2YXIgYVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgi54K55Ye75omT5byA5LiL6L296aG16Z2iIik7CiAgICAgICAgICAgICAgICBhLmNsYXNzTmFtZSA9ICJtby1kb3dubG9hZGVyIjsKICAgICAgICAgICAgICAgIGEuYXBwZW5kKGFUZXh0KTsKICAgICAgICAgICAgICAgIGEudGFyZ2V0ID0gIl9ibGFuayI7CiAgICAgICAgICAgICAgICBhLmhyZWYgPSBjb25zdHJ1Y3RNM1U4VG9vbEJveFVSTChtM3U4VXJsLCBmaWxlbmFtZSk7CiAgICAgICAgICAgICAgICBidXR0b24ucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpKTsKICAgICAgICAgICAgICAgIGJ1dHRvbi5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgYS50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgICAgICAgYS5ocmVmID0gY29uc3RydWN0TTNVOFRvb2xCb3hVUkwobTN1OFVybCwgZmlsZW5hbWUpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnN0cnVjdE0zVThUb29sQm94VVJMKG0zdThVcmwsIGZpbGVuYW1lKSB7CiAgICAgICAgdmFyIHVybCA9CiAgICAgICAgICAgICJodHRwczovL3Rvb2xzLnRoYXR3aW5kLmNvbS90b29sL20zdThkb3dubG9hZGVyIyIgKwogICAgICAgICAgICAibTN1OD0iICsKICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KG0zdThVcmwpICsKICAgICAgICAgICAgIiZyZWZlcmVyPSIgKwogICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpICsKICAgICAgICAgICAgIiZmaWxlbmFtZT0iICsKICAgICAgICAgICAgZmlsZW5hbWU7CiAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcodXJsKTsKICAgICAgICByZXR1cm4gdXJsOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vID0gICAgTmFtaW5nIFV0aWxzICAgID0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiBnZXRQcmVmaXhGcm9tQXJ0aWNsZShhcnRpY2xlKSB7CiAgICAgICAgdmFyIGNhbmRpZGF0ZSA9CiAgICAgICAgICAgIGFydGljbGUucXVlcnlTZWxlY3RvcigiLmFydGljbGVfX2hlYWQiKSB8fAogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5hcnRpY2xlX19oZWFkZXIiKSB8fAogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5wLWRldGFpbF9hcnRpY2xlX19oZWFkZXItdGV4dCIpIHx8CiAgICAgICAgICAgIGFydGljbGUucXVlcnlTZWxlY3RvcigiLnAtZ2FsbGVyeV9kZXRhaWxfX2hlYWRlciIpOwogICAgICAgIGlmIChjYW5kaWRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIHNhbml0aXplRmlsZU5hbWUoY2FuZGlkYXRlLnRleHRDb250ZW50KSArICJfIjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGdldFByZWZpeEZyb21Eb2N1bWVudCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByZWZpeEZyb21Eb2N1bWVudCgpIHsKICAgICAgICAvLyDlpoLmnpzlrZjlnKjvvIzkvb/nlKhtb3ZpZeagh+mimAogICAgICAgIHZhciBjYW5kaWRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubW92aWUtdGl0bGUtYmxvY2siKTsKICAgICAgICBpZiAoY2FuZGlkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiBzYW5pdGl6ZUZpbGVOYW1lKGNhbmRpZGF0ZS50ZXh0Q29udGVudCkgKyAiXyI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzYW5pdGl6ZUZpbGVOYW1lKGRvY3VtZW50LnRpdGxlLnNwbGl0KCJ8IilbMF0gKyAiXyIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEZpbGVuYW1lRnJvbVZpZGVvVXJsKHVybCkgewogICAgICAgIGxldCB0ZW1wTmFtZSA9IHVybC5yZXBsYWNlKCIvcm9vdC1tZXNzYWdlLWN4Zi1hcGFjaGUiLCAiIik7CiAgICAgICAgdGVtcE5hbWUgPSB0ZW1wTmFtZQogICAgICAgICAgICAuc3Vic3RyaW5nKHRlbXBOYW1lLmxhc3RJbmRleE9mKCIvIikgKyAxKQogICAgICAgICAgICAucmVwbGFjZSgiLm0zdTgiLCAiLnRzIik7CiAgICAgICAgcmV0dXJuIHRlbXBOYW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhbml0aXplRmlsZU5hbWUoaW5wdXQsIHJlcGxhY2VtZW50ID0gIl8iKSB7CiAgICAgICAgLy8gVGhhbmtzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXJzaGFwL25vZGUtc2FuaXRpemUtZmlsZW5hbWUvYmxvYi9tYXN0ZXIvaW5kZXguanMKICAgICAgICBjb25zdCBpbGxlZ2FsUmUgPSAvW1wvXD88PlxcOlwqXHwiXS9nOwogICAgICAgIGNvbnN0IGNvbnRyb2xSZSA9IC9bXHgwMC1ceDFmXHg4MC1ceDlmXS9nOwogICAgICAgIGNvbnN0IHJlc2VydmVkUmUgPSAvXlwuKyQvOwogICAgICAgIGNvbnN0IHdpbmRvd3NSZXNlcnZlZFJlID0gL14oY29ufHBybnxhdXh8bnVsfGNvbVswLTldfGxwdFswLTldKShcLi4qKT8kL2k7CiAgICAgICAgY29uc3Qgd2luZG93c1RyYWlsaW5nUmUgPSAvW1wuIF0rJC87CiAgICAgICAgcmV0dXJuIGlucHV0CiAgICAgICAgICAgIC5zcGxpdCgvXHMvZykKICAgICAgICAgICAgLmZpbHRlcigocykgPT4gcykKICAgICAgICAgICAgLmpvaW4oIl8iKQogICAgICAgICAgICAucmVwbGFjZShpbGxlZ2FsUmUsIHJlcGxhY2VtZW50KQogICAgICAgICAgICAucmVwbGFjZShjb250cm9sUmUsIHJlcGxhY2VtZW50KQogICAgICAgICAgICAucmVwbGFjZShyZXNlcnZlZFJlLCByZXBsYWNlbWVudCkKICAgICAgICAgICAgLnJlcGxhY2Uod2luZG93c1Jlc2VydmVkUmUsIHJlcGxhY2VtZW50KQogICAgICAgICAgICAucmVwbGFjZSh3aW5kb3dzVHJhaWxpbmdSZSwgcmVwbGFjZW1lbnQpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIExvZ2dpbmcgVXRpbHMgICAgPQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiBtb0Rvd25sb2FkZXJMb2cobXNnKSB7CiAgICAgICAgY29uc29sZS5sb2coIlttby1kb3dubG9kZXJdICIgKyBtc2cpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1vRG93bmxvYWRlckRlYnVnKG1zZykgewogICAgICAgIGNvbnNvbGUuZGVidWcoIlttby1kb3dubG9kZXJdICIgKyBtc2cpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1vRG93bmxvYWRlckVycm9yKG1zZykgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIlttby1kb3dubG9kZXJdICIgKyBtc2cpOwogICAgfQp9KSgpOwo="
}