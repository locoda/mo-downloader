{
  "match": 0,
  "info": "mo\u4e0b\u8f7d\u5668",
  "regex": "m.tribe-m.jp@@m.ex-m.jp@@m.ldh-m.jp@@m.ldhgirls-m.jp",
  "runat": 0,
  "version": "0.26",
  "author": "\u4e59\u919a",
  "name": "mo\u4e0b\u8f7d\u5668",
  "code": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICAgbW8gKExESCkg5LiL6L295ZmoCi8vIEBuYW1lc3BhY2UgICAgICAgICAgIGh0dHBzOi8vMW1ldGhlci5tZS8KLy8gQHZlcnNpb24gICAgICAgICAgICAgMC4yNgovLyBAZGVzY3JpcHRpb24gICAgICAgICDlnKhtb+eahOWGheWuuemhteWinuWKoOWbvueJh+WSjOinhumikeS4i+i9veeahOaMiemSru+8jCDop6PplIHlj7PplK7lip/og70KLy8gQGF1dGhvciAgICAgICAgICAgICAg5LmZ6YaaKEBsb2NvZGEpCi8vIEBtYXRjaCAgICAgICAgICAgICAgIGh0dHAqOi8vbS50cmliZS1tLmpwLyoKLy8gQG1hdGNoICAgICAgICAgICAgICAgaHR0cCo6Ly9tLmV4LW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoLW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoZ2lybHMtbS5qcC8qCi8vIEBpY29uICAgICAgICAgICAgICAgIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vczIvZmF2aWNvbnM/c3o9NjQmZG9tYWluPWxkaC5jby5qcAovLyBAc291cmNlICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vbG9jb2RhL21vLWRvd25sb2FkZXIKLy8gQHVwZGF0ZVVSTCAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2xvY29kYS9tby1kb3dubG9hZGVyL3Jhdy9tYWluL21vLWRvd25sb2Rlci51c2VyLmpzCi8vIEBkb3dubG9hZFVSTCAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9sb2NvZGEvbW8tZG93bmxvYWRlci9yYXcvbWFpbi9tby1kb3dubG9kZXIudXNlci5qcwovLyBAbGljZW5zZSAgICAgICAgICAgICBNSVQKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24gKCkgewogICAgInVzZSBzdHJpY3QiOwogICAgLy8g5Yig6Zmk5Zu+54mH5L+d5oqkCiAgICByZW1vdmVQcm90ZWN0SW1nKCk7CiAgICAvLyDlnKjor6bmg4XpobXms6jlhaXmjInpkq4KICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygiZGV0YWlsIikpIHsKICAgICAgICBpbmplY3REb3dubG9hZEFsbEJ1dHRvbnMoKTsKICAgIH0KICAgIC8vIOagueaNruinhumikeazqOWFpeaMiemSrgogICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCJtb3ZpZSIpKSB7CiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdi5saW1lbGlnaHQtcGxheWVyIikpIHsKICAgICAgICAgICAgaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbihkb2N1bWVudCk7CiAgICAgICAgfQogICAgfQogICAgLy8g5Zyo5pe26Ze06L2055WM6Z2i6K6+572uTGlzdGVuZXIKICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygidGltZWxpbmUiKSkgewogICAgICAgIC8vIOetieW+heWKoOi9vXNjcm9sbAogICAgICAgIChmdW5jdGlvbiBpbml0KCkgewogICAgICAgICAgICB2YXIgY291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImxkaC1pbmZpbml0ZS1zY3JvbGwiKTsKICAgICAgICAgICAgaWYgKGNvdW50ZXIpIHsKICAgICAgICAgICAgICAgIGN1c3RvbWl6ZWRUaW1lbGluZVBhZ2UoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoaW5pdCwgMzAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0pKCk7CiAgICB9Cn0pKCk7CgpmdW5jdGlvbiByZW1vdmVQcm90ZWN0SW1nKCkgewogICAgLy8g56e76Zmk5Y+z6ZSu6ZmQ5Yi2CiAgICBkb2N1bWVudC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfTsKICAgIC8vIOenu+mZpHByb3RlY3RpbWfpmZDliLYKICAgIGRvY3VtZW50CiAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoIi5wcm90ZWN0aW1nIikKICAgICAgICAuZm9yRWFjaCgobm9kZSkgPT4gbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCJwcm90ZWN0aW1nIikpOwogICAgbW9Eb3dubG9hZGVyTG9nKCLnp7vpmaTlj7PplK7pmZDliLYiKTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gPSAgICBCdXR0b24gSW5qZWN0aW9uIFV0aWxzICAgID0KLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmZ1bmN0aW9uIGluamVjdERvd25sb2FkQWxsQnV0dG9ucygpIHsKICAgIHZhciBhcnRpY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYXJ0aWNsZSIpOwogICAgaWYgKGFydGljbGUuY2xhc3NMaXN0LmNvbnRhaW5zKCJhcnRpY2xlLS1uZXdzIikpIHsKICAgICAgICAvLyDmlrDpl7vpobXpnaLnibnmrorlpITnkIYKICAgICAgICBhcnRpY2xlID0gYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCIuYXJ0aWNsZV9fYm9keSIpOwogICAgfQogICAgYXR0YWNoQnV0dG9uVG9BcnRpY2xlKGFydGljbGUpOwp9CgpmdW5jdGlvbiBmaW5kRWxpZ2libGVJbWdzKGFydGljbGUpIHsKICAgIGNvbnN0IGtleXdvcmRzID0gWyJ1cGxjbW4iLCAidXBsb2FkIl07CiAgICByZXR1cm4gQXJyYXkuZnJvbShhcnRpY2xlLnF1ZXJ5U2VsZWN0b3JBbGwoImltZyIpKQogICAgICAgIC5tYXAoKGltZykgPT4gaW1nLnNyYykKICAgICAgICAuZmlsdGVyKChpbWcpID0+IGtleXdvcmRzLnNvbWUoKGspID0+IGltZy5pbmNsdWRlcyhrKSkpOwp9CgpmdW5jdGlvbiBhdHRhY2hCdXR0b25Ub0FydGljbGUoYXJ0aWNsZSkgewogICAgdmFyIGltZ3MgPSBmaW5kRWxpZ2libGVJbWdzKGFydGljbGUpOwogICAgLy8g5rOo5YWl5oyJ6ZKuIGRpdgogICAgdmFyIGJ1dHRvbnNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGJ1dHRvbnNEaXYuY2xhc3NOYW1lID0gImxkaC1tby1kbCI7CiAgICBidXR0b25zRGl2LnN0eWxlID0gIm1hcmdpbi10b3A6IDAuNGVtOyBtYXJnaW4tYm90dG9tOiAwLjRlbTsiOwogICAgYXJ0aWNsZS5pbnNlcnRCZWZvcmUoYnV0dG9uc0RpdiwgYXJ0aWNsZS5maXJzdENoaWxkKTsKICAgIC8vIOWbvueJh+mTvuaOpeeUn+aIkOaMiemSrgogICAgY29uc3QgaXNNb2JpbGUgPSAoKSA9PgogICAgICAgIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdCgKICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudAogICAgICAgICk7CiAgICBpZiAoaXNNb2JpbGUoKSkgewogICAgICAgIGluamVjdE9uZUJ1dHRvbihidXR0b25zRGl2LCAi55Sf5oiQ5Zu+54mH6ZO+5o6lIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBnZW5lcmF0ZU9uQ2xpY2tIYW5kbGVyKGJ1dHRvbnNEaXYsIGFydGljbGUpOwogICAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgICAvLyDlm77niYfkuIvovb3mjInpkq4KICAgICAgICBpbmplY3RPbmVCdXR0b24oCiAgICAgICAgICAgIGJ1dHRvbnNEaXYsCiAgICAgICAgICAgICLkuIvovb3miYDmnInlm77niYcgKCIgKyBpbWdzLmxlbmd0aCArICIpIiwKICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZG93bmxvYWRPbkNsaWNrSGFuZGxlcihhcnRpY2xlKTsKICAgICAgICAgICAgfQogICAgICAgICk7CiAgICB9CiAgICAvLyDop4bpopHkuIvovb3mjInpkq4KICAgIGlmICgKICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoImRpdi5saW1lbGlnaHQtcGxheWVyIikgfHwKICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoImEucG9wdXBfbGluayIpCiAgICApIHsKICAgICAgICAvLyBpbmplY3RPbmVCdXR0b24oYnV0dG9uc0RpdiwgIuS4i+i9veaJgOacieinhumikSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyAgICAgZG93bmxvYWRWaWRlb09uQ2xpY2tIYW5kbGVyKGFydGljbGUpOwogICAgICAgIC8vIH0pOwogICAgICAgIC8vIExpc3QgVmlldyDop4bpopEKICAgICAgICBpbmplY3RQZXJWaWRlb0Rvd25sb2FkQnV0dG9uKGFydGljbGUpOwogICAgICAgIC8vIFRpbWVsaW5lIOinhumikQogICAgICAgIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b25Gb3JUaW1lbGluZShhcnRpY2xlKTsKICAgIH0KICAgIG1vRG93bmxvYWRlckxvZygi5rOo5YWl5oyJ6ZKuIik7Cn0KCmZ1bmN0aW9uIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b24oZGl2KSB7CiAgICBkaXYucXVlcnlTZWxlY3RvckFsbCgiZGl2LmxpbWVsaWdodC1wbGF5ZXIiKS5mb3JFYWNoKCh2aWRlb0RpdikgPT4gewogICAgICAgIHZhciBtZWRpYUlkID0gdmlkZW9EaXYuaWQuc3Vic3RyaW5nKHZpZGVvRGl2LmlkLmxhc3RJbmRleE9mKCJfIikgKyAxKTsKICAgICAgICBtb0Rvd25sb2FkZXJEZWJ1Zygi5q2j5Zyo5LiL6L296KeG6aKR77yaICIgKyBtZWRpYUlkKTsKICAgICAgICBpbmplY3RPbmVCdXR0b24odmlkZW9EaXYucGFyZW50RWxlbWVudCwgIuS4i+i9veinhumikSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZG93bmxvYWRWaWRlbygKICAgICAgICAgICAgICAgIG1lZGlhSWQsCiAgICAgICAgICAgICAgICBnZXRQcmVmaXhGcm9tQXJ0aWNsZShkaXYpIHx8IGdldFByZWZpeEZyb21Eb2N1bWVudCgpCiAgICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9KTsKfQoKZnVuY3Rpb24gaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbkZvclRpbWVsaW5lKGRpdikgewogICAgZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoImEucG9wdXBfbGluayIpLmZvckVhY2goKHZpZGVvRGl2KSA9PiB7CiAgICAgICAgdmFyIG1lZGlhSWQgPSB2aWRlb0RpdgogICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCJvbmNsaWNrIikKICAgICAgICAgICAgLnNwbGl0KCJtb3ZpZS8iKVsxXQogICAgICAgICAgICAuc3BsaXQoIi8iKVswXTsKICAgICAgICBtb0Rvd25sb2FkZXJEZWJ1Zygi5q2j5Zyo5LiL6L296KeG6aKR77yaICIgKyBtZWRpYUlkKTsKICAgICAgICBpbmplY3RPbmVCdXR0b24odmlkZW9EaXYucGFyZW50RWxlbWVudCwgIuS4i+i9veinhumikSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZG93bmxvYWRWaWRlbygKICAgICAgICAgICAgICAgIG1lZGlhSWQsCiAgICAgICAgICAgICAgICBnZXRQcmVmaXhGcm9tQXJ0aWNsZShkaXYpIHx8IGdldFByZWZpeEZyb21Eb2N1bWVudCgpCiAgICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9KTsKfQoKZnVuY3Rpb24gaW5qZWN0T25lQnV0dG9uKGVsZW1lbnQsIHRleHRPbkJ1dHRvbiwgY2xpY2tMaXN0ZW5lcikgewogICAgdmFyIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIkJVVFRPTiIpOwogICAgdmFyIGJ0blRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0T25CdXR0b24pOwogICAgYnRuLmFwcGVuZENoaWxkKGJ0blRleHQpOwogICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgY2xpY2tMaXN0ZW5lcik7CiAgICBidG4uc3R5bGUgPQogICAgICAgICJiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsgYm9yZGVyOiBzb2xpZCAjODA4MDgwIDJweDsgYm9yZGVyLXJhZGl1czogMjBweDsgY29sb3I6ICM1NDU0NTQ7IG1hcmdpbjogMC4yZW0iOwogICAgZWxlbWVudC5hcHBlbmRDaGlsZChidG4pOwp9CgpmdW5jdGlvbiBkb3dubG9hZE9uQ2xpY2tIYW5kbGVyKGFydGljbGUpIHsKICAgIGRvd25sb2FkSW1hZ2VzKGZpbmRFbGlnaWJsZUltZ3MoYXJ0aWNsZSksIGdldFByZWZpeEZyb21BcnRpY2xlKGFydGljbGUpKTsKfQoKZnVuY3Rpb24gZ2VuZXJhdGVPbkNsaWNrSGFuZGxlcihidXR0b25zRGl2LCBhcnRpY2xlKSB7CiAgICB2YXIgaW1ncyA9IGZpbmRFbGlnaWJsZUltZ3MoYXJ0aWNsZSk7CiAgICB2YXIgdGV4dGFyZWEgPSBidXR0b25zRGl2LnF1ZXJ5U2VsZWN0b3IoInRleHRhcmVhLmxkaC1tby1kbCIpOwogICAgaWYgKCF0ZXh0YXJlYSkgewogICAgICAgIHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGV4dGFyZWEiKTsKICAgICAgICB0ZXh0YXJlYS5jbGFzc05hbWUgPSAibGRoLW1vLWRsIjsKICAgICAgICB0ZXh0YXJlYS5zdHlsZSA9ICJoZWlnaHQ6IDEwMHB4OyB3aWR0aDogODAlOyI7CiAgICAgICAgdmFyIGJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKTsKICAgICAgICBidXR0b25zRGl2Lmluc2VydEJlZm9yZShiciwgYnV0dG9uc0Rpdi5maXJzdENoaWxkKTsKICAgICAgICBidXR0b25zRGl2Lmluc2VydEJlZm9yZSh0ZXh0YXJlYSwgYnV0dG9uc0Rpdi5maXJzdENoaWxkKTsKICAgIH0KICAgIHRleHRhcmVhLnZhbHVlID0gaW1ncy5qb2luKCJcbiIpOwogICAgdGV4dGFyZWEuc2VsZWN0KCk7Cn0KCmZ1bmN0aW9uIGRvd25sb2FkVmlkZW9PbkNsaWNrSGFuZGxlcihhcnRpY2xlKSB7CiAgICB2YXIgZWxlbXMgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3JBbGwoInNjcmlwdCIpOwogICAgdmFyIHZpZGVvcyA9IEFycmF5LmZyb20oZWxlbXMpCiAgICAgICAgLmZpbHRlcigKICAgICAgICAgICAgKHYpID0+CiAgICAgICAgICAgICAgICB2LnRleHRDb250ZW50LmluY2x1ZGVzKCJtZWRpYUlkIikgJiYKICAgICAgICAgICAgICAgICF2LnRleHRDb250ZW50LmluY2x1ZGVzKCJibG9nVGFsa0RhdGEiKQogICAgICAgICkKICAgICAgICAubWFwKAogICAgICAgICAgICAodikgPT4KICAgICAgICAgICAgICAgIEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgICAgICAgdi50ZXh0Q29udGVudC5zdWJzdHJpbmcoCiAgICAgICAgICAgICAgICAgICAgICAgIHYudGV4dENvbnRlbnQuaW5kZXhPZigiKCIpICsgMSwKICAgICAgICAgICAgICAgICAgICAgICAgdi50ZXh0Q29udGVudC5sYXN0SW5kZXhPZigiKSIpCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKS5tZWRpYUlkCiAgICAgICAgKTsKCiAgICB2aWRlb3MubWFwKCh2aWRlbykgPT4gZG93bmxvYWRWaWRlbyh2aWRlbywgZ2V0UHJlZml4RnJvbUFydGljbGUoYXJ0aWNsZSkpKTsKfQoKZnVuY3Rpb24gY3VzdG9taXplZFRpbWVsaW5lUGFnZSgpIHsKICAgIC8vIOWIneWni+WMlgogICAgZG9jdW1lbnQKICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgibGRoLWluZmluaXRlLXNjcm9sbCBhcnRpY2xlIikKICAgICAgICAuZm9yRWFjaCgoYXJ0aWNsZSkgPT4gYXR0YWNoQnV0dG9uVG9BcnRpY2xlKGFydGljbGUpKTsKICAgIC8vCiAgICBjb25zdCBpbmZpbml0ZVNjcm9sbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImxkaC1pbmZpbml0ZS1zY3JvbGwiKTsKICAgIGNvbnN0IGNvbmZpZyA9IHsgY2hpbGRMaXN0OiB0cnVlIH07CiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMsIG9ic2VydmVyKSB7CiAgICAgICAgdmFyIG5vZGVzID0gbXV0YXRpb25zLmZpbmQoKHIpID0+CiAgICAgICAgICAgIEFycmF5LmZyb20oci5hZGRlZE5vZGVzKS5maWx0ZXIoKG4pID0+IChuLmNsYXNzTmFtZSA9ICJhcnRpY2xlIikpCiAgICAgICAgKS5hZGRlZE5vZGVzOwogICAgICAgIG5vZGVzLmZvckVhY2goKG5vZGUpID0+CiAgICAgICAgICAgIGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShub2RlLnF1ZXJ5U2VsZWN0b3IoImFydGljbGUiKSkKICAgICAgICApOwogICAgICAgIHJlbW92ZVByb3RlY3RJbWcoKTsKICAgICAgICBtb0Rvd25sb2FkZXJEZWJ1Zygi5q2j5Zyo5Zu+54mH6KeG6aKR77yaICIpOwogICAgfSk7CiAgICBvYnNlcnZlci5vYnNlcnZlKGluZmluaXRlU2Nyb2xsQ29udGFpbmVyLCBjb25maWcpOwogICAgbW9Eb3dubG9hZGVyTG9nKCJUaW1lbGluZemhtemdouazqOWFpeaMiemSriIpOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT0KLy8gPSAgICBEb3dubG9hZCBVdGlscyAgICA9Ci8vID09PT09PT09PT09PT09PT09PT09PT09PQoKZnVuY3Rpb24gZG93bmxvYWRJbWFnZXMoaW1ncywgcHJlZml4ID0gIiIpIHsKICAgIG1vRG93bmxvYWRlckRlYnVnKCLmraPlnKjlm77niYfop4bpopHvvJogIiArIGltZ3MpOwogICAgLy8gVGhhbmtzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS95MjUyMzI4L0luc3RhZ3JhbV9Eb3dubG9hZF9CdXR0b24KICAgIGltZ3MubWFwKChpbWcpID0+CiAgICAgICAgZmV0Y2goaW1nLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHsKICAgICAgICAgICAgICAgIE9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbiwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIG1vZGU6ICJjb3JzIiwKICAgICAgICAgICAgY2FjaGU6ICJuby1jYWNoZSIsCiAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ibG9iKCkpCiAgICAgICAgICAgIC50aGVuKChibG9iKSA9PgogICAgICAgICAgICAgICAgZG93bG9hZEJsb2IoCiAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYiksCiAgICAgICAgICAgICAgICAgICAgcHJlZml4ICsgaW1nLnN1YnN0cmluZyhpbWcubGFzdEluZGV4T2YoIi8iKSArIDEpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICAgICAgLmNhdGNoKChlKSA9PiBjb25zb2xlLmVycm9yKGUpKQogICAgKTsKfQoKZnVuY3Rpb24gZG93bmxvYWRWaWRlbyh2aWRlbywgcHJlZml4ID0gIiIpIHsKICAgIGNvbnN0IHZpZGVvUmVxdWVzdFVSTCA9CiAgICAgICAgImh0dHBzOi8vcHJvZHVjdGlvbi1wcy5sdnAubGxudy5uZXQvci9QbGF5bGlzdFNlcnZpY2UvbWVkaWEvPG1lZGlhSWQ+L2dldE1vYmlsZVBsYXlsaXN0QnlNZWRpYUlkIjsKICAgIGZldGNoKHZpZGVvUmVxdWVzdFVSTC5yZXBsYWNlKCI8bWVkaWFJZD4iLCB2aWRlbyksIHsKICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7CiAgICAgICAgICAgIE9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbiwKICAgICAgICAgICAgUmVmZXJlcjogd2luZG93LmxvY2F0aW9uLm9yaWdpbiwKICAgICAgICB9KSwKICAgICAgICBtb2RlOiAiY29ycyIsCiAgICAgICAgY2FjaGU6ICJuby1jYWNoZSIsCiAgICB9KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKQogICAgICAgIC50aGVuKAogICAgICAgICAgICAocmVzcG9uc2UpID0+CiAgICAgICAgICAgICAgICByZXNwb25zZS5tZWRpYUxpc3RbMF0ubW9iaWxlVXJscy5maW5kKAogICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LnRhcmdldE1lZGlhUGxhdGZvcm0gPT0gIkh0dHBMaXZlU3RyZWFtaW5nIgogICAgICAgICAgICAgICAgKS5tb2JpbGVVcmwKICAgICAgICApCiAgICAgICAgLnRoZW4oKG0zdThVcmwpID0+IHsKICAgICAgICAgICAgbGV0IHRlbXBOYW1lID0gbTN1OFVybC5yZXBsYWNlKCIvcm9vdC1tZXNzYWdlLWN4Zi1hcGFjaGUiLCAiIik7CiAgICAgICAgICAgIHRlbXBOYW1lID0gdGVtcE5hbWUuc3Vic3RyaW5nKAogICAgICAgICAgICAgICAgdGVtcE5hbWUubGFzdEluZGV4T2YoIi8iKSArIDEsCiAgICAgICAgICAgICAgICB0ZW1wTmFtZS5sYXN0SW5kZXhPZigiLiIpCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG9wZW5NM1U4VG9vbEJveChtM3U4VXJsLCBwcmVmaXggKyB0ZW1wTmFtZSArICIubXA0Iik7CiAgICAgICAgfSk7Cn0KCmZ1bmN0aW9uIGRvd2xvYWRCbG9iKGJsb2IsIGZpbGVuYW1lKSB7CiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgIGEuaHJlZiA9IGJsb2I7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgYS5jbGljaygpOwogICAgYS5yZW1vdmUoKTsKfQoKZnVuY3Rpb24gb3Blbk0zVThUb29sQm94KG0zdThVcmwsIGZpbGVuYW1lKSB7CiAgICAvLyDmiZPlvIAgaHR0cHM6Ly90b29scy50aGF0d2luZC5jb20vdG9vbC9tM3U4ZG93bmxvYWRlcgogICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICBhLnRhcmdldCA9ICJfYmxhbmsiOwogICAgYS5ocmVmID0gY29uc3RydWN0TTNVOFRvb2xCb3hVUkwobTN1OFVybCwgZmlsZW5hbWUpOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgIGEuY2xpY2soKTsKICAgIGEucmVtb3ZlKCk7Cn0KCmZ1bmN0aW9uIGNvbnN0cnVjdE0zVThUb29sQm94VVJMKG0zdThVcmwsIGZpbGVuYW1lKSB7CiAgICB2YXIgdXJsID0KICAgICAgICAiaHR0cHM6Ly90b29scy50aGF0d2luZC5jb20vdG9vbC9tM3U4ZG93bmxvYWRlciMiICsKICAgICAgICAibTN1OD0iICsKICAgICAgICBlbmNvZGVVUklDb21wb25lbnQobTN1OFVybC5yZXBsYWNlKCJodHRwOi8vIiwgImh0dHBzOi8vIikpICsKICAgICAgICAiJnJlZmVyZXI9IiArCiAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSArCiAgICAgICAgIiZmaWxlbmFtZT0iICsKICAgICAgICBmaWxlbmFtZTsKICAgIG1vRG93bmxvYWRlckRlYnVnKHVybCk7CiAgICByZXR1cm4gdXJsOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09Ci8vID0gICAgTmFtaW5nIFV0aWxzICAgID0KLy8gPT09PT09PT09PT09PT09PT09PT09PQoKZnVuY3Rpb24gZ2V0UHJlZml4RnJvbUFydGljbGUoYXJ0aWNsZSkgewogICAgdmFyIGNhbmRpZGF0ZSA9CiAgICAgICAgYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCIuYXJ0aWNsZV9faGVhZCIpIHx8CiAgICAgICAgYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCIuYXJ0aWNsZV9faGVhZGVyIik7CiAgICBpZiAoY2FuZGlkYXRlKSB7CiAgICAgICAgcmV0dXJuIHNhbml0aXplRmlsZU5hbWUoCiAgICAgICAgICAgIGNhbmRpZGF0ZS50ZXh0Q29udGVudAogICAgICAgICAgICAgICAgLnNwbGl0KC9ccy9nKQogICAgICAgICAgICAgICAgLmZpbHRlcigocykgPT4gcykKICAgICAgICAgICAgICAgIC5qb2luKCJfIikgKyAiXyIKICAgICAgICApOwogICAgfQogICAgcmV0dXJuICIiOwp9CgpmdW5jdGlvbiBnZXRQcmVmaXhGcm9tRG9jdW1lbnQoKSB7CiAgICB2YXIgY2FuZGlkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLm1vdmllLXRpdGxlLWJsb2NrIik7CiAgICBpZiAoY2FuZGlkYXRlKSB7CiAgICAgICAgcmV0dXJuIHNhbml0aXplRmlsZU5hbWUoCiAgICAgICAgICAgIGNhbmRpZGF0ZS50ZXh0Q29udGVudAogICAgICAgICAgICAgICAgLnNwbGl0KC9ccy9nKQogICAgICAgICAgICAgICAgLmZpbHRlcigocykgPT4gcykKICAgICAgICAgICAgICAgIC5qb2luKCJfIikgKyAiXyIKICAgICAgICApOwogICAgfQogICAgcmV0dXJuICIiOwp9CgpmdW5jdGlvbiBzYW5pdGl6ZUZpbGVOYW1lKGlucHV0LCByZXBsYWNlbWVudCA9ICJfIikgewogICAgLy8gVGhhbmtzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXJzaGFwL25vZGUtc2FuaXRpemUtZmlsZW5hbWUvYmxvYi9tYXN0ZXIvaW5kZXguanMKICAgIGNvbnN0IGlsbGVnYWxSZSA9IC9bXC9cPzw+XFw6XCpcfCJdL2c7CiAgICBjb25zdCBjb250cm9sUmUgPSAvW1x4MDAtXHgxZlx4ODAtXHg5Zl0vZzsKICAgIGNvbnN0IHJlc2VydmVkUmUgPSAvXlwuKyQvOwogICAgY29uc3Qgd2luZG93c1Jlc2VydmVkUmUgPSAvXihjb258cHJufGF1eHxudWx8Y29tWzAtOV18bHB0WzAtOV0pKFwuLiopPyQvaTsKICAgIGNvbnN0IHdpbmRvd3NUcmFpbGluZ1JlID0gL1tcLiBdKyQvOwogICAgcmV0dXJuIGlucHV0CiAgICAgICAgLnJlcGxhY2UoaWxsZWdhbFJlLCByZXBsYWNlbWVudCkKICAgICAgICAucmVwbGFjZShjb250cm9sUmUsIHJlcGxhY2VtZW50KQogICAgICAgIC5yZXBsYWNlKHJlc2VydmVkUmUsIHJlcGxhY2VtZW50KQogICAgICAgIC5yZXBsYWNlKHdpbmRvd3NSZXNlcnZlZFJlLCByZXBsYWNlbWVudCkKICAgICAgICAucmVwbGFjZSh3aW5kb3dzVHJhaWxpbmdSZSwgcmVwbGFjZW1lbnQpOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PQovLyA9ICAgIExvZ2dpbmcgVXRpbHMgICAgPQovLyA9PT09PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiBtb0Rvd25sb2FkZXJMb2cobXNnKSB7CiAgICBjb25zb2xlLmxvZygiW21vLWRvd25sb2Rlcl1bIiArIG1vRG93bmxvYWRlckxvZy5jYWxsZXIubmFtZSArICJdICIgKyBtc2cpOwp9CgpmdW5jdGlvbiBtb0Rvd25sb2FkZXJEZWJ1Zyhtc2cpIHsKICAgIGNvbnNvbGUuZGVidWcoIlttby1kb3dubG9kZXJdWyIgKyBtb0Rvd25sb2FkZXJEZWJ1Zy5jYWxsZXIubmFtZSArICJdICIgKyBtc2cpOwp9Cg=="
}