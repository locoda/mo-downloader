{
  "match": 0,
  "info": "mo\u4e0b\u8f7d\u5668",
  "regex": "m.tribe-m.jp@@m.ex-m.jp@@m.ldh-m.jp@@m.ldhgirls-m.jp",
  "runat": 0,
  "version": "0.28",
  "author": "\u4e59\u919a",
  "name": "mo\u4e0b\u8f7d\u5668",
  "code": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICAgbW8gKExESCkg5LiL6L295ZmoCi8vIEBuYW1lc3BhY2UgICAgICAgICAgIGh0dHBzOi8vMW1ldGhlci5tZS8KLy8gQHZlcnNpb24gICAgICAgICAgICAgMC4yOAovLyBAZGVzY3JpcHRpb24gICAgICAgICDlnKhtb+eahOWGheWuuemhteWinuWKoOWbvueJh+WSjOinhumikeS4i+i9veeahOaMiemSru+8jCDop6PplIHlj7PplK7lip/og70KLy8gQGF1dGhvciAgICAgICAgICAgICAg5LmZ6YaaKEBsb2NvZGEpCi8vIEBtYXRjaCAgICAgICAgICAgICAgIGh0dHAqOi8vbS50cmliZS1tLmpwLyoKLy8gQG1hdGNoICAgICAgICAgICAgICAgaHR0cCo6Ly9tLmV4LW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoLW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoZ2lybHMtbS5qcC8qCi8vIEBpY29uICAgICAgICAgICAgICAgIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vczIvZmF2aWNvbnM/c3o9NjQmZG9tYWluPWxkaC5jby5qcAovLyBAc291cmNlICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vbG9jb2RhL21vLWRvd25sb2FkZXIKLy8gQHVwZGF0ZVVSTCAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2xvY29kYS9tby1kb3dubG9hZGVyL3Jhdy9tYWluL21vLWRvd25sb2Rlci51c2VyLmpzCi8vIEBkb3dubG9hZFVSTCAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9sb2NvZGEvbW8tZG93bmxvYWRlci9yYXcvbWFpbi9tby1kb3dubG9kZXIudXNlci5qcwovLyBAbGljZW5zZSAgICAgICAgICAgICBNSVQKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24gKCkgewogICAgInVzZSBzdHJpY3QiOwogICAgLy8gPT09PT09PT09PT09PT09PQogICAgLy8gPSAgICBDb25zdHMgICAgPQogICAgLy8gPT09PT09PT09PT09PT09PQoKICAgIGNvbnN0IGlzTW9iaWxlID0gKCkgPT4KICAgIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdCgKICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50CiAgICApOwogICAgY29uc3Qga2V5d29yZHMgPSBbInVwbGNtbiIsICJ1cGxvYWQiXTsKCiAgICAvLyA9PT09PT09PT09PT09PQogICAgLy8gPSAgICBNYWluICAgID0KICAgIC8vID09PT09PT09PT09PT09CgogICAgLy8g5Yig6Zmk5Zu+54mH5L+d5oqkCiAgICByZW1vdmVQcm90ZWN0SW1nKCk7CiAgICAvLyDlnKjor6bmg4XpobXms6jlhaXmjInpkq4KICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygiZGV0YWlsIikpIHsKICAgICAgICBpbmplY3REb3dubG9hZEFsbEJ1dHRvbnMoKTsKICAgIH0KICAgIC8vIOagueaNruinhumikeazqOWFpeaMiemSrgogICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCJtb3ZpZSIpKSB7CiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdi5saW1lbGlnaHQtcGxheWVyIikpIHsKICAgICAgICAgICAgaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbihkb2N1bWVudCk7CiAgICAgICAgfQogICAgfQogICAgLy8g5Zyo5pe26Ze06L2055WM6Z2i6K6+572uTGlzdGVuZXIKICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygidGltZWxpbmUiKSkgewogICAgICAgIC8vIOetieW+heWKoOi9vXNjcm9sbAogICAgICAgIChmdW5jdGlvbiBpbml0KCkgewogICAgICAgICAgICB2YXIgY291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImxkaC1pbmZpbml0ZS1zY3JvbGwiKTsKICAgICAgICAgICAgaWYgKGNvdW50ZXIpIHsKICAgICAgICAgICAgICAgIGN1c3RvbWl6ZWRUaW1lbGluZVBhZ2UoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoaW5pdCwgMzAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0pKCk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIFV0aWxzICAgID0KICAgIC8vID09PT09PT09PT09PT09PQoKICAgIGZ1bmN0aW9uIHJlbW92ZVByb3RlY3RJbWcoKSB7CiAgICAgICAgLy8g56e76Zmk5Y+z6ZSu6ZmQ5Yi2CiAgICAgICAgZG9jdW1lbnQub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfTsKICAgICAgICAvLyDnp7vpmaRwcm90ZWN0aW1n6ZmQ5Yi2CiAgICAgICAgZG9jdW1lbnQKICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoIi5wcm90ZWN0aW1nIikKICAgICAgICAgICAgLmZvckVhY2goKG5vZGUpID0+IG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgicHJvdGVjdGltZyIpKTsKICAgICAgICBtb0Rvd25sb2FkZXJMb2coIuenu+mZpOWPs+mUrumZkOWItiIpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIEJ1dHRvbiBJbmplY3Rpb24gVXRpbHMgICAgPQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiBpbmplY3REb3dubG9hZEFsbEJ1dHRvbnMoKSB7CiAgICAgICAgdmFyIGFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhcnRpY2xlIik7CiAgICAgICAgaWYgKGFydGljbGUuY2xhc3NMaXN0LmNvbnRhaW5zKCJhcnRpY2xlLS1uZXdzIikpIHsKICAgICAgICAgICAgLy8g5paw6Ze76aG16Z2i54m55q6K5aSE55CGCiAgICAgICAgICAgIGFydGljbGUgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5hcnRpY2xlX19ib2R5Iik7CiAgICAgICAgfQogICAgICAgIGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShhcnRpY2xlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5kRWxpZ2libGVJbWdzKGFydGljbGUpIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShhcnRpY2xlLnF1ZXJ5U2VsZWN0b3JBbGwoImltZyIpKQogICAgICAgICAgICAubWFwKChpbWcpID0+IGltZy5zcmMpCiAgICAgICAgICAgIC5maWx0ZXIoKGltZykgPT4ga2V5d29yZHMuc29tZSgoaykgPT4gaW1nLmluY2x1ZGVzKGspKSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXR0YWNoQnV0dG9uVG9BcnRpY2xlKGFydGljbGUpIHsKICAgICAgICB2YXIgaW1ncyA9IGZpbmRFbGlnaWJsZUltZ3MoYXJ0aWNsZSk7CiAgICAgICAgLy8g5rOo5YWl5oyJ6ZKuIGRpdgogICAgICAgIHZhciBidXR0b25zRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgYnV0dG9uc0Rpdi5jbGFzc05hbWUgPSAibGRoLW1vLWRsIjsKICAgICAgICBidXR0b25zRGl2LnN0eWxlID0gIm1hcmdpbi10b3A6IDAuNGVtOyBtYXJnaW4tYm90dG9tOiAwLjRlbTsiOwogICAgICAgIGFydGljbGUuaW5zZXJ0QmVmb3JlKGJ1dHRvbnNEaXYsIGFydGljbGUuZmlyc3RDaGlsZCk7CiAgICAgICAgLy8g5Zu+54mH6ZO+5o6l55Sf5oiQ5oyJ6ZKuCiAgICAgICAgaWYgKGlzTW9iaWxlKCkpIHsKICAgICAgICAgICAgaW5qZWN0T25lQnV0dG9uKAogICAgICAgICAgICAgICAgYnV0dG9uc0RpdiwKICAgICAgICAgICAgICAgICLnlJ/miJDlm77niYfpk77mjqUoIiArIGltZ3MubGVuZ3RoICsgIikiLAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlT25DbGlja0hhbmRsZXIoYnV0dG9uc0RpdiwgYXJ0aWNsZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5Zu+54mH5LiL6L295oyJ6ZKuCiAgICAgICAgICAgIGluamVjdE9uZUJ1dHRvbigKICAgICAgICAgICAgICAgIGJ1dHRvbnNEaXYsCiAgICAgICAgICAgICAgICAi5LiL6L295omA5pyJ5Zu+54mHICgiICsgaW1ncy5sZW5ndGggKyAiKSIsCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRPbkNsaWNrSGFuZGxlcihhcnRpY2xlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgLy8g6KeG6aKR5LiL6L295oyJ6ZKuCiAgICAgICAgaWYgKAogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoImRpdi5saW1lbGlnaHQtcGxheWVyIikgfHwKICAgICAgICAgICAgYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCJhLnBvcHVwX2xpbmsiKQogICAgICAgICkgewogICAgICAgICAgICAvLyBpbmplY3RPbmVCdXR0b24oYnV0dG9uc0RpdiwgIuS4i+i9veaJgOacieinhumikSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8gICAgIGRvd25sb2FkVmlkZW9PbkNsaWNrSGFuZGxlcihhcnRpY2xlKTsKICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgIC8vIExpc3QgVmlldyDop4bpopEKICAgICAgICAgICAgaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbihhcnRpY2xlKTsKICAgICAgICAgICAgLy8gVGltZWxpbmUg6KeG6aKRCiAgICAgICAgICAgIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b25Gb3JUaW1lbGluZShhcnRpY2xlKTsKICAgICAgICB9CiAgICAgICAgbW9Eb3dubG9hZGVyTG9nKCLms6jlhaXmjInpkq4iKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbmplY3RQZXJWaWRlb0Rvd25sb2FkQnV0dG9uKGRpdikgewogICAgICAgIGRpdi5xdWVyeVNlbGVjdG9yQWxsKCJkaXYubGltZWxpZ2h0LXBsYXllciIpLmZvckVhY2goKHZpZGVvRGl2KSA9PiB7CiAgICAgICAgICAgIHZhciBtZWRpYUlkID0gdmlkZW9EaXYuaWQuc3Vic3RyaW5nKHZpZGVvRGl2LmlkLmxhc3RJbmRleE9mKCJfIikgKyAxKTsKICAgICAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcoIuato+WcqOS4i+i9veinhumike+8miAiICsgbWVkaWFJZCk7CiAgICAgICAgICAgIGluamVjdE9uZUJ1dHRvbih2aWRlb0Rpdi5wYXJlbnRFbGVtZW50LCAi5LiL6L296KeG6aKRIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZG93bmxvYWRWaWRlbygKICAgICAgICAgICAgICAgICAgICBtZWRpYUlkLAogICAgICAgICAgICAgICAgICAgIGdldFByZWZpeEZyb21BcnRpY2xlKGRpdikgfHwgZ2V0UHJlZml4RnJvbURvY3VtZW50KCkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b25Gb3JUaW1lbGluZShkaXYpIHsKICAgICAgICBkaXYucXVlcnlTZWxlY3RvckFsbCgiYS5wb3B1cF9saW5rIikuZm9yRWFjaCgodmlkZW9EaXYpID0+IHsKICAgICAgICAgICAgdmFyIG1lZGlhSWQgPSB2aWRlb0RpdgogICAgICAgICAgICAgICAgLmdldEF0dHJpYnV0ZSgib25jbGljayIpCiAgICAgICAgICAgICAgICAuc3BsaXQoIm1vdmllLyIpWzFdCiAgICAgICAgICAgICAgICAuc3BsaXQoIi8iKVswXTsKICAgICAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcoIuato+WcqOS4i+i9veinhumike+8miAiICsgbWVkaWFJZCk7CiAgICAgICAgICAgIGluamVjdE9uZUJ1dHRvbih2aWRlb0Rpdi5wYXJlbnRFbGVtZW50LCAi5LiL6L296KeG6aKRIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZG93bmxvYWRWaWRlbygKICAgICAgICAgICAgICAgICAgICBtZWRpYUlkLAogICAgICAgICAgICAgICAgICAgIGdldFByZWZpeEZyb21BcnRpY2xlKGRpdikgfHwgZ2V0UHJlZml4RnJvbURvY3VtZW50KCkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdE9uZUJ1dHRvbihlbGVtZW50LCB0ZXh0T25CdXR0b24sIGNsaWNrTGlzdGVuZXIpIHsKICAgICAgICB2YXIgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiQlVUVE9OIik7CiAgICAgICAgdmFyIGJ0blRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0T25CdXR0b24pOwogICAgICAgIGJ0bi5hcHBlbmRDaGlsZChidG5UZXh0KTsKICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBjbGlja0xpc3RlbmVyKTsKICAgICAgICBidG4uc3R5bGUgPQogICAgICAgICAgICAiYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlcjogc29saWQgIzgwODA4MCAycHg7IGJvcmRlci1yYWRpdXM6IDIwcHg7IGNvbG9yOiAjNTQ1NDU0OyBtYXJnaW46IDAuMmVtIjsKICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGJ0bik7CiAgICB9CgogICAgZnVuY3Rpb24gZG93bmxvYWRPbkNsaWNrSGFuZGxlcihhcnRpY2xlKSB7CiAgICAgICAgZG93bmxvYWRJbWFnZXMoZmluZEVsaWdpYmxlSW1ncyhhcnRpY2xlKSwgZ2V0UHJlZml4RnJvbUFydGljbGUoYXJ0aWNsZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdlbmVyYXRlT25DbGlja0hhbmRsZXIoYnV0dG9uc0RpdiwgYXJ0aWNsZSkgewogICAgICAgIHZhciBpbWdzID0gZmluZEVsaWdpYmxlSW1ncyhhcnRpY2xlKTsKICAgICAgICB2YXIgdGV4dGFyZWEgPSBidXR0b25zRGl2LnF1ZXJ5U2VsZWN0b3IoInRleHRhcmVhLmxkaC1tby1kbCIpOwogICAgICAgIGlmICghdGV4dGFyZWEpIHsKICAgICAgICAgICAgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpOwogICAgICAgICAgICB0ZXh0YXJlYS5jbGFzc05hbWUgPSAibGRoLW1vLWRsIjsKICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUgPSAiaGVpZ2h0OiAxMDBweDsgd2lkdGg6IDgwJTsiOwogICAgICAgICAgICB2YXIgYnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpOwogICAgICAgICAgICBidXR0b25zRGl2Lmluc2VydEJlZm9yZShiciwgYnV0dG9uc0Rpdi5maXJzdENoaWxkKTsKICAgICAgICAgICAgYnV0dG9uc0Rpdi5pbnNlcnRCZWZvcmUodGV4dGFyZWEsIGJ1dHRvbnNEaXYuZmlyc3RDaGlsZCk7CiAgICAgICAgfQogICAgICAgIHRleHRhcmVhLnZhbHVlID0gaW1ncy5qb2luKCJcbiIpOwogICAgICAgIHRleHRhcmVhLnNlbGVjdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvd25sb2FkVmlkZW9PbkNsaWNrSGFuZGxlcihhcnRpY2xlKSB7CiAgICAgICAgdmFyIGVsZW1zID0gYXJ0aWNsZS5xdWVyeVNlbGVjdG9yQWxsKCJzY3JpcHQiKTsKICAgICAgICB2YXIgdmlkZW9zID0gQXJyYXkuZnJvbShlbGVtcykKICAgICAgICAgICAgLmZpbHRlcigKICAgICAgICAgICAgICAgICh2KSA9PgogICAgICAgICAgICAgICAgICAgIHYudGV4dENvbnRlbnQuaW5jbHVkZXMoIm1lZGlhSWQiKSAmJgogICAgICAgICAgICAgICAgICAgICF2LnRleHRDb250ZW50LmluY2x1ZGVzKCJibG9nVGFsa0RhdGEiKQogICAgICAgICAgICApCiAgICAgICAgICAgIC5tYXAoCiAgICAgICAgICAgICAgICAodikgPT4KICAgICAgICAgICAgICAgICAgICBKU09OLnBhcnNlKAogICAgICAgICAgICAgICAgICAgICAgICB2LnRleHRDb250ZW50LnN1YnN0cmluZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYudGV4dENvbnRlbnQuaW5kZXhPZigiKCIpICsgMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYudGV4dENvbnRlbnQubGFzdEluZGV4T2YoIikiKQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKS5tZWRpYUlkCiAgICAgICAgICAgICk7CgogICAgICAgIHZpZGVvcy5tYXAoKHZpZGVvKSA9PiBkb3dubG9hZFZpZGVvKHZpZGVvLCBnZXRQcmVmaXhGcm9tQXJ0aWNsZShhcnRpY2xlKSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGN1c3RvbWl6ZWRUaW1lbGluZVBhZ2UoKSB7CiAgICAgICAgLy8g5Yid5aeL5YyWCiAgICAgICAgZG9jdW1lbnQKICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoImxkaC1pbmZpbml0ZS1zY3JvbGwgYXJ0aWNsZSIpCiAgICAgICAgICAgIC5mb3JFYWNoKChhcnRpY2xlKSA9PiBhdHRhY2hCdXR0b25Ub0FydGljbGUoYXJ0aWNsZSkpOwogICAgICAgIC8vCiAgICAgICAgY29uc3QgaW5maW5pdGVTY3JvbGxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAogICAgICAgICAgICAibGRoLWluZmluaXRlLXNjcm9sbCIKICAgICAgICApOwogICAgICAgIGNvbnN0IGNvbmZpZyA9IHsgY2hpbGRMaXN0OiB0cnVlIH07CiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zLCBvYnNlcnZlcikgewogICAgICAgICAgICB2YXIgbm9kZXMgPSBtdXRhdGlvbnMuZmluZCgocikgPT4KICAgICAgICAgICAgICAgIEFycmF5LmZyb20oci5hZGRlZE5vZGVzKS5maWx0ZXIoKG4pID0+IChuLmNsYXNzTmFtZSA9ICJhcnRpY2xlIikpCiAgICAgICAgICAgICkuYWRkZWROb2RlczsKICAgICAgICAgICAgbm9kZXMuZm9yRWFjaCgobm9kZSkgPT4KICAgICAgICAgICAgICAgIGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShub2RlLnF1ZXJ5U2VsZWN0b3IoImFydGljbGUiKSkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmVtb3ZlUHJvdGVjdEltZygpOwogICAgICAgICAgICBtb0Rvd25sb2FkZXJEZWJ1Zygi5q2j5Zyo5Zu+54mH6KeG6aKR77yaICIpOwogICAgICAgIH0pOwogICAgICAgIG9ic2VydmVyLm9ic2VydmUoaW5maW5pdGVTY3JvbGxDb250YWluZXIsIGNvbmZpZyk7CiAgICAgICAgbW9Eb3dubG9hZGVyTG9nKCJUaW1lbGluZemhtemdouazqOWFpeaMiemSriIpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gPSAgICBEb3dubG9hZCBVdGlscyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiBkb3dubG9hZEltYWdlcyhpbWdzLCBwcmVmaXggPSAiIikgewogICAgICAgIG1vRG93bmxvYWRlckRlYnVnKCLmraPlnKjlm77niYfop4bpopHvvJogIiArIGltZ3MpOwogICAgICAgIC8vIFRoYW5rcyB0byBodHRwczovL2dpdGh1Yi5jb20veTI1MjMyOC9JbnN0YWdyYW1fRG93bmxvYWRfQnV0dG9uCiAgICAgICAgaW1ncy5tYXAoKGltZykgPT4KICAgICAgICAgICAgZmV0Y2goaW1nLCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7CiAgICAgICAgICAgICAgICAgICAgT3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBtb2RlOiAiY29ycyIsCiAgICAgICAgICAgICAgICBjYWNoZTogIm5vLWNhY2hlIiwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYmxvYigpKQogICAgICAgICAgICAgICAgLnRoZW4oKGJsb2IpID0+CiAgICAgICAgICAgICAgICAgICAgZG93bG9hZEJsb2IoCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpLAogICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggKyBpbWcuc3Vic3RyaW5nKGltZy5sYXN0SW5kZXhPZigiLyIpICsgMSkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IGNvbnNvbGUuZXJyb3IoZSkpCiAgICAgICAgKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkb3dubG9hZFZpZGVvKHZpZGVvLCBwcmVmaXggPSAiIikgewogICAgICAgIGNvbnN0IHZpZGVvUmVxdWVzdFVSTCA9CiAgICAgICAgICAgICJodHRwczovL3Byb2R1Y3Rpb24tcHMubHZwLmxsbncubmV0L3IvUGxheWxpc3RTZXJ2aWNlL21lZGlhLzxtZWRpYUlkPi9nZXRNb2JpbGVQbGF5bGlzdEJ5TWVkaWFJZCI7CiAgICAgICAgZmV0Y2godmlkZW9SZXF1ZXN0VVJMLnJlcGxhY2UoIjxtZWRpYUlkPiIsIHZpZGVvKSwgewogICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7CiAgICAgICAgICAgICAgICBPcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sCiAgICAgICAgICAgICAgICBSZWZlcmVyOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgbW9kZTogImNvcnMiLAogICAgICAgICAgICBjYWNoZTogIm5vLWNhY2hlIiwKICAgICAgICB9KQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoaXNNb2JpbGUoKSkgewogICAgICAgICAgICAgICAgICAgIGxldCBtb2JpbGVVcmwgPSByZXNwb25zZS5tZWRpYUxpc3RbMF0ubW9iaWxlVXJscy5maW5kKAogICAgICAgICAgICAgICAgICAgICAgICAodikgPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYudGFyZ2V0TWVkaWFQbGF0Zm9ybSA9PSAiTW9iaWxlSDI2NCIgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYudGFyZ2V0TWVkaWFQbGF0Zm9ybSA9PSAiQnJvYWRiYW5kIgogICAgICAgICAgICAgICAgICAgICkubW9iaWxlVXJsOwogICAgICAgICAgICAgICAgICAgIGZldGNoKG1vYmlsZVVybC5yZXBsYWNlKCJodHRwOi8vIiwgImh0dHBzOi8vIikpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYmxvYigpKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoYmxvYikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bG9hZEJsb2IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ICsgZ2V0RmlsZW5hbWVGcm9tVmlkZW9VcmwobW9iaWxlVXJsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiBjb25zb2xlLmVycm9yKGUpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG0zdThVcmwgPSByZXNwb25zZS5tZWRpYUxpc3RbMF0ubW9iaWxlVXJscy5maW5kKAogICAgICAgICAgICAgICAgICAgICAgICAodikgPT4gdi50YXJnZXRNZWRpYVBsYXRmb3JtID09ICJIdHRwTGl2ZVN0cmVhbWluZyIKICAgICAgICAgICAgICAgICAgICApLm1vYmlsZVVybDsKICAgICAgICAgICAgICAgICAgICBvcGVuTTNVOFRvb2xCb3gobTN1OFVybCwgcHJlZml4ICsgZ2V0RmlsZW5hbWVGcm9tVmlkZW9VcmwobTN1OFVybCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBkb3dsb2FkQmxvYihibG9iLCBmaWxlbmFtZSkgewogICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgICAgICBhLmhyZWYgPSBibG9iOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgYS5jbGljaygpOwogICAgICAgIGEucmVtb3ZlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gb3Blbk0zVThUb29sQm94KG0zdThVcmwsIGZpbGVuYW1lKSB7CiAgICAgICAgLy8g5omT5byAIGh0dHBzOi8vdG9vbHMudGhhdHdpbmQuY29tL3Rvb2wvbTN1OGRvd25sb2FkZXIKICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICBhLnRhcmdldCA9ICJfYmxhbmsiOwogICAgICAgIGEuaHJlZiA9IGNvbnN0cnVjdE0zVThUb29sQm94VVJMKG0zdThVcmwsIGZpbGVuYW1lKTsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgIGEuY2xpY2soKTsKICAgICAgICBhLnJlbW92ZSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnN0cnVjdE0zVThUb29sQm94VVJMKG0zdThVcmwsIGZpbGVuYW1lKSB7CiAgICAgICAgdmFyIHVybCA9CiAgICAgICAgICAgICJodHRwczovL3Rvb2xzLnRoYXR3aW5kLmNvbS90b29sL20zdThkb3dubG9hZGVyIyIgKwogICAgICAgICAgICAibTN1OD0iICsKICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KG0zdThVcmwucmVwbGFjZSgiaHR0cDovLyIsICJodHRwczovLyIpKSArCiAgICAgICAgICAgICImcmVmZXJlcj0iICsKICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSArCiAgICAgICAgICAgICImZmlsZW5hbWU9IiArCiAgICAgICAgICAgIGZpbGVuYW1lOwogICAgICAgIG1vRG93bmxvYWRlckRlYnVnKHVybCk7CiAgICAgICAgcmV0dXJuIHVybDsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIE5hbWluZyBVdGlscyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09CgogICAgZnVuY3Rpb24gZ2V0UHJlZml4RnJvbUFydGljbGUoYXJ0aWNsZSkgewogICAgICAgIHZhciBjYW5kaWRhdGUgPQogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5hcnRpY2xlX19oZWFkIikgfHwKICAgICAgICAgICAgYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCIuYXJ0aWNsZV9faGVhZGVyIik7CiAgICAgICAgaWYgKGNhbmRpZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gc2FuaXRpemVGaWxlTmFtZSgKICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS50ZXh0Q29udGVudAogICAgICAgICAgICAgICAgICAgIC5zcGxpdCgvXHMvZykKICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChzKSA9PiBzKQogICAgICAgICAgICAgICAgICAgIC5qb2luKCJfIikgKyAiXyIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICIiOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByZWZpeEZyb21Eb2N1bWVudCgpIHsKICAgICAgICB2YXIgY2FuZGlkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLm1vdmllLXRpdGxlLWJsb2NrIik7CiAgICAgICAgaWYgKGNhbmRpZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gc2FuaXRpemVGaWxlTmFtZSgKICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS50ZXh0Q29udGVudAogICAgICAgICAgICAgICAgICAgIC5zcGxpdCgvXHMvZykKICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChzKSA9PiBzKQogICAgICAgICAgICAgICAgICAgIC5qb2luKCJfIikgKyAiXyIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICIiOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEZpbGVuYW1lRnJvbVZpZGVvVXJsKHVybCkgewogICAgICAgIGxldCB0ZW1wTmFtZSA9IHVybC5yZXBsYWNlKCIvcm9vdC1tZXNzYWdlLWN4Zi1hcGFjaGUiLCAiIik7CiAgICAgICAgdGVtcE5hbWUgPSB0ZW1wTmFtZS5zdWJzdHJpbmcodGVtcE5hbWUubGFzdEluZGV4T2YoIi8iKSArIDEpLnJlcGxhY2UoIi5tM3U4IiwgIi5tcDQiKTsKICAgICAgICByZXR1cm4gdGVtcE5hbWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2FuaXRpemVGaWxlTmFtZShpbnB1dCwgcmVwbGFjZW1lbnQgPSAiXyIpIHsKICAgICAgICAvLyBUaGFua3MgdG8gaHR0cHM6Ly9naXRodWIuY29tL3BhcnNoYXAvbm9kZS1zYW5pdGl6ZS1maWxlbmFtZS9ibG9iL21hc3Rlci9pbmRleC5qcwogICAgICAgIGNvbnN0IGlsbGVnYWxSZSA9IC9bXC9cPzw+XFw6XCpcfCJdL2c7CiAgICAgICAgY29uc3QgY29udHJvbFJlID0gL1tceDAwLVx4MWZceDgwLVx4OWZdL2c7CiAgICAgICAgY29uc3QgcmVzZXJ2ZWRSZSA9IC9eXC4rJC87CiAgICAgICAgY29uc3Qgd2luZG93c1Jlc2VydmVkUmUgPSAvXihjb258cHJufGF1eHxudWx8Y29tWzAtOV18bHB0WzAtOV0pKFwuLiopPyQvaTsKICAgICAgICBjb25zdCB3aW5kb3dzVHJhaWxpbmdSZSA9IC9bXC4gXSskLzsKICAgICAgICByZXR1cm4gaW5wdXQKICAgICAgICAgICAgLnJlcGxhY2UoaWxsZWdhbFJlLCByZXBsYWNlbWVudCkKICAgICAgICAgICAgLnJlcGxhY2UoY29udHJvbFJlLCByZXBsYWNlbWVudCkKICAgICAgICAgICAgLnJlcGxhY2UocmVzZXJ2ZWRSZSwgcmVwbGFjZW1lbnQpCiAgICAgICAgICAgIC5yZXBsYWNlKHdpbmRvd3NSZXNlcnZlZFJlLCByZXBsYWNlbWVudCkKICAgICAgICAgICAgLnJlcGxhY2Uod2luZG93c1RyYWlsaW5nUmUsIHJlcGxhY2VtZW50KTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gPSAgICBMb2dnaW5nIFV0aWxzICAgID0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09CgogICAgZnVuY3Rpb24gbW9Eb3dubG9hZGVyTG9nKG1zZykgewogICAgICAgIGNvbnNvbGUubG9nKCJbbW8tZG93bmxvZGVyXSAiICsgbXNnKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtb0Rvd25sb2FkZXJEZWJ1Zyhtc2cpIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCJbbW8tZG93bmxvZGVyXSAiICsgbXNnKTsKICAgIH0KfSkoKTsK"
}