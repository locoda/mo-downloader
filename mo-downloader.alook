{
  "match": 0,
  "info": "mo\u4e0b\u8f7d\u5668",
  "regex": "m.tribe-m.jp@@m.ex-m.jp@@m.ldh-m.jp@@m.ldhgirls-m.jp",
  "runat": 0,
  "version": "0.30",
  "author": "\u4e59\u919a",
  "name": "mo\u4e0b\u8f7d\u5668",
  "code": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICAgbW8gKExESCkg5LiL6L295ZmoCi8vIEBuYW1lc3BhY2UgICAgICAgICAgIGh0dHBzOi8vMW1ldGhlci5tZS8KLy8gQHZlcnNpb24gICAgICAgICAgICAgMC4zMAovLyBAZGVzY3JpcHRpb24gICAgICAgICDlnKhtb+eahOWGheWuuemhteWinuWKoOWbvueJh+WSjOinhumikeS4i+i9veeahOaMiemSru+8jCDop6PplIHlj7PplK7lip/og70KLy8gQGF1dGhvciAgICAgICAgICAgICAg5LmZ6YaaKEBsb2NvZGEpCi8vIEBtYXRjaCAgICAgICAgICAgICAgIGh0dHAqOi8vbS50cmliZS1tLmpwLyoKLy8gQG1hdGNoICAgICAgICAgICAgICAgaHR0cCo6Ly9tLmV4LW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoLW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoZ2lybHMtbS5qcC8qCi8vIEBpY29uICAgICAgICAgICAgICAgIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vczIvZmF2aWNvbnM/c3o9NjQmZG9tYWluPWxkaC5jby5qcAovLyBAc291cmNlICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vbG9jb2RhL21vLWRvd25sb2FkZXIKLy8gQHVwZGF0ZVVSTCAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2xvY29kYS9tby1kb3dubG9hZGVyL3Jhdy9tYWluL21vLWRvd25sb2Rlci51c2VyLmpzCi8vIEBkb3dubG9hZFVSTCAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9sb2NvZGEvbW8tZG93bmxvYWRlci9yYXcvbWFpbi9tby1kb3dubG9kZXIudXNlci5qcwovLyBAbGljZW5zZSAgICAgICAgICAgICBNSVQKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24gKCkgewogICAgInVzZSBzdHJpY3QiOwogICAgLy8gPT09PT09PT09PT09PT09PQogICAgLy8gPSAgICBDb25zdHMgICAgPQogICAgLy8gPT09PT09PT09PT09PT09PQoKICAgIGNvbnN0IGlzTW9iaWxlID0gKCkgPT4KICAgICAgICAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoCiAgICAgICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQKICAgICAgICApOwoKICAgIGNvbnN0IGtleXdvcmRzID0gWyJ1cGxjbW4iLCAidXBsb2FkIl07CgogICAgLy8gPT09PT09PT09PT09PT0KICAgIC8vID0gICAgTWFpbiAgICA9CiAgICAvLyA9PT09PT09PT09PT09PQoKICAgIC8vIOWIoOmZpOWbvueJh+S/neaKpAogICAgcmVtb3ZlUHJvdGVjdEltZygpOwogICAgLy8g5Zyo6K+m5oOF6aG15rOo5YWl5oyJ6ZKuCiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoImRldGFpbCIpKSB7CiAgICAgICAgaW5qZWN0RG93bmxvYWRBbGxCdXR0b25zKCk7CiAgICB9CiAgICAvLyDmoLnmja7op4bpopHms6jlhaXmjInpkq4KICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygibW92aWUiKSkgewogICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXYubGltZWxpZ2h0LXBsYXllciIpKSB7CiAgICAgICAgICAgIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b24oZG9jdW1lbnQpOwogICAgICAgIH0KICAgIH0KICAgIC8vIOWcqOaXtumXtOi9tOeVjOmdouiuvue9rkxpc3RlbmVyCiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoInRpbWVsaW5lIikpIHsKICAgICAgICAvLyDnrYnlvoXliqDovb1zY3JvbGwKICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJsZGgtaW5maW5pdGUtc2Nyb2xsIik7CiAgICAgICAgICAgIGlmIChjb3VudGVyKSB7CiAgICAgICAgICAgICAgICBjdXN0b21pemVkVGltZWxpbmVQYWdlKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGluaXQsIDMwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KSgpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PQogICAgLy8gPSAgICBVdGlscyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiByZW1vdmVQcm90ZWN0SW1nKCkgewogICAgICAgIC8vIOenu+mZpOWPs+mUrumZkOWItgogICAgICAgIGRvY3VtZW50Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH07CiAgICAgICAgLy8g56e76ZmkcHJvdGVjdGltZ+mZkOWItgogICAgICAgIGRvY3VtZW50CiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCIucHJvdGVjdGltZyIpCiAgICAgICAgICAgIC5mb3JFYWNoKChub2RlKSA9PiBub2RlLmNsYXNzTGlzdC5yZW1vdmUoInByb3RlY3RpbWciKSk7CiAgICAgICAgbW9Eb3dubG9hZGVyTG9nKCLnp7vpmaTlj7PplK7pmZDliLYiKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gPSAgICBCdXR0b24gSW5qZWN0aW9uIFV0aWxzICAgID0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogICAgZnVuY3Rpb24gaW5qZWN0RG93bmxvYWRBbGxCdXR0b25zKCkgewogICAgICAgIHZhciBhcnRpY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYXJ0aWNsZSIpOwogICAgICAgIGlmIChhcnRpY2xlLmNsYXNzTGlzdC5jb250YWlucygiYXJ0aWNsZS0tbmV3cyIpKSB7CiAgICAgICAgICAgIC8vIOaWsOmXu+mhtemdoueJueauiuWkhOeQhgogICAgICAgICAgICBhcnRpY2xlID0gYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCIuYXJ0aWNsZV9fYm9keSIpOwogICAgICAgIH0KICAgICAgICBhdHRhY2hCdXR0b25Ub0FydGljbGUoYXJ0aWNsZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZmluZEVsaWdpYmxlSW1ncyhhcnRpY2xlKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oYXJ0aWNsZS5xdWVyeVNlbGVjdG9yQWxsKCJpbWciKSkKICAgICAgICAgICAgLm1hcCgoaW1nKSA9PiBpbWcuc3JjKQogICAgICAgICAgICAuZmlsdGVyKChpbWcpID0+IGtleXdvcmRzLnNvbWUoKGspID0+IGltZy5pbmNsdWRlcyhrKSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShhcnRpY2xlKSB7CiAgICAgICAgdmFyIGltZ3MgPSBmaW5kRWxpZ2libGVJbWdzKGFydGljbGUpOwogICAgICAgIC8vIOazqOWFpeaMiemSriBkaXYKICAgICAgICB2YXIgYnV0dG9uc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIGJ1dHRvbnNEaXYuY2xhc3NOYW1lID0gImxkaC1tby1kbCI7CiAgICAgICAgYnV0dG9uc0Rpdi5zdHlsZSA9ICJtYXJnaW4tdG9wOiAwLjRlbTsgbWFyZ2luLWJvdHRvbTogMC40ZW07IjsKICAgICAgICBhcnRpY2xlLmluc2VydEJlZm9yZShidXR0b25zRGl2LCBhcnRpY2xlLmZpcnN0Q2hpbGQpOwogICAgICAgIC8vIOWbvueJh+mTvuaOpeeUn+aIkOaMiemSrgogICAgICAgIGlmIChpc01vYmlsZSgpKSB7CiAgICAgICAgICAgIGluamVjdE9uZUJ1dHRvbigKICAgICAgICAgICAgICAgIGJ1dHRvbnNEaXYsCiAgICAgICAgICAgICAgICAi55Sf5oiQ5Zu+54mH6ZO+5o6lKCIgKyBpbWdzLmxlbmd0aCArICIpIiwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZU9uQ2xpY2tIYW5kbGVyKGJ1dHRvbnNEaXYsIGFydGljbGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOWbvueJh+S4i+i9veaMiemSrgogICAgICAgICAgICBpbmplY3RPbmVCdXR0b24oCiAgICAgICAgICAgICAgICBidXR0b25zRGl2LAogICAgICAgICAgICAgICAgIuS4i+i9veaJgOacieWbvueJhyAoIiArIGltZ3MubGVuZ3RoICsgIikiLAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkT25DbGlja0hhbmRsZXIoYXJ0aWNsZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIC8vIOinhumikeS4i+i9veaMiemSrgogICAgICAgIGlmICgKICAgICAgICAgICAgYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCJkaXYubGltZWxpZ2h0LXBsYXllciIpIHx8CiAgICAgICAgICAgIGFydGljbGUucXVlcnlTZWxlY3RvcigiYS5wb3B1cF9saW5rIikKICAgICAgICApIHsKICAgICAgICAgICAgLy8gTGlzdCBWaWV3IOinhumikQogICAgICAgICAgICBpbmplY3RQZXJWaWRlb0Rvd25sb2FkQnV0dG9uKGFydGljbGUpOwogICAgICAgICAgICAvLyBUaW1lbGluZSDop4bpopEKICAgICAgICAgICAgaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbkZvclRpbWVsaW5lKGFydGljbGUpOwogICAgICAgIH0KICAgICAgICBtb0Rvd25sb2FkZXJMb2coIuazqOWFpeaMiemSriIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b24oZGl2KSB7CiAgICAgICAgZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoImRpdi5saW1lbGlnaHQtcGxheWVyIikuZm9yRWFjaCgodmlkZW9EaXYpID0+IHsKICAgICAgICAgICAgdmFyIG1lZGlhSWQgPSB2aWRlb0Rpdi5pZC5zdWJzdHJpbmcodmlkZW9EaXYuaWQubGFzdEluZGV4T2YoIl8iKSArIDEpOwogICAgICAgICAgICBtb0Rvd25sb2FkZXJEZWJ1Zygi5q2j5Zyo5LiL6L296KeG6aKR77yaICIgKyBtZWRpYUlkKTsKICAgICAgICAgICAgaW5qZWN0T25lQnV0dG9uKHZpZGVvRGl2LnBhcmVudEVsZW1lbnQsICLkuIvovb3op4bpopEiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgIGRvd25sb2FkVmlkZW8oCiAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LAogICAgICAgICAgICAgICAgICAgIG1lZGlhSWQsCiAgICAgICAgICAgICAgICAgICAgZ2V0UHJlZml4RnJvbUFydGljbGUoZGl2KSB8fCBnZXRQcmVmaXhGcm9tRG9jdW1lbnQoKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbkZvclRpbWVsaW5lKGRpdikgewogICAgICAgIGRpdi5xdWVyeVNlbGVjdG9yQWxsKCJhLnBvcHVwX2xpbmsiKS5mb3JFYWNoKCh2aWRlb0RpdikgPT4gewogICAgICAgICAgICB2YXIgbWVkaWFJZCA9IHZpZGVvRGl2CiAgICAgICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCJvbmNsaWNrIikKICAgICAgICAgICAgICAgIC5zcGxpdCgibW92aWUvIilbMV0KICAgICAgICAgICAgICAgIC5zcGxpdCgiLyIpWzBdOwogICAgICAgICAgICBtb0Rvd25sb2FkZXJEZWJ1Zygi5q2j5Zyo5LiL6L296KeG6aKR77yaICIgKyBtZWRpYUlkKTsKICAgICAgICAgICAgaW5qZWN0T25lQnV0dG9uKHZpZGVvRGl2LnBhcmVudEVsZW1lbnQsICLkuIvovb3op4bpopEiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgIGRvd25sb2FkVmlkZW8oCiAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LAogICAgICAgICAgICAgICAgICAgIG1lZGlhSWQsCiAgICAgICAgICAgICAgICAgICAgZ2V0UHJlZml4RnJvbUFydGljbGUoZGl2KSB8fCBnZXRQcmVmaXhGcm9tRG9jdW1lbnQoKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gaW5qZWN0T25lQnV0dG9uKGVsZW1lbnQsIHRleHRPbkJ1dHRvbiwgY2xpY2tMaXN0ZW5lcikgewogICAgICAgIHZhciBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJCVVRUT04iKTsKICAgICAgICB2YXIgYnRuVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHRPbkJ1dHRvbik7CiAgICAgICAgYnRuLmFwcGVuZENoaWxkKGJ0blRleHQpOwogICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGNsaWNrTGlzdGVuZXIpOwogICAgICAgIGJ0bi5zdHlsZSA9CiAgICAgICAgICAgICJiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsgYm9yZGVyOiBzb2xpZCAjODA4MDgwIDJweDsgYm9yZGVyLXJhZGl1czogMjBweDsgY29sb3I6ICM1NDU0NTQ7IG1hcmdpbjogMC4yZW0iOwogICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoYnRuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkb3dubG9hZE9uQ2xpY2tIYW5kbGVyKGFydGljbGUpIHsKICAgICAgICBkb3dubG9hZEltYWdlcyhmaW5kRWxpZ2libGVJbWdzKGFydGljbGUpLCBnZXRQcmVmaXhGcm9tQXJ0aWNsZShhcnRpY2xlKSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2VuZXJhdGVPbkNsaWNrSGFuZGxlcihidXR0b25zRGl2LCBhcnRpY2xlKSB7CiAgICAgICAgdmFyIGltZ3MgPSBmaW5kRWxpZ2libGVJbWdzKGFydGljbGUpOwogICAgICAgIHZhciB0ZXh0YXJlYSA9IGJ1dHRvbnNEaXYucXVlcnlTZWxlY3RvcigidGV4dGFyZWEubGRoLW1vLWRsIik7CiAgICAgICAgaWYgKCF0ZXh0YXJlYSkgewogICAgICAgICAgICB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIik7CiAgICAgICAgICAgIHRleHRhcmVhLmNsYXNzTmFtZSA9ICJsZGgtbW8tZGwiOwogICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZSA9ICJoZWlnaHQ6IDEwMHB4OyB3aWR0aDogODAlOyI7CiAgICAgICAgICAgIHZhciBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7CiAgICAgICAgICAgIGJ1dHRvbnNEaXYuaW5zZXJ0QmVmb3JlKGJyLCBidXR0b25zRGl2LmZpcnN0Q2hpbGQpOwogICAgICAgICAgICBidXR0b25zRGl2Lmluc2VydEJlZm9yZSh0ZXh0YXJlYSwgYnV0dG9uc0Rpdi5maXJzdENoaWxkKTsKICAgICAgICB9CiAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBpbWdzLmpvaW4oIlxuIik7CiAgICAgICAgdGV4dGFyZWEuc2VsZWN0KCk7CiAgICB9CgogICAgZnVuY3Rpb24gY3VzdG9taXplZFRpbWVsaW5lUGFnZSgpIHsKICAgICAgICAvLyDliJ3lp4vljJYKICAgICAgICBkb2N1bWVudAogICAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgibGRoLWluZmluaXRlLXNjcm9sbCBhcnRpY2xlIikKICAgICAgICAgICAgLmZvckVhY2goKGFydGljbGUpID0+IGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShhcnRpY2xlKSk7CiAgICAgICAgLy8KICAgICAgICBjb25zdCBpbmZpbml0ZVNjcm9sbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgICAgICJsZGgtaW5maW5pdGUtc2Nyb2xsIgogICAgICAgICk7CiAgICAgICAgY29uc3QgY29uZmlnID0geyBjaGlsZExpc3Q6IHRydWUgfTsKICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMsIG9ic2VydmVyKSB7CiAgICAgICAgICAgIHZhciBub2RlcyA9IG11dGF0aW9ucy5maW5kKChyKSA9PgogICAgICAgICAgICAgICAgQXJyYXkuZnJvbShyLmFkZGVkTm9kZXMpLmZpbHRlcigobikgPT4gKG4uY2xhc3NOYW1lID0gImFydGljbGUiKSkKICAgICAgICAgICAgKS5hZGRlZE5vZGVzOwogICAgICAgICAgICBub2Rlcy5mb3JFYWNoKChub2RlKSA9PgogICAgICAgICAgICAgICAgYXR0YWNoQnV0dG9uVG9BcnRpY2xlKG5vZGUucXVlcnlTZWxlY3RvcigiYXJ0aWNsZSIpKQogICAgICAgICAgICApOwogICAgICAgICAgICByZW1vdmVQcm90ZWN0SW1nKCk7CiAgICAgICAgICAgIG1vRG93bmxvYWRlckRlYnVnKCLmraPlnKjlm77niYfop4bpopHvvJogIik7CiAgICAgICAgfSk7CiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShpbmZpbml0ZVNjcm9sbENvbnRhaW5lciwgY29uZmlnKTsKICAgICAgICBtb0Rvd25sb2FkZXJMb2coIlRpbWVsaW5l6aG16Z2i5rOo5YWl5oyJ6ZKuIik7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIERvd25sb2FkIFV0aWxzICAgID0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PQoKICAgIGZ1bmN0aW9uIGRvd25sb2FkSW1hZ2VzKGltZ3MsIHByZWZpeCA9ICIiKSB7CiAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcoIuato+WcqOWbvueJh+inhumike+8miAiICsgaW1ncyk7CiAgICAgICAgLy8gVGhhbmtzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS95MjUyMzI4L0luc3RhZ3JhbV9Eb3dubG9hZF9CdXR0b24KICAgICAgICBpbWdzLm1hcCgoaW1nKSA9PgogICAgICAgICAgICBmZXRjaChpbWcsIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHsKICAgICAgICAgICAgICAgICAgICBPcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIG1vZGU6ICJjb3JzIiwKICAgICAgICAgICAgICAgIGNhY2hlOiAibm8tY2FjaGUiLAogICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ibG9iKCkpCiAgICAgICAgICAgICAgICAudGhlbigoYmxvYikgPT4KICAgICAgICAgICAgICAgICAgICBkb3dsb2FkQmxvYigKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYiksCiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCArIGltZy5zdWJzdHJpbmcoaW1nLmxhc3RJbmRleE9mKCIvIikgKyAxKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gY29uc29sZS5lcnJvcihlKSkKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvd25sb2FkVmlkZW8oYnV0dG9uLCB2aWRlbywgcHJlZml4ID0gIiIpIHsKICAgICAgICBjb25zdCB2aWRlb1JlcXVlc3RVUkwgPQogICAgICAgICAgICAiaHR0cHM6Ly9wcm9kdWN0aW9uLXBzLmx2cC5sbG53Lm5ldC9yL1BsYXlsaXN0U2VydmljZS9tZWRpYS88bWVkaWFJZD4vZ2V0TW9iaWxlUGxheWxpc3RCeU1lZGlhSWQiOwogICAgICAgIGZldGNoKHZpZGVvUmVxdWVzdFVSTC5yZXBsYWNlKCI8bWVkaWFJZD4iLCB2aWRlbyksIHsKICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoewogICAgICAgICAgICAgICAgT3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgICAgICAgICAgUmVmZXJlcjogd2luZG93LmxvY2F0aW9uLm9yaWdpbiwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIG1vZGU6ICJjb3JzIiwKICAgICAgICAgICAgY2FjaGU6ICJuby1jYWNoZSIsCiAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgbGV0IG0zdThVcmwgPSByZXNwb25zZS5tZWRpYUxpc3RbMF0ubW9iaWxlVXJscy5maW5kKAogICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LnRhcmdldE1lZGlhUGxhdGZvcm0gPT0gIkh0dHBMaXZlU3RyZWFtaW5nIgogICAgICAgICAgICAgICAgKS5tb2JpbGVVcmw7CiAgICAgICAgICAgICAgICBvcGVuTTNVOFRvb2xCb3goCiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLAogICAgICAgICAgICAgICAgICAgIG0zdThVcmwsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4ICsgZ2V0RmlsZW5hbWVGcm9tVmlkZW9VcmwobTN1OFVybCkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvd2xvYWRCbG9iKGJsb2IsIGZpbGVuYW1lKSB7CiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lOwogICAgICAgIGEuaHJlZiA9IGJsb2I7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgYS5yZW1vdmUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvcGVuTTNVOFRvb2xCb3goYnV0dG9uLCBtM3U4VXJsLCBmaWxlbmFtZSkgewogICAgICAgIC8vIOaJk+W8gCBodHRwczovL3Rvb2xzLnRoYXR3aW5kLmNvbS90b29sL20zdThkb3dubG9hZGVyCiAgICAgICAgaWYgKGlzTW9iaWxlKCkpIHsKICAgICAgICAgICAgbGV0IGlkID0gYnRvYShlbmNvZGVVUklDb21wb25lbnQoZmlsZW5hbWUpKTsKICAgICAgICAgICAgdmFyIGEgPSBidXR0b24ucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCJhLm1vLWRvd25sb2FkZXIiKTsKICAgICAgICAgICAgaWYgKCFhKSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgICAgIHZhciBhVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCLngrnlh7vmiZPlvIDkuIvovb3pobXpnaIiKTsKICAgICAgICAgICAgICAgIGEuY2xhc3NOYW1lID0gJ21vLWRvd25sb2FkZXInOwogICAgICAgICAgICAgICAgYS5hcHBlbmQoYVRleHQpOwogICAgICAgICAgICAgICAgYS50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgICAgICAgICAgIGEuaHJlZiA9IGNvbnN0cnVjdE0zVThUb29sQm94VVJMKG0zdThVcmwsIGZpbGVuYW1lKTsKICAgICAgICAgICAgICAgIGJ1dHRvbi5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIikpOwogICAgICAgICAgICAgICAgYnV0dG9uLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgYS50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgICAgICAgYS5ocmVmID0gY29uc3RydWN0TTNVOFRvb2xCb3hVUkwobTN1OFVybCwgZmlsZW5hbWUpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnN0cnVjdE0zVThUb29sQm94VVJMKG0zdThVcmwsIGZpbGVuYW1lKSB7CiAgICAgICAgdmFyIHVybCA9CiAgICAgICAgICAgICJodHRwczovL3Rvb2xzLnRoYXR3aW5kLmNvbS90b29sL20zdThkb3dubG9hZGVyIyIgKwogICAgICAgICAgICAibTN1OD0iICsKICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KG0zdThVcmwucmVwbGFjZSgiaHR0cDovLyIsICJodHRwczovLyIpKSArCiAgICAgICAgICAgICImcmVmZXJlcj0iICsKICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSArCiAgICAgICAgICAgICImZmlsZW5hbWU9IiArCiAgICAgICAgICAgIGZpbGVuYW1lOwogICAgICAgIG1vRG93bmxvYWRlckRlYnVnKHVybCk7CiAgICAgICAgcmV0dXJuIHVybDsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIE5hbWluZyBVdGlscyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09CgogICAgZnVuY3Rpb24gZ2V0UHJlZml4RnJvbUFydGljbGUoYXJ0aWNsZSkgewogICAgICAgIHZhciBjYW5kaWRhdGUgPQogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5hcnRpY2xlX19oZWFkIikgfHwKICAgICAgICAgICAgYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCIuYXJ0aWNsZV9faGVhZGVyIik7CiAgICAgICAgaWYgKGNhbmRpZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gc2FuaXRpemVGaWxlTmFtZSgKICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS50ZXh0Q29udGVudAogICAgICAgICAgICAgICAgICAgIC5zcGxpdCgvXHMvZykKICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChzKSA9PiBzKQogICAgICAgICAgICAgICAgICAgIC5qb2luKCJfIikgKyAiXyIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICIiOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByZWZpeEZyb21Eb2N1bWVudCgpIHsKICAgICAgICB2YXIgY2FuZGlkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLm1vdmllLXRpdGxlLWJsb2NrIik7CiAgICAgICAgaWYgKGNhbmRpZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gc2FuaXRpemVGaWxlTmFtZSgKICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS50ZXh0Q29udGVudAogICAgICAgICAgICAgICAgICAgIC5zcGxpdCgvXHMvZykKICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChzKSA9PiBzKQogICAgICAgICAgICAgICAgICAgIC5qb2luKCJfIikgKyAiXyIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICIiOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEZpbGVuYW1lRnJvbVZpZGVvVXJsKHVybCkgewogICAgICAgIGxldCB0ZW1wTmFtZSA9IHVybC5yZXBsYWNlKCIvcm9vdC1tZXNzYWdlLWN4Zi1hcGFjaGUiLCAiIik7CiAgICAgICAgdGVtcE5hbWUgPSB0ZW1wTmFtZQogICAgICAgICAgICAuc3Vic3RyaW5nKHRlbXBOYW1lLmxhc3RJbmRleE9mKCIvIikgKyAxKQogICAgICAgICAgICAucmVwbGFjZSgiLm0zdTgiLCAiLnRzIik7CiAgICAgICAgcmV0dXJuIHRlbXBOYW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhbml0aXplRmlsZU5hbWUoaW5wdXQsIHJlcGxhY2VtZW50ID0gIl8iKSB7CiAgICAgICAgLy8gVGhhbmtzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXJzaGFwL25vZGUtc2FuaXRpemUtZmlsZW5hbWUvYmxvYi9tYXN0ZXIvaW5kZXguanMKICAgICAgICBjb25zdCBpbGxlZ2FsUmUgPSAvW1wvXD88PlxcOlwqXHwiXS9nOwogICAgICAgIGNvbnN0IGNvbnRyb2xSZSA9IC9bXHgwMC1ceDFmXHg4MC1ceDlmXS9nOwogICAgICAgIGNvbnN0IHJlc2VydmVkUmUgPSAvXlwuKyQvOwogICAgICAgIGNvbnN0IHdpbmRvd3NSZXNlcnZlZFJlID0gL14oY29ufHBybnxhdXh8bnVsfGNvbVswLTldfGxwdFswLTldKShcLi4qKT8kL2k7CiAgICAgICAgY29uc3Qgd2luZG93c1RyYWlsaW5nUmUgPSAvW1wuIF0rJC87CiAgICAgICAgcmV0dXJuIGlucHV0CiAgICAgICAgICAgIC5yZXBsYWNlKGlsbGVnYWxSZSwgcmVwbGFjZW1lbnQpCiAgICAgICAgICAgIC5yZXBsYWNlKGNvbnRyb2xSZSwgcmVwbGFjZW1lbnQpCiAgICAgICAgICAgIC5yZXBsYWNlKHJlc2VydmVkUmUsIHJlcGxhY2VtZW50KQogICAgICAgICAgICAucmVwbGFjZSh3aW5kb3dzUmVzZXJ2ZWRSZSwgcmVwbGFjZW1lbnQpCiAgICAgICAgICAgIC5yZXBsYWNlKHdpbmRvd3NUcmFpbGluZ1JlLCByZXBsYWNlbWVudCk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vID0gICAgTG9nZ2luZyBVdGlscyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PQoKICAgIGZ1bmN0aW9uIG1vRG93bmxvYWRlckxvZyhtc2cpIHsKICAgICAgICBjb25zb2xlLmxvZygiW21vLWRvd25sb2Rlcl0gIiArIG1zZyk7CiAgICB9CgogICAgZnVuY3Rpb24gbW9Eb3dubG9hZGVyRGVidWcobXNnKSB7CiAgICAgICAgY29uc29sZS5kZWJ1ZygiW21vLWRvd25sb2Rlcl0gIiArIG1zZyk7CiAgICB9CgogICAgZnVuY3Rpb24gbW9Eb3dubG9hZGVybWVzc2FnZSh0ZXh0LCBkaXNhcHBlYXJUaW1lID0gNTAwMCkgewogICAgICAgIGxldCBwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI21vLWRvd25sb2FkZXItbWVzc2FnZSIpOwogICAgICAgIGlmICghcCkgewogICAgICAgICAgICBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgIHAuaWQgPSAibW8tZG93bmxvYWRlci1tZXNzYWdlIjsKICAgICAgICAgICAgcC5zdHlsZSA9CiAgICAgICAgICAgICAgICAicG9zaXRpb246IGZpeGVkOyBib3R0b206IDIwcHg7IHJpZ2h0OiAyMHB4OyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBhbGlnbi1pdGVtczogZW5kOyB6LWluZGV4OiA5OTk5OTk5OTk5OTk5OTk7IjsKICAgICAgICAgICAgKGRvY3VtZW50LmJvZHkgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hcHBlbmRDaGlsZChwKTsKICAgICAgICB9CiAgICAgICAgbGV0IG1kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICBtZGl2LmlubmVyVGV4dCA9IHRleHQ7CiAgICAgICAgbWRpdi5zdHlsZSA9CiAgICAgICAgICAgICJwYWRkaW5nOiAzcHggOHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGJhY2tncm91bmQ6IGJsYWNrOyBib3gtc2hhZG93OiAjMDAwIDFweCAycHggNXB4OyBtYXJnaW4tdG9wOiAxMHB4OyBmb250LXNpemU6IHNtYWxsOyBjb2xvcjogI2ZmZjsgdGV4dC1hbGlnbjogcmlnaHQ7IjsKICAgICAgICBwLmFwcGVuZENoaWxkKG1kaXYpOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBwLnJlbW92ZUNoaWxkKG1kaXYpOwogICAgICAgIH0sIGRpc2FwcGVhclRpbWUpOwogICAgfQp9KSgpOwo="
}