{
  "match": 0,
  "info": "mo\u4e0b\u8f7d\u5668",
  "regex": "m.tribe-m.jp@@m.ex-m.jp@@m.ldh-m.jp@@m.ldhgirls-m.jp",
  "runat": 0,
  "version": "0.39",
  "author": "\u4e59\u919a",
  "name": "mo\u4e0b\u8f7d\u5668",
  "code": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICAgbW8gKExESCkg5LiL6L295ZmoCi8vIEBuYW1lc3BhY2UgICAgICAgICAgIGh0dHBzOi8vMW1ldGhlci5tZS8KLy8gQHZlcnNpb24gICAgICAgICAgICAgMC4zOQovLyBAZGVzY3JpcHRpb24gICAgICAgICDlnKhtb+eahOWGheWuuemhteWinuWKoOWbvueJh+WSjOinhumikeS4i+i9veeahOaMiemSru+8jCDop6PplIHlj7PplK7lip/og70KLy8gQGF1dGhvciAgICAgICAgICAgICAg5LmZ6YaaKEBsb2NvZGEpCi8vIEBtYXRjaCAgICAgICAgICAgICAgIGh0dHAqOi8vbS50cmliZS1tLmpwLyoKLy8gQG1hdGNoICAgICAgICAgICAgICAgaHR0cCo6Ly9tLmV4LW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoLW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoZ2lybHMtbS5qcC8qCi8vIEBtYXRjaCAgICAgICAgICAgICAgIGh0dHAqOi8vaWQuZXhmYW1pbHkuanAvcy9sZGgvKgovLyBAaWNvbiAgICAgICAgICAgICAgICBodHRwczovL3d3dy5nb29nbGUuY29tL3MyL2Zhdmljb25zP3N6PTY0JmRvbWFpbj1sZGguY28uanAKLy8gQHNvdXJjZSAgICAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2xvY29kYS9tby1kb3dubG9hZGVyCi8vIEBsaWNlbnNlICAgICAgICAgICAgIE1JVAovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbiAoKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICAvLyA9PT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIENvbnN0cyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT09CgogICAgY29uc3QgaXNNb2JpbGUgPSAoKSA9PgogICAgICAgIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdCgKICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudAogICAgICAgICk7CgogICAgY29uc3Qga2V5d29yZHMgPSBbInVwbGNtbiIsICJ1cGxvYWQiXTsKCiAgICAvLyA9PT09PT09PT09PT09PQogICAgLy8gPSAgICBNYWluICAgID0KICAgIC8vID09PT09PT09PT09PT09CgogICAgLy8gTW8g5LiL6L295Zu+54mHCiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoIi1tLmpwIikpIHsKICAgICAgICAvLyDliKDpmaTlm77niYfkv53miqQKICAgICAgICByZW1vdmVQcm90ZWN0SW1nKCk7CiAgICAgICAgLy8g5Zyo6K+m5oOF6aG15rOo5YWl5oyJ6ZKuCiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcygiZGV0YWlsIikpIHsKICAgICAgICAgICAgaW5qZWN0RG93bmxvYWRBbGxCdXR0b25zKCk7CiAgICAgICAgfQogICAgICAgIC8vIOWcqOinhumikemhtemdouazqOWFpeaMiemSrgogICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoIm1vdmllIikpIHsKICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdi5saW1lbGlnaHQtcGxheWVyIikpIHsKICAgICAgICAgICAgICAgIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b24oZG9jdW1lbnQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIOWcqOaXtumXtOi9tOeVjOmdouWIneWni+WMluW5tuiuvue9rkxpc3RlbmVyCiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcygidGltZWxpbmUiKSkgewogICAgICAgICAgICAvLyDnrYnlvoXliqDovb1zY3JvbGwKICAgICAgICAgICAgKGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgICAgICAgICAgICB2YXIgY291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImxkaC1pbmZpbml0ZS1zY3JvbGwiKTsKICAgICAgICAgICAgICAgIGlmIChjb3VudGVyKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u5oyJ6ZKu5ZKM55uR5ZCsCiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUHJvdGVjdEltZygpOwogICAgICAgICAgICAgICAgICAgIGN1c3RvbWl6ZWRUaW1lbGluZVBhZ2UoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChpbml0LCAzMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSgpOwogICAgICAgIH0KICAgICAgICAvLyDlnKhB5YaZ6aG16Z2i5rOo5YWl5oyJ6ZKuCiAgICAgICAgaWYgKAogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoImFydGlzdHBob3RvIikgfHwKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCJhcnRpc3RfcGhvdG8iKQogICAgICAgICkgewogICAgICAgICAgICBpbmplY3RBcnRpc3RQaG90b0Rvd25sb2FkQnV0dG9uKCk7CiAgICAgICAgfQogICAgICAgIC8vIOWcqE9mZnNob3TpobXpnaLms6jlhaXmjInpkq4KICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCJsZGhfb2ZmX3Nob3QiKSkgewogICAgICAgICAgICBpbmplY3RPZmZzaG90RG93bmxvYWRCdXR0b24oKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gRkMg5LiL6L295Zu+54mHCiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoImV4ZmFtaWx5LmpwIikpIHsKICAgICAgICAvLyBGQyBNYWdhemluZSDkuIvovb3lm77niYcKICAgICAgICBpbmplY3RGQ01hZ2F6aW5lQnV0dG9uKCk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIFV0aWxzICAgID0KICAgIC8vID09PT09PT09PT09PT09PQoKICAgIGZ1bmN0aW9uIHJlbW92ZVByb3RlY3RJbWcoKSB7CiAgICAgICAgLy8g56e76Zmk5Y+z6ZSu6ZmQ5Yi2CiAgICAgICAgZG9jdW1lbnQub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfTsKICAgICAgICAvLyDnp7vpmaRwcm90ZWN0aW1n6ZmQ5Yi2CiAgICAgICAgZG9jdW1lbnQKICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoIi5wcm90ZWN0aW1nIikKICAgICAgICAgICAgLmZvckVhY2goKG5vZGUpID0+IG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgicHJvdGVjdGltZyIpKTsKICAgICAgICBtb0Rvd25sb2FkZXJMb2coIuenu+mZpOWPs+mUrumZkOWItiIpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIEJ1dHRvbiBJbmplY3Rpb24gVXRpbHMgICAgPQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiBpbmplY3REb3dubG9hZEFsbEJ1dHRvbnMoKSB7CiAgICAgICAgdmFyIGFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhcnRpY2xlIik7CiAgICAgICAgaWYgKGFydGljbGUuY2xhc3NMaXN0LmNvbnRhaW5zKCJhcnRpY2xlLS1uZXdzIikpIHsKICAgICAgICAgICAgLy8g5paw6Ze76aG16Z2i54m55q6K5aSE55CGCiAgICAgICAgICAgIGFydGljbGUgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5hcnRpY2xlX19ib2R5Iik7CiAgICAgICAgfQogICAgICAgIGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShhcnRpY2xlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5kRWxpZ2libGVJbWdzRnJvbUFydGljbGUoYXJ0aWNsZSkgewogICAgICAgIHJldHVybiBBcnJheS5mcm9tKGFydGljbGUucXVlcnlTZWxlY3RvckFsbCgiaW1nIikpCiAgICAgICAgICAgIC5tYXAoKGltZykgPT4gaW1nLnNyYykKICAgICAgICAgICAgLmZpbHRlcigoaW1nKSA9PiBrZXl3b3Jkcy5zb21lKChrKSA9PiBpbWcuaW5jbHVkZXMoaykpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhdHRhY2hCdXR0b25Ub0FydGljbGUoYXJ0aWNsZSkgewogICAgICAgIHZhciBpbWdzID0gZmluZEVsaWdpYmxlSW1nc0Zyb21BcnRpY2xlKGFydGljbGUpOwogICAgICAgIC8vIOazqOWFpeaMiemSriBkaXYKICAgICAgICB2YXIgYnV0dG9uc0RpdiA9IGdldEJ1dHRvbkRpdigpOwogICAgICAgIGFydGljbGUuaW5zZXJ0QmVmb3JlKGJ1dHRvbnNEaXYsIGFydGljbGUuZmlyc3RDaGlsZCk7CiAgICAgICAgLy8g5Zu+54mH6ZO+5o6l55Sf5oiQ5oyJ6ZKuCiAgICAgICAgaW5qZWN0SW1hZ2VEb3dubG9hZEJ1dHRvbihidXR0b25zRGl2LCBpbWdzLCBnZXRQcmVmaXhGcm9tQXJ0aWNsZShhcnRpY2xlKSk7CiAgICAgICAgLy8g6KeG6aKR5LiL6L295oyJ6ZKuCiAgICAgICAgaWYgKAogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoImRpdi5saW1lbGlnaHQtcGxheWVyIikgfHwKICAgICAgICAgICAgYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCJhLnBvcHVwX2xpbmsiKQogICAgICAgICkgewogICAgICAgICAgICAvLyBMaXN0IFZpZXcg6KeG6aKRCiAgICAgICAgICAgIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b24oYXJ0aWNsZSk7CiAgICAgICAgICAgIC8vIFRpbWVsaW5lIOinhumikQogICAgICAgICAgICBpbmplY3RQZXJWaWRlb0Rvd25sb2FkQnV0dG9uRm9yVGltZWxpbmUoYXJ0aWNsZSk7CiAgICAgICAgfQogICAgICAgIG1vRG93bmxvYWRlckxvZygi5rOo5YWl5oyJ6ZKuIik7CiAgICB9CgogICAgZnVuY3Rpb24gaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbihkaXYpIHsKICAgICAgICBkaXYucXVlcnlTZWxlY3RvckFsbCgiZGl2LmxpbWVsaWdodC1wbGF5ZXIiKS5mb3JFYWNoKCh2aWRlb0RpdikgPT4gewogICAgICAgICAgICB2YXIgbWVkaWFJZCA9IHZpZGVvRGl2LmlkLnN1YnN0cmluZyh2aWRlb0Rpdi5pZC5sYXN0SW5kZXhPZigiXyIpICsgMSk7CiAgICAgICAgICAgIG1vRG93bmxvYWRlckRlYnVnKCLmraPlnKjkuIvovb3op4bpopHvvJogIiArIG1lZGlhSWQpOwogICAgICAgICAgICBpbmplY3RPbmVCdXR0b24odmlkZW9EaXYucGFyZW50RWxlbWVudCwgIuS4i+i9veinhumikSIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgZG93bmxvYWRWaWRlbyhldmVudC50YXJnZXQsIG1lZGlhSWQsIGdldFByZWZpeEZyb21BcnRpY2xlKGRpdikpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbmplY3RBcnRpc3RQaG90b0Rvd25sb2FkQnV0dG9uKCkgewogICAgICAgIHZhciBpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjbXMtaW5uZXIiKTsKICAgICAgICB2YXIgdGl0bGUsIGltZ3M7CiAgICAgICAgaWYgKGlubmVyKSB7CiAgICAgICAgICAgIC8vIE5ldyBQYWdlCiAgICAgICAgICAgIHRpdGxlID0gaW5uZXIucXVlcnlTZWxlY3RvcigiLmNtcy1zZWN0aW9uX19pbm5lcl9fb25lLWNvbCIpOwogICAgICAgICAgICBpbWdzID0gQXJyYXkuZnJvbShpbm5lci5xdWVyeVNlbGVjdG9yQWxsKCJsZGgtY21zLWltZyBpbWciKSkubWFwKAogICAgICAgICAgICAgICAgKGltZykgPT4gaW1nLnNyYwogICAgICAgICAgICApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIExlZ2FjeSBQYWdlCiAgICAgICAgICAgIGlubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmlubmVyIik7CiAgICAgICAgICAgIHRpdGxlID0gaW5uZXIucXVlcnlTZWxlY3Rvcigic2VjdGlvbiIpOwogICAgICAgICAgICBpbWdzID0gQXJyYXkuZnJvbShpbm5lci5xdWVyeVNlbGVjdG9yQWxsKCJpbWciKSkubWFwKChpbWcpID0+IGltZy5zcmMpOwogICAgICAgIH0KICAgICAgICB2YXIgYnV0dG9uc0RpdiA9IGdldEJ1dHRvbkRpdigpOwogICAgICAgIHRpdGxlLmFwcGVuZChidXR0b25zRGl2KTsKICAgICAgICBpbmplY3RJbWFnZURvd25sb2FkQnV0dG9uKGJ1dHRvbnNEaXYsIGltZ3MsIGdldFByZWZpeEZyb21Eb2N1bWVudCgpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbmplY3RPZmZzaG90RG93bmxvYWRCdXR0b24oKSB7CiAgICAgICAgdmFyIGlubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmlubmVyIik7CiAgICAgICAgdmFyIGRpdnMgPSBBcnJheS5mcm9tKGlubmVyLnF1ZXJ5U2VsZWN0b3JBbGwoImRpdltpZF49J2pzLWdhbGxlcnknXSIpKTsKICAgICAgICBkaXZzLmZvckVhY2goKGRpdikgPT4gewogICAgICAgICAgICB2YXIgYnV0dG9uc0RpdiA9IGdldEJ1dHRvbkRpdigpOwogICAgICAgICAgICBkaXYucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChidXR0b25zRGl2KTsKICAgICAgICAgICAgdmFyIGltZ3MgPSBBcnJheS5mcm9tKGRpdi5xdWVyeVNlbGVjdG9yQWxsKCJhIikpLm1hcCgKICAgICAgICAgICAgICAgIChhKSA9PiBuZXcgVVJMKGEuaHJlZiwgd2luZG93LmxvY2F0aW9uLm9yaWdpbikuaHJlZgogICAgICAgICAgICApOwogICAgICAgICAgICBpbmplY3RJbWFnZURvd25sb2FkQnV0dG9uKGJ1dHRvbnNEaXYsIGltZ3MsIGdldFByZWZpeEZyb21Eb2N1bWVudCgpKTsKICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbmplY3RQZXJWaWRlb0Rvd25sb2FkQnV0dG9uRm9yVGltZWxpbmUoZGl2KSB7CiAgICAgICAgZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoImEucG9wdXBfbGluayIpLmZvckVhY2goKHZpZGVvRGl2KSA9PiB7CiAgICAgICAgICAgIHZhciBtZWRpYUlkID0gdmlkZW9EaXYKICAgICAgICAgICAgICAgIC5nZXRBdHRyaWJ1dGUoIm9uY2xpY2siKQogICAgICAgICAgICAgICAgLnNwbGl0KCJtb3ZpZS8iKVsxXQogICAgICAgICAgICAgICAgLnNwbGl0KCIvIilbMF07CiAgICAgICAgICAgIG1vRG93bmxvYWRlckRlYnVnKCLmraPlnKjkuIvovb3op4bpopHvvJogIiArIG1lZGlhSWQpOwogICAgICAgICAgICBpbmplY3RPbmVCdXR0b24odmlkZW9EaXYucGFyZW50RWxlbWVudCwgIuS4i+i9veinhumikSIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgZG93bmxvYWRWaWRlbyhldmVudC50YXJnZXQsIG1lZGlhSWQsIGdldFByZWZpeEZyb21BcnRpY2xlKGRpdikpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbmplY3RGQ01hZ2F6aW5lQnV0dG9uKCkgewogICAgICAgIHZhciBhcnRpY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYXJ0aWNsZSIpOwogICAgICAgIHZhciBpbWdzID0gQXJyYXkuZnJvbShhcnRpY2xlLnF1ZXJ5U2VsZWN0b3JBbGwoImltZyIpKS5tYXAoCiAgICAgICAgICAgIChpbWcpID0+CiAgICAgICAgICAgICAgICBuZXcgVVJMKGltZy5nZXRBdHRyaWJ1dGUoImRhdGEtc3JjIikgfHwgaW1nLnNyYywgd2luZG93LmxvY2F0aW9uLm9yaWdpbikKICAgICAgICAgICAgICAgICAgICAuaHJlZgogICAgICAgICk7CiAgICAgICAgaW1ncyA9IFsuLi5uZXcgU2V0KGltZ3MpXTsKICAgICAgICB2YXIgYnV0dG9uc0RpdiA9IGdldEJ1dHRvbkRpdigpOwogICAgICAgIGFydGljbGUuaW5zZXJ0QmVmb3JlKGJ1dHRvbnNEaXYsIGFydGljbGUuZmlyc3RDaGlsZCk7CiAgICAgICAgaW5qZWN0SW1hZ2VEb3dubG9hZEJ1dHRvbihidXR0b25zRGl2LCBpbWdzLCBnZXRQcmVmaXhGcm9tQXJ0aWNsZShhcnRpY2xlKSk7CiAgICAgICAgQXJyYXkuZnJvbShhcnRpY2xlLnF1ZXJ5U2VsZWN0b3JBbGwoIi5qcy1pbWciKSkuZm9yRWFjaCgoanNJbWcpID0+IHsKICAgICAgICAgICAgdmFyIGJ1dHRvbnNEaXYgPSBnZXRCdXR0b25EaXYoKTsKICAgICAgICAgICAganNJbWcucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoYnV0dG9uc0RpdiwganNJbWcpOwogICAgICAgICAgICB2YXIgaW1ncyA9IEFycmF5LmZyb20oanNJbWcucXVlcnlTZWxlY3RvckFsbCgiaW1nIikpLm1hcCgKICAgICAgICAgICAgICAgIChpbWcpID0+CiAgICAgICAgICAgICAgICAgICAgbmV3IFVSTCgKICAgICAgICAgICAgICAgICAgICAgICAgaW1nLmdldEF0dHJpYnV0ZSgiZGF0YS1zcmMiKSB8fCBpbWcuc3JjLAogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luCiAgICAgICAgICAgICAgICAgICAgKS5ocmVmCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGluamVjdEltYWdlRG93bmxvYWRCdXR0b24oCiAgICAgICAgICAgICAgICBidXR0b25zRGl2LAogICAgICAgICAgICAgICAgaW1ncywKICAgICAgICAgICAgICAgIGdldFByZWZpeEZyb21BcnRpY2xlKGFydGljbGUpLAogICAgICAgICAgICAgICAgZmFsc2UKICAgICAgICAgICAgKTsKICAgICAgICB9KTsKICAgICAgICBBcnJheS5mcm9tKAogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3JBbGwoIi5qcy1nYWxsZXJ5IC5jLWdhbGxlcnlfX21haW4iKQogICAgICAgICkuZm9yRWFjaCgoanNHYWxsZXJ5KSA9PiB7CiAgICAgICAgICAgIHZhciBidXR0b25zRGl2ID0gZ2V0QnV0dG9uRGl2KCk7CiAgICAgICAgICAgIGpzR2FsbGVyeS5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShidXR0b25zRGl2LCBqc0dhbGxlcnkpOwogICAgICAgICAgICB2YXIgaW1ncyA9IEFycmF5LmZyb20oanNHYWxsZXJ5LnF1ZXJ5U2VsZWN0b3JBbGwoImltZyIpKS5tYXAoCiAgICAgICAgICAgICAgICAoaW1nKSA9PgogICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoCiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5nZXRBdHRyaWJ1dGUoImRhdGEtc3JjIikgfHwgaW1nLnNyYywKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbgogICAgICAgICAgICAgICAgICAgICkuaHJlZgogICAgICAgICAgICApOwogICAgICAgICAgICBpbWdzID0gWy4uLm5ldyBTZXQoaW1ncyldOwogICAgICAgICAgICBpbmplY3RJbWFnZURvd25sb2FkQnV0dG9uKAogICAgICAgICAgICAgICAgYnV0dG9uc0RpdiwKICAgICAgICAgICAgICAgIGltZ3MsCiAgICAgICAgICAgICAgICBnZXRQcmVmaXhGcm9tQXJ0aWNsZShhcnRpY2xlKQogICAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdEltYWdlRG93bmxvYWRCdXR0b24oZWxlbWVudCwgaW1ncywgcHJlZml4LCBpbmZpeCA9IHRydWUpIHsKICAgICAgICBpZiAoaXNNb2JpbGUoKSkgewogICAgICAgICAgICAvLyDmiYvmnLrnlKjlm77niYfpk77mjqXnlJ/miJDmjInpkq4KICAgICAgICAgICAgaW5qZWN0T25lQnV0dG9uKAogICAgICAgICAgICAgICAgZWxlbWVudCwKICAgICAgICAgICAgICAgICLnlJ/miJDlm77niYfpk77mjqUoIiArIGltZ3MubGVuZ3RoICsgIikiLAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlT25DbGlja0hhbmRsZXIoZWxlbWVudCwgaW1ncyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5Zu+54mH5LiL6L295oyJ6ZKuCiAgICAgICAgICAgIGluamVjdE9uZUJ1dHRvbigKICAgICAgICAgICAgICAgIGVsZW1lbnQsCiAgICAgICAgICAgICAgICAoaW5maXggPyAi5LiL6L295omA5pyJ5Zu+54mHICgiIDogIuS4i+i9veWbvueJhyAoIikgKyBpbWdzLmxlbmd0aCArICIpIiwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlcyhpbWdzLCBwcmVmaXgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpbmplY3RPbmVCdXR0b24oZWxlbWVudCwgdGV4dE9uQnV0dG9uLCBjbGlja0xpc3RlbmVyKSB7CiAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIkJVVFRPTiIpOwogICAgICAgIHZhciBidG5UZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dE9uQnV0dG9uKTsKICAgICAgICBidG4uYXBwZW5kQ2hpbGQoYnRuVGV4dCk7CiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgY2xpY2tMaXN0ZW5lcik7CiAgICAgICAgYnRuLnN0eWxlID0KICAgICAgICAgICAgImJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyBib3JkZXI6IHNvbGlkICM4MDgwODAgMnB4OyBib3JkZXItcmFkaXVzOiAyMHB4OyBjb2xvcjogIzU0NTQ1NDsgbWFyZ2luOiAwLjJlbTsiOwogICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoYnRuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCdXR0b25EaXYoKSB7CiAgICAgICAgdmFyIGJ1dHRvbnNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICBidXR0b25zRGl2LmNsYXNzTmFtZSA9ICJsZGgtbW8tZGwiOwogICAgICAgIGJ1dHRvbnNEaXYuc3R5bGUgPSAibWFyZ2luLXRvcDogMC40ZW07IG1hcmdpbi1ib3R0b206IDAuNGVtIjsKICAgICAgICByZXR1cm4gYnV0dG9uc0RpdjsKICAgIH0KCiAgICBmdW5jdGlvbiBnZW5lcmF0ZU9uQ2xpY2tIYW5kbGVyKGJ1dHRvbnNEaXYsIGltZ3MpIHsKICAgICAgICB2YXIgdGV4dGFyZWEgPSBidXR0b25zRGl2LnF1ZXJ5U2VsZWN0b3IoInRleHRhcmVhLmxkaC1tby1kbCIpOwogICAgICAgIGlmICghdGV4dGFyZWEpIHsKICAgICAgICAgICAgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpOwogICAgICAgICAgICB0ZXh0YXJlYS5jbGFzc05hbWUgPSAibGRoLW1vLWRsIjsKICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUgPSAiaGVpZ2h0OiAxMDBweDsgd2lkdGg6IDgwJTsiOwogICAgICAgICAgICB2YXIgYnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpOwogICAgICAgICAgICBidXR0b25zRGl2Lmluc2VydEJlZm9yZShiciwgYnV0dG9uc0Rpdi5maXJzdENoaWxkKTsKICAgICAgICAgICAgYnV0dG9uc0Rpdi5pbnNlcnRCZWZvcmUodGV4dGFyZWEsIGJ1dHRvbnNEaXYuZmlyc3RDaGlsZCk7CiAgICAgICAgfQogICAgICAgIHRleHRhcmVhLnZhbHVlID0gaW1ncy5qb2luKCJcbiIpOwogICAgICAgIHRleHRhcmVhLnNlbGVjdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGN1c3RvbWl6ZWRUaW1lbGluZVBhZ2UoKSB7CiAgICAgICAgLy8g5Yid5aeL5YyWCiAgICAgICAgZG9jdW1lbnQKICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoImxkaC1pbmZpbml0ZS1zY3JvbGwgYXJ0aWNsZSIpCiAgICAgICAgICAgIC5mb3JFYWNoKChhcnRpY2xlKSA9PiBhdHRhY2hCdXR0b25Ub0FydGljbGUoYXJ0aWNsZSkpOwogICAgICAgIGRvY3VtZW50CiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCJsZGgtaW5maW5pdGUtc2Nyb2xsIGxkaC1pbWFnZWRpYXJ5LXRpbWVsaW5lLWxpc3QtaXRlbSIpCiAgICAgICAgICAgIC5mb3JFYWNoKChhcnRpY2xlKSA9PiBhdHRhY2hCdXR0b25Ub0FydGljbGUoYXJ0aWNsZSkpOwogICAgICAgIGNvbnN0IGluZmluaXRlU2Nyb2xsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKICAgICAgICAgICAgImxkaC1pbmZpbml0ZS1zY3JvbGwiCiAgICAgICAgKTsKICAgICAgICBjb25zdCBjb25maWcgPSB7IGNoaWxkTGlzdDogdHJ1ZSB9OwogICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucywgb2JzZXJ2ZXIpIHsKICAgICAgICAgICAgdmFyIG5vZGVzID0gbXV0YXRpb25zLmZpbmQoKHIpID0+CiAgICAgICAgICAgICAgICBBcnJheS5mcm9tKHIuYWRkZWROb2RlcykuZmlsdGVyKAogICAgICAgICAgICAgICAgICAgIChuKSA9PgogICAgICAgICAgICAgICAgICAgICAgICBuLmNsYXNzTmFtZSA9PSAiYXJ0aWNsZSIgfHwKICAgICAgICAgICAgICAgICAgICAgICAgbi5jbGFzc05hbWUgPT0gImxkaC1pbWFnZWRpYXJ5LXRpbWVsaW5lLWxpc3QtaXRlbSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKS5hZGRlZE5vZGVzOwogICAgICAgICAgICBub2Rlcy5mb3JFYWNoKChub2RlKSA9PgogICAgICAgICAgICAgICAgYXR0YWNoQnV0dG9uVG9BcnRpY2xlKAogICAgICAgICAgICAgICAgICAgIG5vZGUucXVlcnlTZWxlY3RvcigiYXJ0aWNsZSIpIHx8CiAgICAgICAgICAgICAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yKCJsZGgtaW1hZ2VkaWFyeS10aW1lbGluZS1saXN0LWl0ZW0iKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgICAgICByZW1vdmVQcm90ZWN0SW1nKCk7CiAgICAgICAgICAgIG1vRG93bmxvYWRlckRlYnVnKCLop6PpmaTliLfmlrDlkI7ml7bpl7Tnur/lj7PplK7pmZDliLYiKTsKICAgICAgICB9KTsKICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGluZmluaXRlU2Nyb2xsQ29udGFpbmVyLCBjb25maWcpOwogICAgICAgIG1vRG93bmxvYWRlckxvZygiVGltZWxpbmXpobXpnaLms6jlhaXmjInpkq4iKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vID0gICAgRG93bmxvYWQgVXRpbHMgICAgPQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09CgogICAgZnVuY3Rpb24gZG93bmxvYWRJbWFnZXMoaW1ncywgcHJlZml4ID0gIiIpIHsKICAgICAgICBtb0Rvd25sb2FkZXJEZWJ1Zygi5q2j5Zyo5LiL6L295Zu+54mH77yaICIgKyBpbWdzKTsKICAgICAgICAvLyBUaGFua3MgdG8gaHR0cHM6Ly9naXRodWIuY29tL3kyNTIzMjgvSW5zdGFncmFtX0Rvd25sb2FkX0J1dHRvbgogICAgICAgIGlmIChpbWdzLmxlbmd0aCA8PSAxMCkgewogICAgICAgICAgICAvLyDlkIzml7bmnIDlpJrkuIvovb3ljYHlvKDlm74KICAgICAgICAgICAgaW1ncy5mb3JFYWNoKChpbWcpID0+IGRvd25sb2FkT25lSW1hZ2UoaW1nLCBwcmVmaXgpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDorr7nva7lu7bml7bkuIvovb3mm7TlpJrlm77niYcgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTYyNDQ5MDIvNTYyNDU2MTAjNTYyNDU2MTAKICAgICAgICAgICAgaW1ncy5mb3JFYWNoKChpbWcsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZE9uZUltYWdlKGltZywgcHJlZml4KTsKICAgICAgICAgICAgICAgIH0sIGluZGV4ICogMjAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGRvd25sb2FkT25lSW1hZ2UoaW1nLCBwcmVmaXggPSAiIikgewogICAgICAgIGZldGNoKGltZywgewogICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7CiAgICAgICAgICAgICAgICBPcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBtb2RlOiAiY29ycyIsCiAgICAgICAgICAgIGNhY2hlOiAibm8tY2FjaGUiLAogICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYmxvYigpKQogICAgICAgICAgICAudGhlbigoYmxvYikgPT4KICAgICAgICAgICAgICAgIGRvd2xvYWRCbG9iKAogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpLAogICAgICAgICAgICAgICAgICAgIHByZWZpeCArIGltZy5zdWJzdHJpbmcoaW1nLmxhc3RJbmRleE9mKCIvIikgKyAxKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gbW9Eb3dubG9hZGVyRXJyb3IoZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvd25sb2FkVmlkZW8oYnV0dG9uLCB2aWRlbywgcHJlZml4ID0gIiIpIHsKICAgICAgICBjb25zdCB2aWRlb1JlcXVlc3RVUkwgPQogICAgICAgICAgICAiaHR0cHM6Ly9wcm9kdWN0aW9uLXBzLmx2cC5sbG53Lm5ldC9yL1BsYXlsaXN0U2VydmljZS9tZWRpYS88bWVkaWFJZD4vZ2V0TW9iaWxlUGxheWxpc3RCeU1lZGlhSWQiOwogICAgICAgIGZldGNoKHZpZGVvUmVxdWVzdFVSTC5yZXBsYWNlKCI8bWVkaWFJZD4iLCB2aWRlbyksIHsKICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoewogICAgICAgICAgICAgICAgT3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgICAgICAgICAgUmVmZXJlcjogd2luZG93LmxvY2F0aW9uLm9yaWdpbiwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIG1vZGU6ICJjb3JzIiwKICAgICAgICAgICAgY2FjaGU6ICJuby1jYWNoZSIsCiAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgLy8g5Li7bTN1OAogICAgICAgICAgICAgICAgbGV0IG0zdThVcmwgPSByZXNwb25zZS5tZWRpYUxpc3RbMF0ubW9iaWxlVXJscwogICAgICAgICAgICAgICAgICAgIC5maW5kKCh2KSA9PiB2LnRhcmdldE1lZGlhUGxhdGZvcm0gPT0gIkh0dHBMaXZlU3RyZWFtaW5nIikKICAgICAgICAgICAgICAgICAgICAubW9iaWxlVXJsLnJlcGxhY2UoImh0dHA6Ly8iLCAiaHR0cHM6Ly8iKTsKICAgICAgICAgICAgICAgIGZldGNoKG0zdThVcmwpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS50ZXh0KCkpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPlm0zdTjkuK3mnIDpq5jmuIXnmoQKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFuZHdpdGhSZSA9IC9CQU5EV0lEVEg9KFxkKykvaTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsaWdpYmxlU3RyZWFtc1JhdyA9IHJlc3BvbnNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoIiNFWFQtWC1TVFJFQU0tSU5GOiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWdpYmxlU3RyZWFtc1Jhdy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGIubWF0Y2goYmFuZHdpdGhSZSlbMV0pIC0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChhLm1hdGNoKGJhbmR3aXRoUmUpWzFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSBlbGlnaWJsZVN0cmVhbXNSYXdbMF0uc3BsaXQoIlxuIilbMV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVVJMKGNhbmRpZGF0ZSwgbmV3IFVSTChtM3U4VXJsKS5vcmlnaW4pLmhyZWY7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAudGhlbigobTN1OFVybCkgPT4KICAgICAgICAgICAgICAgICAgICAgICAgb3Blbk0zVThUb29sQm94KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbTN1OFVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCArIGdldEZpbGVuYW1lRnJvbVZpZGVvVXJsKG0zdThVcmwpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBkb3dsb2FkQmxvYihibG9iLCBmaWxlbmFtZSkgewogICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgICAgICBhLmhyZWYgPSBibG9iOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgYS5jbGljaygpOwogICAgICAgIGEucmVtb3ZlKCk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT0KICAgIC8vID0gICAgTTNVOCBVdGlscyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PQoKICAgIGZ1bmN0aW9uIG9wZW5NM1U4VG9vbEJveChidXR0b24sIG0zdThVcmwsIGZpbGVuYW1lKSB7CiAgICAgICAgLy8g5omT5byAIGh0dHBzOi8vdG9vbHMudGhhdHdpbmQuY29tL3Rvb2wvbTN1OGRvd25sb2FkZXIKICAgICAgICBpZiAoaXNNb2JpbGUoKSkgewogICAgICAgICAgICBsZXQgaWQgPSBidG9hKGVuY29kZVVSSUNvbXBvbmVudChmaWxlbmFtZSkpOwogICAgICAgICAgICB2YXIgYSA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoImEubW8tZG93bmxvYWRlciIpOwogICAgICAgICAgICBpZiAoIWEpIHsKICAgICAgICAgICAgICAgIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAgICAgICB2YXIgYVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgi54K55Ye75omT5byA5LiL6L296aG16Z2iIik7CiAgICAgICAgICAgICAgICBhLmNsYXNzTmFtZSA9ICJtby1kb3dubG9hZGVyIjsKICAgICAgICAgICAgICAgIGEuYXBwZW5kKGFUZXh0KTsKICAgICAgICAgICAgICAgIGEudGFyZ2V0ID0gIl9ibGFuayI7CiAgICAgICAgICAgICAgICBhLmhyZWYgPSBjb25zdHJ1Y3RNM1U4VG9vbEJveFVSTChtM3U4VXJsLCBmaWxlbmFtZSk7CiAgICAgICAgICAgICAgICBidXR0b24ucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpKTsKICAgICAgICAgICAgICAgIGJ1dHRvbi5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgYS50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgICAgICAgYS5ocmVmID0gY29uc3RydWN0TTNVOFRvb2xCb3hVUkwobTN1OFVybCwgZmlsZW5hbWUpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnN0cnVjdE0zVThUb29sQm94VVJMKG0zdThVcmwsIGZpbGVuYW1lKSB7CiAgICAgICAgdmFyIHVybCA9CiAgICAgICAgICAgICJodHRwczovL3Rvb2xzLnRoYXR3aW5kLmNvbS90b29sL20zdThkb3dubG9hZGVyIyIgKwogICAgICAgICAgICAibTN1OD0iICsKICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KG0zdThVcmwpICsKICAgICAgICAgICAgIiZyZWZlcmVyPSIgKwogICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpICsKICAgICAgICAgICAgIiZmaWxlbmFtZT0iICsKICAgICAgICAgICAgZmlsZW5hbWU7CiAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcodXJsKTsKICAgICAgICByZXR1cm4gdXJsOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vID0gICAgTmFtaW5nIFV0aWxzICAgID0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiBnZXRQcmVmaXhGcm9tQXJ0aWNsZShhcnRpY2xlKSB7CiAgICAgICAgdmFyIGNhbmRpZGF0ZSA9CiAgICAgICAgICAgIGFydGljbGUucXVlcnlTZWxlY3RvcigiLmFydGljbGVfX2hlYWQiKSB8fAogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5hcnRpY2xlX19oZWFkZXIiKSB8fAogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5wLWRldGFpbF9hcnRpY2xlX19oZWFkZXItdGV4dCIpOwogICAgICAgIGlmIChjYW5kaWRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIHNhbml0aXplRmlsZU5hbWUoY2FuZGlkYXRlLnRleHRDb250ZW50KSArICJfIjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGdldFByZWZpeEZyb21Eb2N1bWVudCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByZWZpeEZyb21Eb2N1bWVudCgpIHsKICAgICAgICAvLyDlpoLmnpzlrZjlnKjvvIzkvb/nlKhtb3ZpZeagh+mimAogICAgICAgIHZhciBjYW5kaWRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubW92aWUtdGl0bGUtYmxvY2siKTsKICAgICAgICBpZiAoY2FuZGlkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiBzYW5pdGl6ZUZpbGVOYW1lKGNhbmRpZGF0ZS50ZXh0Q29udGVudCkgKyAiXyI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzYW5pdGl6ZUZpbGVOYW1lKGRvY3VtZW50LnRpdGxlLnNwbGl0KCJ8IilbMF0gKyAiXyIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEZpbGVuYW1lRnJvbVZpZGVvVXJsKHVybCkgewogICAgICAgIGxldCB0ZW1wTmFtZSA9IHVybC5yZXBsYWNlKCIvcm9vdC1tZXNzYWdlLWN4Zi1hcGFjaGUiLCAiIik7CiAgICAgICAgdGVtcE5hbWUgPSB0ZW1wTmFtZQogICAgICAgICAgICAuc3Vic3RyaW5nKHRlbXBOYW1lLmxhc3RJbmRleE9mKCIvIikgKyAxKQogICAgICAgICAgICAucmVwbGFjZSgiLm0zdTgiLCAiLnRzIik7CiAgICAgICAgcmV0dXJuIHRlbXBOYW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhbml0aXplRmlsZU5hbWUoaW5wdXQsIHJlcGxhY2VtZW50ID0gIl8iKSB7CiAgICAgICAgLy8gVGhhbmtzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXJzaGFwL25vZGUtc2FuaXRpemUtZmlsZW5hbWUvYmxvYi9tYXN0ZXIvaW5kZXguanMKICAgICAgICBjb25zdCBpbGxlZ2FsUmUgPSAvW1wvXD88PlxcOlwqXHwiXS9nOwogICAgICAgIGNvbnN0IGNvbnRyb2xSZSA9IC9bXHgwMC1ceDFmXHg4MC1ceDlmXS9nOwogICAgICAgIGNvbnN0IHJlc2VydmVkUmUgPSAvXlwuKyQvOwogICAgICAgIGNvbnN0IHdpbmRvd3NSZXNlcnZlZFJlID0gL14oY29ufHBybnxhdXh8bnVsfGNvbVswLTldfGxwdFswLTldKShcLi4qKT8kL2k7CiAgICAgICAgY29uc3Qgd2luZG93c1RyYWlsaW5nUmUgPSAvW1wuIF0rJC87CiAgICAgICAgcmV0dXJuIGlucHV0CiAgICAgICAgICAgIC5zcGxpdCgvXHMvZykKICAgICAgICAgICAgLmZpbHRlcigocykgPT4gcykKICAgICAgICAgICAgLmpvaW4oIl8iKQogICAgICAgICAgICAucmVwbGFjZShpbGxlZ2FsUmUsIHJlcGxhY2VtZW50KQogICAgICAgICAgICAucmVwbGFjZShjb250cm9sUmUsIHJlcGxhY2VtZW50KQogICAgICAgICAgICAucmVwbGFjZShyZXNlcnZlZFJlLCByZXBsYWNlbWVudCkKICAgICAgICAgICAgLnJlcGxhY2Uod2luZG93c1Jlc2VydmVkUmUsIHJlcGxhY2VtZW50KQogICAgICAgICAgICAucmVwbGFjZSh3aW5kb3dzVHJhaWxpbmdSZSwgcmVwbGFjZW1lbnQpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIExvZ2dpbmcgVXRpbHMgICAgPQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiBtb0Rvd25sb2FkZXJMb2cobXNnKSB7CiAgICAgICAgY29uc29sZS5sb2coIlttby1kb3dubG9kZXJdICIgKyBtc2cpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1vRG93bmxvYWRlckRlYnVnKG1zZykgewogICAgICAgIGNvbnNvbGUuZGVidWcoIlttby1kb3dubG9kZXJdICIgKyBtc2cpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1vRG93bmxvYWRlckVycm9yKG1zZykgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIlttby1kb3dubG9kZXJdICIgKyBtc2cpOwogICAgfQp9KSgpOwo="
}