{
  "match": 0,
  "info": "mo\u4e0b\u8f7d\u5668",
  "regex": "m.tribe-m.jp@@m.ex-m.jp@@m.ldh-m.jp@@m.ldhgirls-m.jp",
  "runat": 0,
  "version": "0.32",
  "author": "\u4e59\u919a",
  "name": "mo\u4e0b\u8f7d\u5668",
  "code": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICAgbW8gKExESCkg5LiL6L295ZmoCi8vIEBuYW1lc3BhY2UgICAgICAgICAgIGh0dHBzOi8vMW1ldGhlci5tZS8KLy8gQHZlcnNpb24gICAgICAgICAgICAgMC4zMgovLyBAZGVzY3JpcHRpb24gICAgICAgICDlnKhtb+eahOWGheWuuemhteWinuWKoOWbvueJh+WSjOinhumikeS4i+i9veeahOaMiemSru+8jCDop6PplIHlj7PplK7lip/og70KLy8gQGF1dGhvciAgICAgICAgICAgICAg5LmZ6YaaKEBsb2NvZGEpCi8vIEBtYXRjaCAgICAgICAgICAgICAgIGh0dHAqOi8vbS50cmliZS1tLmpwLyoKLy8gQG1hdGNoICAgICAgICAgICAgICAgaHR0cCo6Ly9tLmV4LW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoLW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoZ2lybHMtbS5qcC8qCi8vIEBpY29uICAgICAgICAgICAgICAgIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vczIvZmF2aWNvbnM/c3o9NjQmZG9tYWluPWxkaC5jby5qcAovLyBAc291cmNlICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vbG9jb2RhL21vLWRvd25sb2FkZXIKLy8gQHVwZGF0ZVVSTCAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2xvY29kYS9tby1kb3dubG9hZGVyL3Jhdy9tYWluL21vLWRvd25sb2Rlci51c2VyLmpzCi8vIEBkb3dubG9hZFVSTCAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9sb2NvZGEvbW8tZG93bmxvYWRlci9yYXcvbWFpbi9tby1kb3dubG9kZXIudXNlci5qcwovLyBAbGljZW5zZSAgICAgICAgICAgICBNSVQKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24gKCkgewogICAgInVzZSBzdHJpY3QiOwogICAgLy8gPT09PT09PT09PT09PT09PQogICAgLy8gPSAgICBDb25zdHMgICAgPQogICAgLy8gPT09PT09PT09PT09PT09PQoKICAgIGNvbnN0IGlzTW9iaWxlID0gKCkgPT4KICAgICAgICAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoCiAgICAgICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQKICAgICAgICApOwoKICAgIGNvbnN0IGtleXdvcmRzID0gWyJ1cGxjbW4iLCAidXBsb2FkIl07CgogICAgLy8gPT09PT09PT09PT09PT0KICAgIC8vID0gICAgTWFpbiAgICA9CiAgICAvLyA9PT09PT09PT09PT09PQoKICAgIC8vIOWIoOmZpOWbvueJh+S/neaKpAogICAgcmVtb3ZlUHJvdGVjdEltZygpOwogICAgLy8g5Zyo6K+m5oOF6aG15rOo5YWl5oyJ6ZKuCiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoImRldGFpbCIpKSB7CiAgICAgICAgaW5qZWN0RG93bmxvYWRBbGxCdXR0b25zKCk7CiAgICB9CiAgICAvLyDmoLnmja7op4bpopHms6jlhaXmjInpkq4KICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygibW92aWUiKSkgewogICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXYubGltZWxpZ2h0LXBsYXllciIpKSB7CiAgICAgICAgICAgIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b24oZG9jdW1lbnQpOwogICAgICAgIH0KICAgIH0KICAgIC8vIOWcqOaXtumXtOi9tOeVjOmdouiuvue9rkxpc3RlbmVyCiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoInRpbWVsaW5lIikpIHsKICAgICAgICAvLyDnrYnlvoXliqDovb1zY3JvbGwKICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJsZGgtaW5maW5pdGUtc2Nyb2xsIik7CiAgICAgICAgICAgIGlmIChjb3VudGVyKSB7CiAgICAgICAgICAgICAgICBjdXN0b21pemVkVGltZWxpbmVQYWdlKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGluaXQsIDMwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KSgpOwogICAgfQoKICAgIGlmICgKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygiYXJ0aXN0cGhvdG8iKSB8fAogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCJhcnRpc3RfcGhvdG8iKQogICAgKSB7CiAgICAgICAgaW5qZWN0QXJ0aXN0UGhvZG9Eb3dubG9hZEJ1dHRvbigpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PQogICAgLy8gPSAgICBVdGlscyAgICA9CiAgICAvLyA9PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiByZW1vdmVQcm90ZWN0SW1nKCkgewogICAgICAgIC8vIOenu+mZpOWPs+mUrumZkOWItgogICAgICAgIGRvY3VtZW50Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH07CiAgICAgICAgLy8g56e76ZmkcHJvdGVjdGltZ+mZkOWItgogICAgICAgIGRvY3VtZW50CiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCIucHJvdGVjdGltZyIpCiAgICAgICAgICAgIC5mb3JFYWNoKChub2RlKSA9PiBub2RlLmNsYXNzTGlzdC5yZW1vdmUoInByb3RlY3RpbWciKSk7CiAgICAgICAgbW9Eb3dubG9hZGVyTG9nKCLnp7vpmaTlj7PplK7pmZDliLYiKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gPSAgICBCdXR0b24gSW5qZWN0aW9uIFV0aWxzICAgID0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogICAgZnVuY3Rpb24gaW5qZWN0RG93bmxvYWRBbGxCdXR0b25zKCkgewogICAgICAgIHZhciBhcnRpY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYXJ0aWNsZSIpOwogICAgICAgIGlmIChhcnRpY2xlLmNsYXNzTGlzdC5jb250YWlucygiYXJ0aWNsZS0tbmV3cyIpKSB7CiAgICAgICAgICAgIC8vIOaWsOmXu+mhtemdoueJueauiuWkhOeQhgogICAgICAgICAgICBhcnRpY2xlID0gYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCIuYXJ0aWNsZV9fYm9keSIpOwogICAgICAgIH0KICAgICAgICBhdHRhY2hCdXR0b25Ub0FydGljbGUoYXJ0aWNsZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZmluZEVsaWdpYmxlSW1ncyhhcnRpY2xlKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oYXJ0aWNsZS5xdWVyeVNlbGVjdG9yQWxsKCJpbWciKSkKICAgICAgICAgICAgLm1hcCgoaW1nKSA9PiBpbWcuc3JjKQogICAgICAgICAgICAuZmlsdGVyKChpbWcpID0+IGtleXdvcmRzLnNvbWUoKGspID0+IGltZy5pbmNsdWRlcyhrKSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShhcnRpY2xlKSB7CiAgICAgICAgdmFyIGltZ3MgPSBmaW5kRWxpZ2libGVJbWdzKGFydGljbGUpOwogICAgICAgIC8vIOazqOWFpeaMiemSriBkaXYKICAgICAgICB2YXIgYnV0dG9uc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIGJ1dHRvbnNEaXYuY2xhc3NOYW1lID0gImxkaC1tby1kbCI7CiAgICAgICAgYnV0dG9uc0Rpdi5zdHlsZSA9ICJtYXJnaW4tdG9wOiAwLjRlbTsgbWFyZ2luLWJvdHRvbTogMC40ZW07IjsKICAgICAgICBhcnRpY2xlLmluc2VydEJlZm9yZShidXR0b25zRGl2LCBhcnRpY2xlLmZpcnN0Q2hpbGQpOwogICAgICAgIC8vIOWbvueJh+mTvuaOpeeUn+aIkOaMiemSrgogICAgICAgIGlmIChpc01vYmlsZSgpKSB7CiAgICAgICAgICAgIGluamVjdE9uZUJ1dHRvbigKICAgICAgICAgICAgICAgIGJ1dHRvbnNEaXYsCiAgICAgICAgICAgICAgICAi55Sf5oiQ5Zu+54mH6ZO+5o6lKCIgKyBpbWdzLmxlbmd0aCArICIpIiwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZU9uQ2xpY2tIYW5kbGVyKGJ1dHRvbnNEaXYsIGFydGljbGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOWbvueJh+S4i+i9veaMiemSrgogICAgICAgICAgICBpbmplY3RPbmVCdXR0b24oCiAgICAgICAgICAgICAgICBidXR0b25zRGl2LAogICAgICAgICAgICAgICAgIuS4i+i9veaJgOacieWbvueJhyAoIiArIGltZ3MubGVuZ3RoICsgIikiLAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkT25DbGlja0hhbmRsZXIoYXJ0aWNsZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIC8vIOinhumikeS4i+i9veaMiemSrgogICAgICAgIGlmICgKICAgICAgICAgICAgYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCJkaXYubGltZWxpZ2h0LXBsYXllciIpIHx8CiAgICAgICAgICAgIGFydGljbGUucXVlcnlTZWxlY3RvcigiYS5wb3B1cF9saW5rIikKICAgICAgICApIHsKICAgICAgICAgICAgLy8gTGlzdCBWaWV3IOinhumikQogICAgICAgICAgICBpbmplY3RQZXJWaWRlb0Rvd25sb2FkQnV0dG9uKGFydGljbGUpOwogICAgICAgICAgICAvLyBUaW1lbGluZSDop4bpopEKICAgICAgICAgICAgaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbkZvclRpbWVsaW5lKGFydGljbGUpOwogICAgICAgIH0KICAgICAgICBtb0Rvd25sb2FkZXJMb2coIuazqOWFpeaMiemSriIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b24oZGl2KSB7CiAgICAgICAgZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoImRpdi5saW1lbGlnaHQtcGxheWVyIikuZm9yRWFjaCgodmlkZW9EaXYpID0+IHsKICAgICAgICAgICAgdmFyIG1lZGlhSWQgPSB2aWRlb0Rpdi5pZC5zdWJzdHJpbmcodmlkZW9EaXYuaWQubGFzdEluZGV4T2YoIl8iKSArIDEpOwogICAgICAgICAgICBtb0Rvd25sb2FkZXJEZWJ1Zygi5q2j5Zyo5LiL6L296KeG6aKR77yaICIgKyBtZWRpYUlkKTsKICAgICAgICAgICAgaW5qZWN0T25lQnV0dG9uKHZpZGVvRGl2LnBhcmVudEVsZW1lbnQsICLkuIvovb3op4bpopEiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgIGRvd25sb2FkVmlkZW8oCiAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LAogICAgICAgICAgICAgICAgICAgIG1lZGlhSWQsCiAgICAgICAgICAgICAgICAgICAgZ2V0UHJlZml4RnJvbUFydGljbGUoZGl2KSB8fCBnZXRQcmVmaXhGcm9tTW92aWVEb2N1bWVudCgpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbmplY3RBcnRpc3RQaG9kb0Rvd25sb2FkQnV0dG9uKCkgewogICAgICAgIHZhciBpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjbXMtaW5uZXIiKTsKICAgICAgICBpZiAoaW5uZXIpIHsKICAgICAgICAgICAgLy8gTmV3IFBhZ2UKICAgICAgICAgICAgdmFyIHRpdGxlID0gaW5uZXIucXVlcnlTZWxlY3RvcigiLmNtcy1zZWN0aW9uX19pbm5lcl9fb25lLWNvbCIpOwogICAgICAgICAgICB2YXIgaW1ncyA9IEFycmF5LmZyb20oaW5uZXIucXVlcnlTZWxlY3RvckFsbCgibGRoLWNtcy1pbWcgaW1nIikpLm1hcCgKICAgICAgICAgICAgICAgIChpbWcpID0+IGltZy5zcmMKICAgICAgICAgICAgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBMZWdhY3kgUGFnZQogICAgICAgICAgICBpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5pbm5lciIpOwogICAgICAgICAgICB2YXIgdGl0bGUgPSBpbm5lci5xdWVyeVNlbGVjdG9yKCJzZWN0aW9uIik7CiAgICAgICAgICAgIHZhciBpbWdzID0gQXJyYXkuZnJvbShpbm5lci5xdWVyeVNlbGVjdG9yQWxsKCJpbWciKSkubWFwKAogICAgICAgICAgICAgICAgKGltZykgPT4gaW1nLnNyYwogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICB2YXIgYnV0dG9uc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIGJ1dHRvbnNEaXYuY2xhc3NOYW1lID0gImxkaC1tby1kbCI7CiAgICAgICAgYnV0dG9uc0Rpdi5zdHlsZSA9ICJtYXJnaW4tdG9wOiAwLjRlbTsgbWFyZ2luLWJvdHRvbTogMC40ZW07IjsKICAgICAgICB0aXRsZS5hcHBlbmQoYnV0dG9uc0Rpdik7CiAgICAgICAgaW5qZWN0T25lQnV0dG9uKAogICAgICAgICAgICBidXR0b25zRGl2LAogICAgICAgICAgICAi5LiL6L295omA5pyJ5Zu+54mHICgiICsgaW1ncy5sZW5ndGggKyAiKSIsCiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGRvd25sb2FkSW1hZ2VzKGltZ3MsIGRvY3VtZW50LnRpdGxlLnNwbGl0KCJ8IilbMF0pOwogICAgICAgICAgICB9CiAgICAgICAgKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbmplY3RQZXJWaWRlb0Rvd25sb2FkQnV0dG9uRm9yVGltZWxpbmUoZGl2KSB7CiAgICAgICAgZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoImEucG9wdXBfbGluayIpLmZvckVhY2goKHZpZGVvRGl2KSA9PiB7CiAgICAgICAgICAgIHZhciBtZWRpYUlkID0gdmlkZW9EaXYKICAgICAgICAgICAgICAgIC5nZXRBdHRyaWJ1dGUoIm9uY2xpY2siKQogICAgICAgICAgICAgICAgLnNwbGl0KCJtb3ZpZS8iKVsxXQogICAgICAgICAgICAgICAgLnNwbGl0KCIvIilbMF07CiAgICAgICAgICAgIG1vRG93bmxvYWRlckRlYnVnKCLmraPlnKjkuIvovb3op4bpopHvvJogIiArIG1lZGlhSWQpOwogICAgICAgICAgICBpbmplY3RPbmVCdXR0b24odmlkZW9EaXYucGFyZW50RWxlbWVudCwgIuS4i+i9veinhumikSIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgZG93bmxvYWRWaWRlbygKICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQsCiAgICAgICAgICAgICAgICAgICAgbWVkaWFJZCwKICAgICAgICAgICAgICAgICAgICBnZXRQcmVmaXhGcm9tQXJ0aWNsZShkaXYpIHx8IGdldFByZWZpeEZyb21Nb3ZpZURvY3VtZW50KCkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdE9uZUJ1dHRvbihlbGVtZW50LCB0ZXh0T25CdXR0b24sIGNsaWNrTGlzdGVuZXIpIHsKICAgICAgICB2YXIgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiQlVUVE9OIik7CiAgICAgICAgdmFyIGJ0blRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0T25CdXR0b24pOwogICAgICAgIGJ0bi5hcHBlbmRDaGlsZChidG5UZXh0KTsKICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBjbGlja0xpc3RlbmVyKTsKICAgICAgICBidG4uc3R5bGUgPQogICAgICAgICAgICAiYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlcjogc29saWQgIzgwODA4MCAycHg7IGJvcmRlci1yYWRpdXM6IDIwcHg7IGNvbG9yOiAjNTQ1NDU0OyBtYXJnaW46IDAuMmVtIjsKICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGJ0bik7CiAgICB9CgogICAgZnVuY3Rpb24gZG93bmxvYWRPbkNsaWNrSGFuZGxlcihhcnRpY2xlKSB7CiAgICAgICAgZG93bmxvYWRJbWFnZXMoZmluZEVsaWdpYmxlSW1ncyhhcnRpY2xlKSwgZ2V0UHJlZml4RnJvbUFydGljbGUoYXJ0aWNsZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdlbmVyYXRlT25DbGlja0hhbmRsZXIoYnV0dG9uc0RpdiwgYXJ0aWNsZSkgewogICAgICAgIHZhciBpbWdzID0gZmluZEVsaWdpYmxlSW1ncyhhcnRpY2xlKTsKICAgICAgICB2YXIgdGV4dGFyZWEgPSBidXR0b25zRGl2LnF1ZXJ5U2VsZWN0b3IoInRleHRhcmVhLmxkaC1tby1kbCIpOwogICAgICAgIGlmICghdGV4dGFyZWEpIHsKICAgICAgICAgICAgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpOwogICAgICAgICAgICB0ZXh0YXJlYS5jbGFzc05hbWUgPSAibGRoLW1vLWRsIjsKICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUgPSAiaGVpZ2h0OiAxMDBweDsgd2lkdGg6IDgwJTsiOwogICAgICAgICAgICB2YXIgYnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpOwogICAgICAgICAgICBidXR0b25zRGl2Lmluc2VydEJlZm9yZShiciwgYnV0dG9uc0Rpdi5maXJzdENoaWxkKTsKICAgICAgICAgICAgYnV0dG9uc0Rpdi5pbnNlcnRCZWZvcmUodGV4dGFyZWEsIGJ1dHRvbnNEaXYuZmlyc3RDaGlsZCk7CiAgICAgICAgfQogICAgICAgIHRleHRhcmVhLnZhbHVlID0gaW1ncy5qb2luKCJcbiIpOwogICAgICAgIHRleHRhcmVhLnNlbGVjdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGN1c3RvbWl6ZWRUaW1lbGluZVBhZ2UoKSB7CiAgICAgICAgLy8g5Yid5aeL5YyWCiAgICAgICAgZG9jdW1lbnQKICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoImxkaC1pbmZpbml0ZS1zY3JvbGwgYXJ0aWNsZSIpCiAgICAgICAgICAgIC5mb3JFYWNoKChhcnRpY2xlKSA9PiBhdHRhY2hCdXR0b25Ub0FydGljbGUoYXJ0aWNsZSkpOwogICAgICAgIC8vCiAgICAgICAgY29uc3QgaW5maW5pdGVTY3JvbGxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAogICAgICAgICAgICAibGRoLWluZmluaXRlLXNjcm9sbCIKICAgICAgICApOwogICAgICAgIGNvbnN0IGNvbmZpZyA9IHsgY2hpbGRMaXN0OiB0cnVlIH07CiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zLCBvYnNlcnZlcikgewogICAgICAgICAgICB2YXIgbm9kZXMgPSBtdXRhdGlvbnMuZmluZCgocikgPT4KICAgICAgICAgICAgICAgIEFycmF5LmZyb20oci5hZGRlZE5vZGVzKS5maWx0ZXIoKG4pID0+IChuLmNsYXNzTmFtZSA9ICJhcnRpY2xlIikpCiAgICAgICAgICAgICkuYWRkZWROb2RlczsKICAgICAgICAgICAgbm9kZXMuZm9yRWFjaCgobm9kZSkgPT4KICAgICAgICAgICAgICAgIGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShub2RlLnF1ZXJ5U2VsZWN0b3IoImFydGljbGUiKSkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmVtb3ZlUHJvdGVjdEltZygpOwogICAgICAgICAgICBtb0Rvd25sb2FkZXJEZWJ1Zygi6Kej6Zmk5Yi35paw5ZCO5pe26Ze057q/5Y+z6ZSu6ZmQ5Yi2Iik7CiAgICAgICAgfSk7CiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShpbmZpbml0ZVNjcm9sbENvbnRhaW5lciwgY29uZmlnKTsKICAgICAgICBtb0Rvd25sb2FkZXJMb2coIlRpbWVsaW5l6aG16Z2i5rOo5YWl5oyJ6ZKuIik7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIERvd25sb2FkIFV0aWxzICAgID0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PQoKICAgIGZ1bmN0aW9uIGRvd25sb2FkSW1hZ2VzKGltZ3MsIHByZWZpeCA9ICIiKSB7CiAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcoIuato+WcqOS4i+i9veWbvueJh++8miAiICsgaW1ncyk7CiAgICAgICAgLy8gVGhhbmtzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS95MjUyMzI4L0luc3RhZ3JhbV9Eb3dubG9hZF9CdXR0b24KICAgICAgICBpZiAoaW1ncy5sZW5ndGggPD0gMTApIHsKICAgICAgICAgICAgLy8g5ZCM5pe25pyA5aSa5LiL6L295Y2B5byg5Zu+CiAgICAgICAgICAgIGltZ3MubWFwKChpbWcpID0+IGRvd25sb2FkT25lSW1hZ2UoaW1nLCBwcmVmaXgpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDorr7nva7lu7bml7bkuIvovb3mm7TlpJrlm77niYcgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTYyNDQ5MDIvNTYyNDU2MTAjNTYyNDU2MTAKICAgICAgICAgICAgaW1ncy5mb3JFYWNoKChpbWcsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZE9uZUltYWdlKGltZywgcHJlZml4KTsKICAgICAgICAgICAgICAgIH0sIGluZGV4ICogMzAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGRvd25sb2FkT25lSW1hZ2UoaW1nLCBwcmVmaXggPSAiIikgewogICAgICAgIGZldGNoKGltZywgewogICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7CiAgICAgICAgICAgICAgICBPcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBtb2RlOiAiY29ycyIsCiAgICAgICAgICAgIGNhY2hlOiAibm8tY2FjaGUiLAogICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYmxvYigpKQogICAgICAgICAgICAudGhlbigoYmxvYikgPT4KICAgICAgICAgICAgICAgIGRvd2xvYWRCbG9iKAogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpLAogICAgICAgICAgICAgICAgICAgIHByZWZpeCArIGltZy5zdWJzdHJpbmcoaW1nLmxhc3RJbmRleE9mKCIvIikgKyAxKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gY29uc29sZS5lcnJvcihlKSk7CiAgICB9CgogICAgZnVuY3Rpb24gZG93bmxvYWRWaWRlbyhidXR0b24sIHZpZGVvLCBwcmVmaXggPSAiIikgewogICAgICAgIGNvbnN0IHZpZGVvUmVxdWVzdFVSTCA9CiAgICAgICAgICAgICJodHRwczovL3Byb2R1Y3Rpb24tcHMubHZwLmxsbncubmV0L3IvUGxheWxpc3RTZXJ2aWNlL21lZGlhLzxtZWRpYUlkPi9nZXRNb2JpbGVQbGF5bGlzdEJ5TWVkaWFJZCI7CiAgICAgICAgZmV0Y2godmlkZW9SZXF1ZXN0VVJMLnJlcGxhY2UoIjxtZWRpYUlkPiIsIHZpZGVvKSwgewogICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7CiAgICAgICAgICAgICAgICBPcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sCiAgICAgICAgICAgICAgICBSZWZlcmVyOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgbW9kZTogImNvcnMiLAogICAgICAgICAgICBjYWNoZTogIm5vLWNhY2hlIiwKICAgICAgICB9KQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAvLyDkuLttM3U4CiAgICAgICAgICAgICAgICBsZXQgbTN1OFVybCA9IHJlc3BvbnNlLm1lZGlhTGlzdFswXS5tb2JpbGVVcmxzCiAgICAgICAgICAgICAgICAgICAgLmZpbmQoKHYpID0+IHYudGFyZ2V0TWVkaWFQbGF0Zm9ybSA9PSAiSHR0cExpdmVTdHJlYW1pbmciKQogICAgICAgICAgICAgICAgICAgIC5tb2JpbGVVcmwucmVwbGFjZSgiaHR0cDovLyIsICJodHRwczovLyIpOwogICAgICAgICAgICAgICAgZmV0Y2gobTN1OFVybCkKICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLnRleHQoKSkKICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g6I635Y+WbTN1OOS4reacgOmrmOa4heeahAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYW5kd2l0aFJlID0gL0JBTkRXSURUSD0oXGQrKS9pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxpZ2libGVTdHJlYW1zUmF3ID0gcmVzcG9uc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdCgiI0VYVC1YLVNUUkVBTS1JTkY6IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZSgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZ2libGVTdHJlYW1zUmF3LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoYi5tYXRjaChiYW5kd2l0aFJlKVsxXSkgLQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGEubWF0Y2goYmFuZHdpdGhSZSlbMV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IGVsaWdpYmxlU3RyZWFtc1Jhd1swXS5zcGxpdCgiXG4iKVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVUkwoY2FuZGlkYXRlLCBuZXcgVVJMKG0zdThVcmwpLm9yaWdpbikuaHJlZjsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKChtM3U4VXJsKSA9PgogICAgICAgICAgICAgICAgICAgICAgICBvcGVuTTNVOFRvb2xCb3goCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtM3U4VXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ICsgZ2V0RmlsZW5hbWVGcm9tVmlkZW9VcmwobTN1OFVybCkKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvd2xvYWRCbG9iKGJsb2IsIGZpbGVuYW1lKSB7CiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lOwogICAgICAgIGEuaHJlZiA9IGJsb2I7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgYS5yZW1vdmUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvcGVuTTNVOFRvb2xCb3goYnV0dG9uLCBtM3U4VXJsLCBmaWxlbmFtZSkgewogICAgICAgIC8vIOaJk+W8gCBodHRwczovL3Rvb2xzLnRoYXR3aW5kLmNvbS90b29sL20zdThkb3dubG9hZGVyCiAgICAgICAgaWYgKGlzTW9iaWxlKCkpIHsKICAgICAgICAgICAgbGV0IGlkID0gYnRvYShlbmNvZGVVUklDb21wb25lbnQoZmlsZW5hbWUpKTsKICAgICAgICAgICAgdmFyIGEgPSBidXR0b24ucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCJhLm1vLWRvd25sb2FkZXIiKTsKICAgICAgICAgICAgaWYgKCFhKSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgICAgIHZhciBhVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCLngrnlh7vmiZPlvIDkuIvovb3pobXpnaIiKTsKICAgICAgICAgICAgICAgIGEuY2xhc3NOYW1lID0gIm1vLWRvd25sb2FkZXIiOwogICAgICAgICAgICAgICAgYS5hcHBlbmQoYVRleHQpOwogICAgICAgICAgICAgICAgYS50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgICAgICAgICAgIGEuaHJlZiA9IGNvbnN0cnVjdE0zVThUb29sQm94VVJMKG0zdThVcmwsIGZpbGVuYW1lKTsKICAgICAgICAgICAgICAgIGJ1dHRvbi5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIikpOwogICAgICAgICAgICAgICAgYnV0dG9uLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgYS50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgICAgICAgYS5ocmVmID0gY29uc3RydWN0TTNVOFRvb2xCb3hVUkwobTN1OFVybCwgZmlsZW5hbWUpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnN0cnVjdE0zVThUb29sQm94VVJMKG0zdThVcmwsIGZpbGVuYW1lKSB7CiAgICAgICAgdmFyIHVybCA9CiAgICAgICAgICAgICJodHRwczovL3Rvb2xzLnRoYXR3aW5kLmNvbS90b29sL20zdThkb3dubG9hZGVyIyIgKwogICAgICAgICAgICAibTN1OD0iICsKICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KG0zdThVcmwpICsKICAgICAgICAgICAgIiZyZWZlcmVyPSIgKwogICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpICsKICAgICAgICAgICAgIiZmaWxlbmFtZT0iICsKICAgICAgICAgICAgZmlsZW5hbWU7CiAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcodXJsKTsKICAgICAgICByZXR1cm4gdXJsOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vID0gICAgTmFtaW5nIFV0aWxzICAgID0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiBnZXRQcmVmaXhGcm9tQXJ0aWNsZShhcnRpY2xlKSB7CiAgICAgICAgdmFyIGNhbmRpZGF0ZSA9CiAgICAgICAgICAgIGFydGljbGUucXVlcnlTZWxlY3RvcigiLmFydGljbGVfX2hlYWQiKSB8fAogICAgICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5hcnRpY2xlX19oZWFkZXIiKTsKICAgICAgICBpZiAoY2FuZGlkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiBzYW5pdGl6ZUZpbGVOYW1lKAogICAgICAgICAgICAgICAgY2FuZGlkYXRlLnRleHRDb250ZW50CiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KC9ccy9nKQogICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKHMpID0+IHMpCiAgICAgICAgICAgICAgICAgICAgLmpvaW4oIl8iKSArICJfIgogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gIiI7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UHJlZml4RnJvbU1vdmllRG9jdW1lbnQoKSB7CiAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5tb3ZpZS10aXRsZS1ibG9jayIpOwogICAgICAgIGlmIChjYW5kaWRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIHNhbml0aXplRmlsZU5hbWUoCiAgICAgICAgICAgICAgICBjYW5kaWRhdGUudGV4dENvbnRlbnQKICAgICAgICAgICAgICAgICAgICAuc3BsaXQoL1xzL2cpCiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigocykgPT4gcykKICAgICAgICAgICAgICAgICAgICAuam9pbigiXyIpICsgIl8iCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAiIjsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRGaWxlbmFtZUZyb21WaWRlb1VybCh1cmwpIHsKICAgICAgICBsZXQgdGVtcE5hbWUgPSB1cmwucmVwbGFjZSgiL3Jvb3QtbWVzc2FnZS1jeGYtYXBhY2hlIiwgIiIpOwogICAgICAgIHRlbXBOYW1lID0gdGVtcE5hbWUKICAgICAgICAgICAgLnN1YnN0cmluZyh0ZW1wTmFtZS5sYXN0SW5kZXhPZigiLyIpICsgMSkKICAgICAgICAgICAgLnJlcGxhY2UoIi5tM3U4IiwgIi50cyIpOwogICAgICAgIHJldHVybiB0ZW1wTmFtZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYW5pdGl6ZUZpbGVOYW1lKGlucHV0LCByZXBsYWNlbWVudCA9ICJfIikgewogICAgICAgIC8vIFRoYW5rcyB0byBodHRwczovL2dpdGh1Yi5jb20vcGFyc2hhcC9ub2RlLXNhbml0aXplLWZpbGVuYW1lL2Jsb2IvbWFzdGVyL2luZGV4LmpzCiAgICAgICAgY29uc3QgaWxsZWdhbFJlID0gL1tcL1w/PD5cXDpcKlx8Il0vZzsKICAgICAgICBjb25zdCBjb250cm9sUmUgPSAvW1x4MDAtXHgxZlx4ODAtXHg5Zl0vZzsKICAgICAgICBjb25zdCByZXNlcnZlZFJlID0gL15cLiskLzsKICAgICAgICBjb25zdCB3aW5kb3dzUmVzZXJ2ZWRSZSA9IC9eKGNvbnxwcm58YXV4fG51bHxjb21bMC05XXxscHRbMC05XSkoXC4uKik/JC9pOwogICAgICAgIGNvbnN0IHdpbmRvd3NUcmFpbGluZ1JlID0gL1tcLiBdKyQvOwogICAgICAgIHJldHVybiBpbnB1dAogICAgICAgICAgICAucmVwbGFjZShpbGxlZ2FsUmUsIHJlcGxhY2VtZW50KQogICAgICAgICAgICAucmVwbGFjZShjb250cm9sUmUsIHJlcGxhY2VtZW50KQogICAgICAgICAgICAucmVwbGFjZShyZXNlcnZlZFJlLCByZXBsYWNlbWVudCkKICAgICAgICAgICAgLnJlcGxhY2Uod2luZG93c1Jlc2VydmVkUmUsIHJlcGxhY2VtZW50KQogICAgICAgICAgICAucmVwbGFjZSh3aW5kb3dzVHJhaWxpbmdSZSwgcmVwbGFjZW1lbnQpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyA9ICAgIExvZ2dpbmcgVXRpbHMgICAgPQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT0KCiAgICBmdW5jdGlvbiBtb0Rvd25sb2FkZXJMb2cobXNnKSB7CiAgICAgICAgY29uc29sZS5sb2coIlttby1kb3dubG9kZXJdICIgKyBtc2cpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1vRG93bmxvYWRlckRlYnVnKG1zZykgewogICAgICAgIGNvbnNvbGUuZGVidWcoIlttby1kb3dubG9kZXJdICIgKyBtc2cpOwogICAgfQp9KSgpOwo="
}