{
  "match": 0,
  "info": "mo\u4e0b\u8f7d\u5668",
  "regex": "m.tribe-m.jp@@m.ex-m.jp@@m.ldh-m.jp@@m.ldhgirls-m.jp",
  "runat": 0,
  "version": "0.26",
  "author": "\u4e59\u919a",
  "name": "mo\u4e0b\u8f7d\u5668",
  "code": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICAgbW8gKExESCkg5LiL6L295ZmoCi8vIEBuYW1lc3BhY2UgICAgICAgICAgIGh0dHBzOi8vMW1ldGhlci5tZS8KLy8gQHZlcnNpb24gICAgICAgICAgICAgMC4yNgovLyBAZGVzY3JpcHRpb24gICAgICAgICDlnKhtb+eahOWGheWuuemhteWinuWKoOWbvueJh+WSjOinhumikeS4i+i9veeahOaMiemSru+8jCDop6PplIHlj7PplK7lip/og70KLy8gQGF1dGhvciAgICAgICAgICAgICAg5LmZ6YaaKEBsb2NvZGEpCi8vIEBtYXRjaCAgICAgICAgICAgICAgIGh0dHAqOi8vbS50cmliZS1tLmpwLyoKLy8gQG1hdGNoICAgICAgICAgICAgICAgaHR0cCo6Ly9tLmV4LW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoLW0uanAvKgovLyBAbWF0Y2ggICAgICAgICAgICAgICBodHRwKjovL20ubGRoZ2lybHMtbS5qcC8qCi8vIEBpY29uICAgICAgICAgICAgICAgIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vczIvZmF2aWNvbnM/c3o9NjQmZG9tYWluPWxkaC5jby5qcAovLyBAc291cmNlICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vbG9jb2RhL21vLWRvd25sb2FkZXIKLy8gQHVwZGF0ZVVSTCAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2xvY29kYS9tby1kb3dubG9hZGVyL3Jhdy9tYWluL21vLWRvd25sb2Rlci51c2VyLmpzCi8vIEBkb3dubG9hZFVSTCAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9sb2NvZGEvbW8tZG93bmxvYWRlci9yYXcvbWFpbi9tby1kb3dubG9kZXIudXNlci5qcwovLyBAbGljZW5zZSAgICAgICAgICAgICBNSVQKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24gKCkgewogICAgInVzZSBzdHJpY3QiOwogICAgLy8g5Yig6Zmk5Zu+54mH5L+d5oqkCiAgICByZW1vdmVQcm90ZWN0SW1nKCk7CiAgICAvLyDlnKjor6bmg4XpobXms6jlhaXmjInpkq4KICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygiZGV0YWlsIikpIHsKICAgICAgICBpbmplY3REb3dubG9hZEFsbEJ1dHRvbnMoKTsKICAgIH0KICAgIC8vIOagueaNruinhumikeazqOWFpeaMiemSrgogICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCJtb3ZpZSIpKSB7CiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdi5saW1lbGlnaHQtcGxheWVyIikpIHsKICAgICAgICAgICAgaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbihkb2N1bWVudCk7CiAgICAgICAgfQogICAgfQogICAgLy8g5Zyo5pe26Ze06L2055WM6Z2i6K6+572uTGlzdGVuZXIKICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcygidGltZWxpbmUiKSkgewogICAgICAgIC8vIOetieW+heWKoOi9vXNjcm9sbAogICAgICAgIChmdW5jdGlvbiBpbml0KCkgewogICAgICAgICAgICB2YXIgY291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImxkaC1pbmZpbml0ZS1zY3JvbGwiKTsKICAgICAgICAgICAgaWYgKGNvdW50ZXIpIHsKICAgICAgICAgICAgICAgIGN1c3RvbWl6ZWRUaW1lbGluZVBhZ2UoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoaW5pdCwgMzAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0pKCk7CiAgICB9Cn0pKCk7CgpmdW5jdGlvbiByZW1vdmVQcm90ZWN0SW1nKCkgewogICAgLy8g56e76Zmk5Y+z6ZSu6ZmQ5Yi2CiAgICBkb2N1bWVudC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfTsKICAgIC8vIOenu+mZpHByb3RlY3RpbWfpmZDliLYKICAgIGRvY3VtZW50CiAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoIi5wcm90ZWN0aW1nIikKICAgICAgICAuZm9yRWFjaCgobm9kZSkgPT4gbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCJwcm90ZWN0aW1nIikpOwogICAgbW9Eb3dubG9hZGVyTG9nKCLnp7vpmaTlj7PplK7pmZDliLYiKQp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyA9ICAgIEJ1dHRvbiBJbmplY3Rpb24gVXRpbHMgICAgPQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKZnVuY3Rpb24gaW5qZWN0RG93bmxvYWRBbGxCdXR0b25zKCkgewogICAgdmFyIGFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhcnRpY2xlIik7CiAgICBpZiAoYXJ0aWNsZS5jbGFzc0xpc3QuY29udGFpbnMoImFydGljbGUtLW5ld3MiKSkgewogICAgICAgIC8vIOaWsOmXu+mhtemdoueJueauiuWkhOeQhgogICAgICAgIGFydGljbGUgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5hcnRpY2xlX19ib2R5Iik7CiAgICB9CiAgICBhdHRhY2hCdXR0b25Ub0FydGljbGUoYXJ0aWNsZSk7Cn0KCmZ1bmN0aW9uIGZpbmRFbGlnaWJsZUltZ3MoYXJ0aWNsZSkgewogICAgY29uc3Qga2V5d29yZHMgPSBbInVwbGNtbiIsICJ1cGxvYWQiXTsKICAgIHJldHVybiBBcnJheS5mcm9tKGFydGljbGUucXVlcnlTZWxlY3RvckFsbCgiaW1nIikpCiAgICAgICAgLm1hcCgoaW1nKSA9PiBpbWcuc3JjKQogICAgICAgIC5maWx0ZXIoKGltZykgPT4ga2V5d29yZHMuc29tZSgoaykgPT4gaW1nLmluY2x1ZGVzKGspKSk7Cn0KCmZ1bmN0aW9uIGF0dGFjaEJ1dHRvblRvQXJ0aWNsZShhcnRpY2xlKSB7CiAgICB2YXIgaW1ncyA9IGZpbmRFbGlnaWJsZUltZ3MoYXJ0aWNsZSk7CiAgICAvLyDms6jlhaXmjInpkq4gZGl2CiAgICB2YXIgYnV0dG9uc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgYnV0dG9uc0Rpdi5jbGFzc05hbWUgPSAibGRoLW1vLWRsIjsKICAgIGJ1dHRvbnNEaXYuc3R5bGUgPSAibWFyZ2luLXRvcDogMC40ZW07IG1hcmdpbi1ib3R0b206IDAuNGVtOyI7CiAgICBhcnRpY2xlLmluc2VydEJlZm9yZShidXR0b25zRGl2LCBhcnRpY2xlLmZpcnN0Q2hpbGQpOwogICAgLy8g5Zu+54mH6ZO+5o6l55Sf5oiQ5oyJ6ZKuCiAgICBjb25zdCBpc01vYmlsZSA9ICgpID0+CiAgICAgICAgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KAogICAgICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50CiAgICAgICAgKTsKICAgIGlmIChpc01vYmlsZSgpKSB7CiAgICAgICAgaW5qZWN0T25lQnV0dG9uKGJ1dHRvbnNEaXYsICLnlJ/miJDlm77niYfpk77mjqUiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGdlbmVyYXRlT25DbGlja0hhbmRsZXIoYnV0dG9uc0RpdiwgYXJ0aWNsZSk7CiAgICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICAgIC8vIOWbvueJh+S4i+i9veaMiemSrgogICAgICAgIGluamVjdE9uZUJ1dHRvbigKICAgICAgICAgICAgYnV0dG9uc0RpdiwKICAgICAgICAgICAgIuS4i+i9veaJgOacieWbvueJhyAoIiArIGltZ3MubGVuZ3RoICsgIikiLAogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBkb3dubG9hZE9uQ2xpY2tIYW5kbGVyKGFydGljbGUpOwogICAgICAgICAgICB9CiAgICAgICAgKTsKICAgIH0KICAgIC8vIOinhumikeS4i+i9veaMiemSrgogICAgaWYgKAogICAgICAgIGFydGljbGUucXVlcnlTZWxlY3RvcigiZGl2LmxpbWVsaWdodC1wbGF5ZXIiKSB8fAogICAgICAgIGFydGljbGUucXVlcnlTZWxlY3RvcigiYS5wb3B1cF9saW5rIikKICAgICkgewogICAgICAgIC8vIGluamVjdE9uZUJ1dHRvbihidXR0b25zRGl2LCAi5LiL6L295omA5pyJ6KeG6aKRIiwgZnVuY3Rpb24gKCkgewogICAgICAgIC8vICAgICBkb3dubG9hZFZpZGVvT25DbGlja0hhbmRsZXIoYXJ0aWNsZSk7CiAgICAgICAgLy8gfSk7CiAgICAgICAgLy8gTGlzdCBWaWV3IOinhumikQogICAgICAgIGluamVjdFBlclZpZGVvRG93bmxvYWRCdXR0b24oYXJ0aWNsZSk7CiAgICAgICAgLy8gVGltZWxpbmUg6KeG6aKRCiAgICAgICAgaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbkZvclRpbWVsaW5lKGFydGljbGUpOwogICAgfQogICAgbW9Eb3dubG9hZGVyTG9nKCLms6jlhaXmjInpkq4iKQp9CgpmdW5jdGlvbiBpbmplY3RQZXJWaWRlb0Rvd25sb2FkQnV0dG9uKGRpdikgewogICAgZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoImRpdi5saW1lbGlnaHQtcGxheWVyIikuZm9yRWFjaCgodmlkZW9EaXYpID0+IHsKICAgICAgICB2YXIgbWVkaWFJZCA9IHZpZGVvRGl2LmlkLnN1YnN0cmluZyh2aWRlb0Rpdi5pZC5sYXN0SW5kZXhPZigiXyIpICsgMSk7CiAgICAgICAgbW9Eb3dubG9hZGVyRGVidWcoIuato+WcqOS4i+i9veinhumike+8miAiICsgbWVkaWFJZCkKICAgICAgICBpbmplY3RPbmVCdXR0b24odmlkZW9EaXYucGFyZW50RWxlbWVudCwgIuS4i+i9veinhumikSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZG93bmxvYWRWaWRlbygKICAgICAgICAgICAgICAgIG1lZGlhSWQsCiAgICAgICAgICAgICAgICBnZXRQcmVmaXhGcm9tQXJ0aWNsZShkaXYpIHx8IGdldFByZWZpeEZyb21Eb2N1bWVudCgpCiAgICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9KTsKfQoKZnVuY3Rpb24gaW5qZWN0UGVyVmlkZW9Eb3dubG9hZEJ1dHRvbkZvclRpbWVsaW5lKGRpdikgewogICAgZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoImEucG9wdXBfbGluayIpLmZvckVhY2goKHZpZGVvRGl2KSA9PiB7CiAgICAgICAgdmFyIG1lZGlhSWQgPSB2aWRlb0Rpdi5nZXRBdHRyaWJ1dGUoJ29uY2xpY2snKS5zcGxpdCgnbW92aWUvJylbMV0uc3BsaXQoJy8nKVswXQogICAgICAgIG1vRG93bmxvYWRlckRlYnVnKCLmraPlnKjkuIvovb3op4bpopHvvJogIiArIG1lZGlhSWQpCiAgICAgICAgaW5qZWN0T25lQnV0dG9uKHZpZGVvRGl2LnBhcmVudEVsZW1lbnQsICLkuIvovb3op4bpopEiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRvd25sb2FkVmlkZW8oCiAgICAgICAgICAgICAgICBtZWRpYUlkLAogICAgICAgICAgICAgICAgZ2V0UHJlZml4RnJvbUFydGljbGUoZGl2KSB8fCBnZXRQcmVmaXhGcm9tRG9jdW1lbnQoKQogICAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSk7Cn0KCgpmdW5jdGlvbiBpbmplY3RPbmVCdXR0b24oZWxlbWVudCwgdGV4dE9uQnV0dG9uLCBjbGlja0xpc3RlbmVyKSB7CiAgICB2YXIgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiQlVUVE9OIik7CiAgICB2YXIgYnRuVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHRPbkJ1dHRvbik7CiAgICBidG4uYXBwZW5kQ2hpbGQoYnRuVGV4dCk7CiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBjbGlja0xpc3RlbmVyKTsKICAgIGJ0bi5zdHlsZSA9CiAgICAgICAgImJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyBib3JkZXI6IHNvbGlkICM4MDgwODAgMnB4OyBib3JkZXItcmFkaXVzOiAyMHB4OyBjb2xvcjogIzU0NTQ1NDsgbWFyZ2luOiAwLjJlbSI7CiAgICBlbGVtZW50LmFwcGVuZENoaWxkKGJ0bik7Cn0KCmZ1bmN0aW9uIGRvd25sb2FkT25DbGlja0hhbmRsZXIoYXJ0aWNsZSkgewogICAgZG93bmxvYWRJbWFnZXMoZmluZEVsaWdpYmxlSW1ncyhhcnRpY2xlKSwgZ2V0UHJlZml4RnJvbUFydGljbGUoYXJ0aWNsZSkpOwp9CgpmdW5jdGlvbiBnZW5lcmF0ZU9uQ2xpY2tIYW5kbGVyKGJ1dHRvbnNEaXYsIGFydGljbGUpIHsKICAgIHZhciBpbWdzID0gZmluZEVsaWdpYmxlSW1ncyhhcnRpY2xlKTsKICAgIHZhciB0ZXh0YXJlYSA9IGJ1dHRvbnNEaXYucXVlcnlTZWxlY3RvcigidGV4dGFyZWEubGRoLW1vLWRsIik7CiAgICBpZiAoIXRleHRhcmVhKSB7CiAgICAgICAgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpOwogICAgICAgIHRleHRhcmVhLmNsYXNzTmFtZSA9ICJsZGgtbW8tZGwiOwogICAgICAgIHRleHRhcmVhLnN0eWxlID0gImhlaWdodDogMTAwcHg7IHdpZHRoOiA4MCU7IjsKICAgICAgICB2YXIgYnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpOwogICAgICAgIGJ1dHRvbnNEaXYuaW5zZXJ0QmVmb3JlKGJyLCBidXR0b25zRGl2LmZpcnN0Q2hpbGQpOwogICAgICAgIGJ1dHRvbnNEaXYuaW5zZXJ0QmVmb3JlKHRleHRhcmVhLCBidXR0b25zRGl2LmZpcnN0Q2hpbGQpOwogICAgfQogICAgdGV4dGFyZWEudmFsdWUgPSBpbWdzLmpvaW4oIlxuIik7CiAgICB0ZXh0YXJlYS5zZWxlY3QoKTsKfQoKZnVuY3Rpb24gZG93bmxvYWRWaWRlb09uQ2xpY2tIYW5kbGVyKGFydGljbGUpIHsKICAgIHZhciBlbGVtcyA9IGFydGljbGUucXVlcnlTZWxlY3RvckFsbCgic2NyaXB0Iik7CiAgICB2YXIgdmlkZW9zID0gQXJyYXkuZnJvbShlbGVtcykKICAgICAgICAuZmlsdGVyKAogICAgICAgICAgICAodikgPT4KICAgICAgICAgICAgICAgIHYudGV4dENvbnRlbnQuaW5jbHVkZXMoIm1lZGlhSWQiKSAmJgogICAgICAgICAgICAgICAgIXYudGV4dENvbnRlbnQuaW5jbHVkZXMoImJsb2dUYWxrRGF0YSIpCiAgICAgICAgKQogICAgICAgIC5tYXAoCiAgICAgICAgICAgICh2KSA9PgogICAgICAgICAgICAgICAgSlNPTi5wYXJzZSgKICAgICAgICAgICAgICAgICAgICB2LnRleHRDb250ZW50LnN1YnN0cmluZygKICAgICAgICAgICAgICAgICAgICAgICAgdi50ZXh0Q29udGVudC5pbmRleE9mKCIoIikgKyAxLAogICAgICAgICAgICAgICAgICAgICAgICB2LnRleHRDb250ZW50Lmxhc3RJbmRleE9mKCIpIikKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApLm1lZGlhSWQKICAgICAgICApOwoKICAgIHZpZGVvcy5tYXAoKHZpZGVvKSA9PiBkb3dubG9hZFZpZGVvKHZpZGVvLCBnZXRQcmVmaXhGcm9tQXJ0aWNsZShhcnRpY2xlKSkpOwp9CgpmdW5jdGlvbiBjdXN0b21pemVkVGltZWxpbmVQYWdlKCkgewogICAgLy8g5Yid5aeL5YyWCiAgICBkb2N1bWVudAogICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCJsZGgtaW5maW5pdGUtc2Nyb2xsIGFydGljbGUiKQogICAgICAgIC5mb3JFYWNoKChhcnRpY2xlKSA9PiBhdHRhY2hCdXR0b25Ub0FydGljbGUoYXJ0aWNsZSkpOwogICAgLy8KICAgIGNvbnN0IGluZmluaXRlU2Nyb2xsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibGRoLWluZmluaXRlLXNjcm9sbCIpOwogICAgY29uc3QgY29uZmlnID0geyBjaGlsZExpc3Q6IHRydWUgfTsKICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucywgb2JzZXJ2ZXIpIHsKICAgICAgICB2YXIgbm9kZXMgPSBtdXRhdGlvbnMuZmluZCgocikgPT4KICAgICAgICAgICAgQXJyYXkuZnJvbShyLmFkZGVkTm9kZXMpLmZpbHRlcigobikgPT4gKG4uY2xhc3NOYW1lID0gImFydGljbGUiKSkKICAgICAgICApLmFkZGVkTm9kZXM7CiAgICAgICAgbm9kZXMuZm9yRWFjaCgobm9kZSkgPT4KICAgICAgICAgICAgYXR0YWNoQnV0dG9uVG9BcnRpY2xlKG5vZGUucXVlcnlTZWxlY3RvcigiYXJ0aWNsZSIpKQogICAgICAgICk7CiAgICAgICAgcmVtb3ZlUHJvdGVjdEltZygpOwogICAgICAgIG1vRG93bmxvYWRlckRlYnVnKCLmraPlnKjlm77niYfop4bpopHvvJogIikKICAgIH0pOwogICAgb2JzZXJ2ZXIub2JzZXJ2ZShpbmZpbml0ZVNjcm9sbENvbnRhaW5lciwgY29uZmlnKTsKICAgIG1vRG93bmxvYWRlckxvZygiVGltZWxpbmXpobXpnaLms6jlhaXmjInpkq4iKQp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT0KLy8gPSAgICBEb3dubG9hZCBVdGlscyAgICA9Ci8vID09PT09PT09PT09PT09PT09PT09PT09PQoKZnVuY3Rpb24gZG93bmxvYWRJbWFnZXMoaW1ncywgcHJlZml4ID0gIiIpIHsKICAgIG1vRG93bmxvYWRlckRlYnVnKCLmraPlnKjlm77niYfop4bpopHvvJogIiArIGltZ3MpCiAgICAvLyBUaGFua3MgdG8gaHR0cHM6Ly9naXRodWIuY29tL3kyNTIzMjgvSW5zdGFncmFtX0Rvd25sb2FkX0J1dHRvbgogICAgaW1ncy5tYXAoKGltZykgPT4KICAgICAgICBmZXRjaChpbWcsIHsKICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoewogICAgICAgICAgICAgICAgT3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgbW9kZTogImNvcnMiLAogICAgICAgICAgICBjYWNoZTogIm5vLWNhY2hlIiwKICAgICAgICB9KQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJsb2IoKSkKICAgICAgICAgICAgLnRoZW4oKGJsb2IpID0+CiAgICAgICAgICAgICAgICBkb3dsb2FkQmxvYigKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSwKICAgICAgICAgICAgICAgICAgICBwcmVmaXggKyBpbWcuc3Vic3RyaW5nKGltZy5sYXN0SW5kZXhPZigiLyIpICsgMSkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgICAgICAuY2F0Y2goKGUpID0+IGNvbnNvbGUuZXJyb3IoZSkpCiAgICApOwp9CgpmdW5jdGlvbiBkb3dubG9hZFZpZGVvKHZpZGVvLCBwcmVmaXggPSAiIikgewogICAgY29uc3QgdmlkZW9SZXF1ZXN0VVJMID0KICAgICAgICAiaHR0cHM6Ly9wcm9kdWN0aW9uLXBzLmx2cC5sbG53Lm5ldC9yL1BsYXlsaXN0U2VydmljZS9tZWRpYS88bWVkaWFJZD4vZ2V0TW9iaWxlUGxheWxpc3RCeU1lZGlhSWQiOwogICAgZmV0Y2godmlkZW9SZXF1ZXN0VVJMLnJlcGxhY2UoIjxtZWRpYUlkPiIsIHZpZGVvKSwgewogICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHsKICAgICAgICAgICAgT3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgICAgICBSZWZlcmVyOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgIH0pLAogICAgICAgIG1vZGU6ICJjb3JzIiwKICAgICAgICBjYWNoZTogIm5vLWNhY2hlIiwKICAgIH0pCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAgICAgLnRoZW4oCiAgICAgICAgICAgIChyZXNwb25zZSkgPT4KICAgICAgICAgICAgICAgIHJlc3BvbnNlLm1lZGlhTGlzdFswXS5tb2JpbGVVcmxzLmZpbmQoCiAgICAgICAgICAgICAgICAgICAgKHYpID0+IHYudGFyZ2V0TWVkaWFQbGF0Zm9ybSA9PSAiSHR0cExpdmVTdHJlYW1pbmciCiAgICAgICAgICAgICAgICApLm1vYmlsZVVybAogICAgICAgICkKICAgICAgICAudGhlbigobTN1OFVybCkgPT4gewogICAgICAgICAgICBsZXQgdGVtcE5hbWUgPSBtM3U4VXJsLnJlcGxhY2UoIi9yb290LW1lc3NhZ2UtY3hmLWFwYWNoZSIsICIiKTsKICAgICAgICAgICAgdGVtcE5hbWUgPSB0ZW1wTmFtZS5zdWJzdHJpbmcoCiAgICAgICAgICAgICAgICB0ZW1wTmFtZS5sYXN0SW5kZXhPZigiLyIpICsgMSwKICAgICAgICAgICAgICAgIHRlbXBOYW1lLmxhc3RJbmRleE9mKCIuIikKICAgICAgICAgICAgKTsKICAgICAgICAgICAgb3Blbk0zVThUb29sQm94KG0zdThVcmwsIHByZWZpeCArIHRlbXBOYW1lICsgIi5tcDQiKTsKICAgICAgICB9KTsKfQoKZnVuY3Rpb24gZG93bG9hZEJsb2IoYmxvYiwgZmlsZW5hbWUpIHsKICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lOwogICAgYS5ocmVmID0gYmxvYjsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICBhLmNsaWNrKCk7CiAgICBhLnJlbW92ZSgpOwp9CgpmdW5jdGlvbiBvcGVuTTNVOFRvb2xCb3gobTN1OFVybCwgZmlsZW5hbWUpIHsKICAgIC8vIOaJk+W8gCBodHRwczovL3Rvb2xzLnRoYXR3aW5kLmNvbS90b29sL20zdThkb3dubG9hZGVyCiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgIGEudGFyZ2V0ID0gIl9ibGFuayI7CiAgICBhLmhyZWYgPSBjb25zdHJ1Y3RNM1U4VG9vbEJveFVSTChtM3U4VXJsLCBmaWxlbmFtZSk7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgYS5jbGljaygpOwogICAgYS5yZW1vdmUoKTsKfQoKZnVuY3Rpb24gY29uc3RydWN0TTNVOFRvb2xCb3hVUkwobTN1OFVybCwgZmlsZW5hbWUpIHsKICAgIHZhciB1cmwgPQogICAgICAgICJodHRwczovL3Rvb2xzLnRoYXR3aW5kLmNvbS90b29sL20zdThkb3dubG9hZGVyIyIgKwogICAgICAgICJtM3U4PSIgKwogICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChtM3U4VXJsLnJlcGxhY2UoImh0dHA6Ly8iLCAiaHR0cHM6Ly8iKSkgKwogICAgICAgICImcmVmZXJlcj0iICsKICAgICAgICBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpICsKICAgICAgICAiJmZpbGVuYW1lPSIgKwogICAgICAgIGZpbGVuYW1lOwogICAgbW9Eb3dubG9hZGVyRGVidWcodXJsKTsKICAgIHJldHVybiB1cmw7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT0KLy8gPSAgICBOYW1pbmcgVXRpbHMgICAgPQovLyA9PT09PT09PT09PT09PT09PT09PT09CgpmdW5jdGlvbiBnZXRQcmVmaXhGcm9tQXJ0aWNsZShhcnRpY2xlKSB7CiAgICB2YXIgY2FuZGlkYXRlID0KICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5hcnRpY2xlX19oZWFkIikgfHwKICAgICAgICBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoIi5hcnRpY2xlX19oZWFkZXIiKTsKICAgIGlmIChjYW5kaWRhdGUpIHsKICAgICAgICByZXR1cm4gc2FuaXRpemVGaWxlTmFtZSgKICAgICAgICAgICAgY2FuZGlkYXRlLnRleHRDb250ZW50CiAgICAgICAgICAgICAgICAuc3BsaXQoL1xzL2cpCiAgICAgICAgICAgICAgICAuZmlsdGVyKChzKSA9PiBzKQogICAgICAgICAgICAgICAgLmpvaW4oIl8iKSArICJfIgogICAgICAgICk7CiAgICB9CiAgICByZXR1cm4gIiI7Cn0KCmZ1bmN0aW9uIGdldFByZWZpeEZyb21Eb2N1bWVudCgpIHsKICAgIHZhciBjYW5kaWRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubW92aWUtdGl0bGUtYmxvY2siKTsKICAgIGlmIChjYW5kaWRhdGUpIHsKICAgICAgICByZXR1cm4gc2FuaXRpemVGaWxlTmFtZSgKICAgICAgICAgICAgY2FuZGlkYXRlLnRleHRDb250ZW50CiAgICAgICAgICAgICAgICAuc3BsaXQoL1xzL2cpCiAgICAgICAgICAgICAgICAuZmlsdGVyKChzKSA9PiBzKQogICAgICAgICAgICAgICAgLmpvaW4oIl8iKSArICJfIgogICAgICAgICk7CiAgICB9CiAgICByZXR1cm4gIiI7Cn0KCmZ1bmN0aW9uIHNhbml0aXplRmlsZU5hbWUoaW5wdXQsIHJlcGxhY2VtZW50ID0gIl8iKSB7CiAgICAvLyBUaGFua3MgdG8gaHR0cHM6Ly9naXRodWIuY29tL3BhcnNoYXAvbm9kZS1zYW5pdGl6ZS1maWxlbmFtZS9ibG9iL21hc3Rlci9pbmRleC5qcwogICAgY29uc3QgaWxsZWdhbFJlID0gL1tcL1w/PD5cXDpcKlx8Il0vZzsKICAgIGNvbnN0IGNvbnRyb2xSZSA9IC9bXHgwMC1ceDFmXHg4MC1ceDlmXS9nOwogICAgY29uc3QgcmVzZXJ2ZWRSZSA9IC9eXC4rJC87CiAgICBjb25zdCB3aW5kb3dzUmVzZXJ2ZWRSZSA9IC9eKGNvbnxwcm58YXV4fG51bHxjb21bMC05XXxscHRbMC05XSkoXC4uKik/JC9pOwogICAgY29uc3Qgd2luZG93c1RyYWlsaW5nUmUgPSAvW1wuIF0rJC87CiAgICByZXR1cm4gaW5wdXQKICAgICAgICAucmVwbGFjZShpbGxlZ2FsUmUsIHJlcGxhY2VtZW50KQogICAgICAgIC5yZXBsYWNlKGNvbnRyb2xSZSwgcmVwbGFjZW1lbnQpCiAgICAgICAgLnJlcGxhY2UocmVzZXJ2ZWRSZSwgcmVwbGFjZW1lbnQpCiAgICAgICAgLnJlcGxhY2Uod2luZG93c1Jlc2VydmVkUmUsIHJlcGxhY2VtZW50KQogICAgICAgIC5yZXBsYWNlKHdpbmRvd3NUcmFpbGluZ1JlLCByZXBsYWNlbWVudCk7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09Ci8vID0gICAgTG9nZ2luZyBVdGlscyAgICA9Ci8vID09PT09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIG1vRG93bmxvYWRlckxvZyhtc2cpIHsKICAgIGNvbnNvbGUubG9nKAogICAgICAgICdbbW8tZG93bmxvZGVyXVsnICsgbW9Eb3dubG9hZGVyTG9nLmNhbGxlci5uYW1lICsgJ10gJyArIG1zZwogICAgKQp9CgpmdW5jdGlvbiBtb0Rvd25sb2FkZXJEZWJ1Zyhtc2cpIHsKICAgIGNvbnNvbGUuZGVidWcoCiAgICAgICAgJ1ttby1kb3dubG9kZXJdWycgKyBtb0Rvd25sb2FkZXJEZWJ1Zy5jYWxsZXIubmFtZSArICddICcgKyBtc2cKICAgICkKfQ=="
}